<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>SunnyHerry&#39;Blog</title>
  
  <subtitle>寻找你的旅程</subtitle>
  <link href="http://love.sunnyherry.cn/atom.xml" rel="self"/>
  
  <link href="http://love.sunnyherry.cn/"/>
  <updated>2023-08-06T14:11:38.837Z</updated>
  <id>http://love.sunnyherry.cn/</id>
  
  <author>
    <name>SunnyHerry</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>阻塞队列</title>
    <link href="http://love.sunnyherry.cn/_posts/62290.html"/>
    <id>http://love.sunnyherry.cn/_posts/62290.html</id>
    <published>2023-07-31T21:11:20.000Z</published>
    <updated>2023-08-06T14:11:38.837Z</updated>
    
    <content type="html"><![CDATA[<h1 id="阻塞队列出现原因"><a href="#阻塞队列出现原因" class="headerlink" title="阻塞队列出现原因"></a>阻塞队列出现原因<span class='p red'></span></h1><p>1、很多场景要求分离生产者、消费者两个角色，题目得由不同的线程来担当，而之前的实现根本没有考虑多线程的情况<br>2、队列为空，那么在之前的实现里面会返回null，如果就是硬要拿到一个元素呢？原来的方式只能不断循环尝试寻找<br>3、队列为满，那么再之前的实现里面会返回false，如果就是硬要塞入一个元素呢？原来的方式只能不断循环尝试寻找</p><p>解决方法：<br>1、用锁保证线程安全<br>2、用条件变量让poll或offer线程进入等待状态，而不是不断循环尝试，让CPU空转</p><p>核心问题：<br><span class='p red'>多线程导致添加队列时线程错乱，可能会覆盖值或者和预期的不对</span></p><h1 id="单锁实现阻塞队列"><a href="#单锁实现阻塞队列" class="headerlink" title="单锁实现阻塞队列"></a>单锁实现阻塞队列</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BlockingQueue1</span>&lt;E&gt; <span class="keyword">implements</span> <span class="title class_">BlockingQueue</span>&lt;E&gt; &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> E[] array;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> head;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> tail;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BlockingQueue1</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        array = (E[]) <span class="keyword">new</span> <span class="title class_">Object</span>[capacity];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//加锁对象</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">ReentrantLock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Condition</span> <span class="variable">headWaits</span> <span class="operator">=</span> lock.newCondition();</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Condition</span> <span class="variable">tailWaits</span> <span class="operator">=</span> lock.newCondition();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == array.length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">offer</span><span class="params">(E e)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        lock.lockInterruptibly();</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="keyword">while</span>(isFull()) &#123;</span><br><span class="line">                <span class="comment">//线程等待</span></span><br><span class="line">                tailWaits.await();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//出循环就表示可以添加元素了</span></span><br><span class="line">            array[tail] = e;</span><br><span class="line">            <span class="keyword">if</span>(++tail == array.length) &#123;</span><br><span class="line">                tail = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            size++;</span><br><span class="line">            <span class="comment">//添加元素成功队列非空，这个时候poll方法就不用等待，让它恢复执行</span></span><br><span class="line">            headWaits.signal();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offer</span><span class="params">(E e, <span class="type">long</span> timeout)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        lock.lockInterruptibly();</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//毫秒转纳秒</span></span><br><span class="line">            <span class="type">long</span> <span class="variable">nanos</span> <span class="operator">=</span> TimeUnit.MILLISECONDS.toNanos(timeout);</span><br><span class="line">            <span class="keyword">while</span>(isFull()) &#123;</span><br><span class="line">                <span class="comment">//线程等待,且有时间上限的等待</span></span><br><span class="line">                <span class="keyword">if</span>(nanos &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                nanos = tailWaits.awaitNanos(nanos);<span class="comment">// 最多等待多少纳秒 返回值:代表剩余时间</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//出循环就表示可以添加元素了</span></span><br><span class="line">            array[tail] = e;</span><br><span class="line">            <span class="keyword">if</span>(++tail == array.length) &#123;</span><br><span class="line">                tail = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            size++;</span><br><span class="line">            <span class="comment">//添加元素成功队列非空，这个时候poll方法就不用等待，让它恢复执行</span></span><br><span class="line">            headWaits.signal();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">poll</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        lock.lockInterruptibly();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span>(isEmpty())&#123;</span><br><span class="line">                <span class="comment">//线程等待</span></span><br><span class="line">                headWaits.await();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//出循环表示队列不空了，添加元素</span></span><br><span class="line">            <span class="type">E</span> <span class="variable">e</span> <span class="operator">=</span> array[head];</span><br><span class="line">            array[head] = <span class="literal">null</span>; <span class="comment">// 垃圾回收</span></span><br><span class="line">            <span class="keyword">if</span>(++head == array.length) &#123;</span><br><span class="line">                head = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            size--;</span><br><span class="line">            <span class="comment">//取走元素了队列不满，这个时候offer方法可以被唤醒</span></span><br><span class="line">            tailWaits.signal();</span><br><span class="line">            <span class="keyword">return</span> e;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="双锁实现阻塞队列-完整版"><a href="#双锁实现阻塞队列-完整版" class="headerlink" title="双锁实现阻塞队列(完整版)"></a>双锁实现阻塞队列(完整版)</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BlockingQueue2</span>&lt;E&gt; <span class="keyword">implements</span> <span class="title class_">BlockingQueue</span>&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> E[] array;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> head;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> tail;</span><br><span class="line">    <span class="comment">//改成原子型整数防止offer和poll方法多锁情况下的size交错情况</span></span><br><span class="line">    <span class="keyword">private</span> AtomicInteger size;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BlockingQueue2</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        array = (E[]) <span class="keyword">new</span> <span class="title class_">Object</span>[capacity];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//双锁，一把在offer上一把在poll用</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">ReentrantLock</span> <span class="variable">tailLock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Condition</span> <span class="variable">tailWaits</span> <span class="operator">=</span> tailLock.newCondition();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">ReentrantLock</span> <span class="variable">headLock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Condition</span> <span class="variable">headWaits</span> <span class="operator">=</span> tailLock.newCondition();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size.get() == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size.get() == array.length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">offer</span><span class="params">(E e)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        tailLock.lockInterruptibly();</span><br><span class="line">        <span class="type">int</span> c; <span class="comment">// 新增元素前的元素个数</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//1、队列满则等待</span></span><br><span class="line">            <span class="keyword">while</span>(isFull()) &#123;</span><br><span class="line">                tailWaits.await();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//2、不满则入队</span></span><br><span class="line">            array[tail] = e;</span><br><span class="line">            <span class="keyword">if</span>(++tail == array.length) &#123;</span><br><span class="line">                tail = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//3、修改size</span></span><br><span class="line">            <span class="comment">//原子整型自增</span></span><br><span class="line">            c = size.getAndIncrement();<span class="comment">// size++</span></span><br><span class="line">            <span class="keyword">if</span>(c + <span class="number">1</span> &lt; array.length) &#123;</span><br><span class="line">                <span class="comment">//自己唤醒</span></span><br><span class="line">                tailWaits.signal();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">                1、读取成员变量size的值</span></span><br><span class="line"><span class="comment">                2、自增</span></span><br><span class="line"><span class="comment">                3、结果写回成员变量size</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            tailLock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//阻塞要和锁配对使用，但这里不配对不能直接使用</span></span><br><span class="line">        <span class="comment">//唤醒等待非空的poll线程</span></span><br><span class="line">        <span class="keyword">if</span>(c == <span class="number">0</span>) &#123;</span><br><span class="line">            headLock.lock();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                headWaits.signal();</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                headLock.unlock();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offer</span><span class="params">(E e, <span class="type">long</span> timeout)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">poll</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        E e;</span><br><span class="line">        <span class="type">int</span> c;<span class="comment">// 取走前的元素个数</span></span><br><span class="line">        headLock.lockInterruptibly();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//1、队列空则等待</span></span><br><span class="line">            <span class="keyword">while</span>(isEmpty()) &#123;</span><br><span class="line">                headWaits.await();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//出循环表示队列不空了，添加元素</span></span><br><span class="line">            e = array[head];</span><br><span class="line">            array[head] = <span class="literal">null</span>; <span class="comment">// 垃圾回收</span></span><br><span class="line">            <span class="keyword">if</span>(++head == array.length) &#123;</span><br><span class="line">                head = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            c = size.getAndDecrement();<span class="comment">// size--</span></span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">                1、读取成员变量size的值</span></span><br><span class="line"><span class="comment">                2、自减</span></span><br><span class="line"><span class="comment">                3、结果写回成员变量size</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="keyword">if</span>(c &gt; <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="comment">//自己唤醒</span></span><br><span class="line">                headWaits.signal();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            headLock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//阻塞要和锁配对使用，但这里不配对不能使用</span></span><br><span class="line">        <span class="comment">//不产生死锁：平级而非嵌套结构</span></span><br><span class="line">        <span class="comment">//队列从满 -&gt; 不满时，由poll唤醒等待不满的offer线程</span></span><br><span class="line">        <span class="keyword">if</span>(c == array.length) &#123;</span><br><span class="line">            tailLock.lock();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                tailWaits.signal();</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                tailLock.unlock();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> e;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">特殊的队列(三)-为实际应用考虑</summary>
    
    
    
    <category term="数据结构与算法" scheme="http://love.sunnyherry.cn/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="队列" scheme="http://love.sunnyherry.cn/tags/%E9%98%9F%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>优先级队列</title>
    <link href="http://love.sunnyherry.cn/_posts/36266.html"/>
    <id>http://love.sunnyherry.cn/_posts/36266.html</id>
    <published>2023-07-27T21:11:20.000Z</published>
    <updated>2023-08-06T14:11:38.837Z</updated>
    
    <content type="html"><![CDATA[<h1 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h1><p>普通队列：一端进，另一端出——FIFO(First in First out)先进先出<br>优先级队列：一端进，另一端出——<span class='p red'>按优先级出队</span></p><h1 id="无序数组实现"><a href="#无序数组实现" class="headerlink" title="无序数组实现"></a>无序数组实现</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Priority</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回对象的优先级，约定数字越大，优先级越高</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 优先级</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">priority</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 基于无序数组实现</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;E&gt;-队列中元素类型，必须实现Priority接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PriorityQueue1</span>&lt;E <span class="keyword">extends</span> <span class="title class_">Priority</span>&gt; <span class="keyword">implements</span> <span class="title class_">Queue</span>&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line">    Priority[] array;</span><br><span class="line">    <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PriorityQueue1</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        array = <span class="keyword">new</span> <span class="title class_">Priority</span>[capacity];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offer</span><span class="params">(E value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isFull()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//优先级队列向尾部添加元素没什么区别</span></span><br><span class="line">        array[size++] = value;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//返回优先级最高的索引值</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">selectMax</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(array[i].priority() &gt; array[max].priority()) &#123;</span><br><span class="line">                <span class="comment">//更新max指针</span></span><br><span class="line">                max = i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">pool</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//找到优先级最高的索引值</span></span><br><span class="line">        <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> selectMax();</span><br><span class="line">        <span class="type">E</span> <span class="variable">e</span> <span class="operator">=</span> (E) array[max];</span><br><span class="line">        remove(max);</span><br><span class="line">        <span class="keyword">return</span> e;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(index &lt; size - <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">//表示不是最后一个元素，删除的元素后面的元素都要进行移动</span></span><br><span class="line">            System.arraycopy(array, index + <span class="number">1</span>, array, index, size-<span class="number">1</span>-index);</span><br><span class="line">        &#125;</span><br><span class="line">        array[--size] = <span class="literal">null</span>; <span class="comment">//垃圾回收;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> selectMax();</span><br><span class="line">        <span class="keyword">return</span> (E) array[max];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == array.length;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="有序数组实现"><a href="#有序数组实现" class="headerlink" title="有序数组实现"></a>有序数组实现</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Priority</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回对象的优先级，约定数字越大，优先级越高</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 优先级</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">priority</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 基于有序数组实现</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;E&gt;-队列中元素类型，必须实现Priority接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PriorityQueue2</span>&lt;E <span class="keyword">extends</span> <span class="title class_">Priority</span>&gt; <span class="keyword">implements</span> <span class="title class_">Queue</span>&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line">    Priority[] array;</span><br><span class="line">    <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PriorityQueue2</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        array = <span class="keyword">new</span> <span class="title class_">Priority</span>[capacity];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offer</span><span class="params">(E value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isFull()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        insert(value);</span><br><span class="line">        size++;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(E value)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> size - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(i &gt;= <span class="number">0</span> &amp;&amp; array[i].priority() &gt; value.priority()) &#123;</span><br><span class="line">            array[i+<span class="number">1</span>] = array[i];</span><br><span class="line">            i--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//循环结束后索引加一就是要插入的位置</span></span><br><span class="line">        array[i+<span class="number">1</span>] = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">pool</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//优先级排好序了直接向尾部找,并且删除</span></span><br><span class="line">        <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">E</span> <span class="variable">e</span> <span class="operator">=</span> (E) array[size - <span class="number">1</span>];</span><br><span class="line">        array[--size] = <span class="literal">null</span>; <span class="comment">//垃圾回收</span></span><br><span class="line">        <span class="keyword">return</span> e;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//优先级排好序了直接向尾部找</span></span><br><span class="line">        <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (E) array[size - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == array.length;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="堆实现"><a href="#堆实现" class="headerlink" title="堆实现"></a>堆实现</h1><p>特征：如果把完全二叉树放在数组的话，斜着放，一个元素一个坑</p><ul><li><p>如果从索引0开始存储节点数据</p><ul><li>节点i的父节点为floor((i - 1)/2),当i &gt; 0时</li><li>节点i的左子节点为2i + 1，右子节点为2i + 2，当然他们得 &lt; size</li></ul></li><li><p>如果从索引1开始存储节点数据</p><ul><li>节点i的父节点为floor(i/2),当i &gt; 0时</li><li>节点i的左子节点为2i，右子节点为2i + 1，同样得 &lt; size</li></ul></li></ul><p>代码实现：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;h1&gt;基于堆实现&lt;/h1&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;E&gt;-队列中元素类型，必须实现Priority接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PriorityQueue3</span>&lt;E <span class="keyword">extends</span> <span class="title class_">Priority</span>&gt; <span class="keyword">implements</span> <span class="title class_">Queue</span>&lt;E&gt; &#123;</span><br><span class="line">    Priority[] array;</span><br><span class="line">    <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PriorityQueue3</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        array = <span class="keyword">new</span> <span class="title class_">Priority</span>[capacity];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        1、入堆新元素，加到数组末尾(索引位置 child)</span></span><br><span class="line"><span class="comment">        2、不断比较新加元素与它父节点(parent)优先级</span></span><br><span class="line"><span class="comment">            - 如果父节点优先级低，则向下移动，并找到下一个parent</span></span><br><span class="line"><span class="comment">            - 直至父节点优先级更高或 child==0 为止</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offer</span><span class="params">(E offered)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isFull()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">child</span> <span class="operator">=</span> size++;</span><br><span class="line">        <span class="type">int</span> <span class="variable">parent</span> <span class="operator">=</span> (child - <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">while</span>(child &gt; <span class="number">0</span> &amp;&amp; offered.priority() &gt; array[parent].priority()) &#123;</span><br><span class="line">            array[child] = array[parent];</span><br><span class="line">            child = parent;</span><br><span class="line">            parent = (child - <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//退出循环后就是要放的位置</span></span><br><span class="line">        array[child] = offered;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(E value)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> size - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(i &gt;= <span class="number">0</span> &amp;&amp; array[i].priority() &gt; value.priority()) &#123;</span><br><span class="line">            array[i+<span class="number">1</span>] = array[i];</span><br><span class="line">            i--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//循环结束后索引加一就是要插入的位置</span></span><br><span class="line">        array[i+<span class="number">1</span>] = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        1、交换堆和尾部元素，让尾部元素出队</span></span><br><span class="line"><span class="comment">        2、(下滑)</span></span><br><span class="line"><span class="comment">            - 从堆顶开始，将父元素与两个孩子较大者交换</span></span><br><span class="line"><span class="comment">            - 直到父元素大于两个孩子，或没有孩子为止</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">pool</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//交换元素，交换队列头和尾部的值，然后size减一就完成了头部删除</span></span><br><span class="line">        swap(<span class="number">0</span>, size - <span class="number">1</span>);</span><br><span class="line">        <span class="comment">//size减一后就完成头部删除</span></span><br><span class="line">        size--;</span><br><span class="line">        <span class="type">Priority</span> <span class="variable">e</span> <span class="operator">=</span> array[size];</span><br><span class="line">        array[size] = <span class="literal">null</span>; <span class="comment">//垃圾回收</span></span><br><span class="line">        <span class="comment">//下潜</span></span><br><span class="line">        down(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> (E) e;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//下潜使完全二叉树重新实现大顶推</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">down</span><span class="params">(<span class="type">int</span> parent)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> <span class="number">2</span>*parent + <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> left + <span class="number">1</span>;</span><br><span class="line">        <span class="comment">//假设初始parent最大，然后和左右孩子比较</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> parent;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(left &lt; size &amp;&amp; array[left].priority() &gt; array[max].priority()) &#123;</span><br><span class="line">            max = left;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(right &lt; size &amp;&amp; array[right].priority() &gt; array[max].priority()) &#123;</span><br><span class="line">            max = right;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//不等于初始了那就说明必须要更新</span></span><br><span class="line">        <span class="keyword">if</span>(max != parent) &#123;</span><br><span class="line">            swap(max, parent);</span><br><span class="line">            <span class="comment">//递归调用</span></span><br><span class="line">            down(max);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//完全二叉树头尾交换方法</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="type">Priority</span> <span class="variable">t</span> <span class="operator">=</span> array[i];</span><br><span class="line">        array[i] = array[j];</span><br><span class="line">        array[j] = t;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//直接返回堆顶就行</span></span><br><span class="line">        <span class="keyword">return</span> (E) array[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == array.length;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    
    <summary type="html">特殊的队列(二)</summary>
    
    
    
    <category term="数据结构与算法" scheme="http://love.sunnyherry.cn/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="队列" scheme="http://love.sunnyherry.cn/tags/%E9%98%9F%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>堆</title>
    <link href="http://love.sunnyherry.cn/_posts/21992.html"/>
    <id>http://love.sunnyherry.cn/_posts/21992.html</id>
    <published>2023-07-27T21:11:20.000Z</published>
    <updated>2023-08-06T14:11:38.837Z</updated>
    
    <content type="html"><![CDATA[<h1 id="定义以及特征"><a href="#定义以及特征" class="headerlink" title="定义以及特征"></a>定义以及特征</h1><p>计算机科学中，堆是一种基于树的数据结构，通常用完全二叉树实现。堆的特性如下：</p><ul><li>在大顶堆中，任意节点C与它的父节点P符合 P.value &gt;= C.value</li><li>在小顶堆中，任意节点C与它的父节点P符合 P.value &lt;= C.value</li><li>而顶层的节点(没有父亲)称之为root根节点</li></ul><p>特征：如果把完全二叉树放在数组的话，斜着放，一个元素一个坑</p><ul><li><p>如果从索引0开始存储节点数据</p><ul><li>节点i的父节点为floor((i - 1)/2),当i &gt; 0时</li><li>节点i的左子节点为2i + 1，右子节点为2i + 2，当然他们得 &lt; size</li></ul></li><li><p>如果从索引1开始存储节点数据</p><ul><li>节点i的父节点为floor(i/2),当i &gt; 0时</li><li>节点i的左子节点为2i，右子节点为2i + 1，同样得 &lt; size</li></ul></li></ul><h1 id="Fkoyd-建堆方法"><a href="#Fkoyd-建堆方法" class="headerlink" title="Fkoyd 建堆方法"></a>Fkoyd 建堆方法</h1><p>他提出了新的建堆方法，时间复杂度O(n)<br>1、找到最后一个非叶子节点<br>2、从后向前，对每个节点执行下潜</p><p>下面代码包含了完整的建堆以及大顶堆的方法<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//建堆，大顶堆</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MaxHeap</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] array;</span><br><span class="line">    <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MaxHeap</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.array = <span class="keyword">new</span> <span class="title class_">int</span>[capacity];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MaxHeap</span><span class="params">(<span class="type">int</span>[] array)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.array = array;</span><br><span class="line">        <span class="built_in">this</span>.size = array.length;</span><br><span class="line">        heapify();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//建堆(大顶堆)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">heapify</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//如何找到最后这个非叶子节点  size/2 - 1</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> size / <span class="number">2</span> - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            down(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将 parent 索引处的元素下潜；与两个孩子较大者交换，直至没孩子或孩子没它大</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">down</span><span class="params">(<span class="type">int</span> parent)</span> &#123;</span><br><span class="line">        <span class="comment">//找到左右孩子</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> parent * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> left + <span class="number">1</span>;</span><br><span class="line">        <span class="comment">//假设最大值就是父亲</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> parent;</span><br><span class="line">        <span class="keyword">if</span>(left &lt; size &amp;&amp; array[left] &gt; array[max]) &#123; <span class="comment">//没超出索引且孩子比父亲大最大值更改</span></span><br><span class="line">            max = left;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(right &lt; size &amp;&amp; array[right] &gt; array[max]) &#123;</span><br><span class="line">            max = right;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(max != parent) &#123;<span class="comment">// 找到更大的孩子</span></span><br><span class="line">            swap(max, parent);</span><br><span class="line">            <span class="comment">//通过递归继续下潜</span></span><br><span class="line">            down(max);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> array[i];</span><br><span class="line">        array[i] = array[j];</span><br><span class="line">        array[j] = t;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取堆顶元素(不删除)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 堆顶元素</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> array[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除堆顶元素并返回</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 堆顶元素</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">poll</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">top</span> <span class="operator">=</span> array[<span class="number">0</span>];</span><br><span class="line">        <span class="comment">//删除操作</span></span><br><span class="line">        <span class="comment">//1、先把堆顶元素和最后一个元素交换</span></span><br><span class="line">        swap(<span class="number">0</span>,size - <span class="number">1</span>);</span><br><span class="line">        size--;</span><br><span class="line">        <span class="comment">//2、下潜,重新实现大顶堆</span></span><br><span class="line">        down(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> top;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除指定位置的元素</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index-索引</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 被删除元素</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">poll</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="comment">//本质上是一样的和其实索引，不得不说老师一定设计过，这代码复用性太高了,tql</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> array[index];</span><br><span class="line">        <span class="comment">//交换位置</span></span><br><span class="line">        swap(index, size - <span class="number">1</span>);</span><br><span class="line">        size--;</span><br><span class="line">        <span class="comment">//下潜</span></span><br><span class="line">        down(index);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 替换堆顶元素</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> replaced-新元素</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">replace</span><span class="params">(<span class="type">int</span> replaced)</span> &#123;</span><br><span class="line">        array[<span class="number">0</span>] = replaced;</span><br><span class="line">        <span class="comment">//防止破坏堆的特性</span></span><br><span class="line">        <span class="comment">//下潜</span></span><br><span class="line">        down(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 在堆的尾部添加元素</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> offered-新元素</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 是否添加成功</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offer</span><span class="params">(<span class="type">int</span> offered)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(size == array.length) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        up(offered);</span><br><span class="line">        size++;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//将offered 元素上浮： 直至offered 小于父元素或到堆顶</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">up</span><span class="params">(<span class="type">int</span> offered)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">child</span> <span class="operator">=</span> size;</span><br><span class="line">        <span class="keyword">while</span>(child &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">parent</span> <span class="operator">=</span> (child - <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(offered &gt; array[parent]) &#123;</span><br><span class="line">                array[child] = array[parent];</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//不比父亲大那么结束上浮</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            child = parent;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//循环结束都是代表着上浮结束，该把目标值赋值给child索引</span></span><br><span class="line">        array[child] = offered;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="实现堆排序"><a href="#实现堆排序" class="headerlink" title="实现堆排序"></a>实现堆排序</h1><p>算法描述：<br>1、heapify建立大顶堆<br>2、将堆顶与堆底交换(最大元素被交换到堆底)，缩小并下潜调整堆<br>3、重复第二步直至堆里剩一个元素</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] array = &#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line">        <span class="type">MaxHeap</span> <span class="variable">maxHeap</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MaxHeap</span>(array);</span><br><span class="line">        System.out.println(Arrays.toString(maxHeap.array));</span><br><span class="line">        <span class="keyword">while</span>(maxHeap.size &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">//头尾交换元素</span></span><br><span class="line">            maxHeap.swap(<span class="number">0</span>, maxHeap.size - <span class="number">1</span>);</span><br><span class="line">            maxHeap.size--;</span><br><span class="line">            <span class="comment">//调整成符合大顶堆</span></span><br><span class="line">            maxHeap.down(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(Arrays.toString(maxHeap.array));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">典型数据结构</summary>
    
    
    
    <category term="数据结构与算法" scheme="http://love.sunnyherry.cn/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="堆" scheme="http://love.sunnyherry.cn/tags/%E5%A0%86/"/>
    
  </entry>
  
  <entry>
    <title>双端队列</title>
    <link href="http://love.sunnyherry.cn/_posts/44548.html"/>
    <id>http://love.sunnyherry.cn/_posts/44548.html</id>
    <published>2023-07-26T21:11:20.000Z</published>
    <updated>2023-08-06T14:11:38.837Z</updated>
    
    <content type="html"><![CDATA[<h1 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点<span class='p red'></span></h1><p>与普通队列不同的是，普通队列是在一端删除(头)，另一端添加(尾)<br><span class='p red'>而双端队列是两端都可以删除、添加</span></p><h1 id="双向链表实现双端队列"><a href="#双向链表实现双端队列" class="headerlink" title="双向链表实现双端队列"></a>双向链表实现双端队列</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 基于双向环形链表实现双端队列</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;E&gt;-队列中的元素类型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedListDeque</span>&lt;E&gt; <span class="keyword">implements</span> <span class="title class_">Deque</span>&lt;E&gt;, Iterable&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offerFirst</span><span class="params">(E e)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isFull()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//新加的节点的上一个是哨兵</span></span><br><span class="line">        Node&lt;E&gt; a = sentinel;</span><br><span class="line">        Node&lt;E&gt; b = sentinel.next;</span><br><span class="line">        Node&lt;E&gt; added = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(a, e, b);</span><br><span class="line">        a.next = added;</span><br><span class="line">        b.prev = added;</span><br><span class="line">        size++;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offerLast</span><span class="params">(E e)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isFull()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//如果是尾部添加的话那么它的下一个就是哨兵</span></span><br><span class="line">        Node&lt;E&gt; a = sentinel.prev;</span><br><span class="line">        Node&lt;E&gt; b = sentinel;</span><br><span class="line">        Node&lt;E&gt; added = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(a, e, b);</span><br><span class="line">        a.next = added;</span><br><span class="line">        b.prev = added;</span><br><span class="line">        size++;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">pollFirst</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Node&lt;E&gt; a = sentinel;</span><br><span class="line">        Node&lt;E&gt; removed = sentinel.next;</span><br><span class="line">        Node&lt;E&gt; b = removed.next;</span><br><span class="line">        a.next = b;</span><br><span class="line">        b.prev = a;</span><br><span class="line">        size--;</span><br><span class="line">        <span class="keyword">return</span> removed.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">pollLast</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Node&lt;E&gt; b = sentinel;</span><br><span class="line">        Node&lt;E&gt; removed = sentinel.prev;</span><br><span class="line">        Node&lt;E&gt; a = removed.prev;</span><br><span class="line">        a.next = b;</span><br><span class="line">        b.prev = a;</span><br><span class="line">        size--;</span><br><span class="line">        <span class="keyword">return</span> removed.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">peekFirst</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sentinel.next.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">peekLast</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sentinel.prev.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == capacity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;E&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Iterator</span>&lt;E&gt;() &#123;</span><br><span class="line">            Node&lt;E&gt; p = sentinel.next;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> p != sentinel;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> E <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="type">E</span> <span class="variable">value</span> <span class="operator">=</span> p.value;</span><br><span class="line">                p = p.next;</span><br><span class="line">                <span class="keyword">return</span> value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;E&gt; &#123;</span><br><span class="line">        Node&lt;E&gt; prev;</span><br><span class="line">        E value;</span><br><span class="line">        Node&lt;E&gt; next;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(Node&lt;E&gt; prev, E value, Node&lt;E&gt; next)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.prev = prev;</span><br><span class="line">            <span class="built_in">this</span>.value = value;</span><br><span class="line">            <span class="built_in">this</span>.next = next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> capacity;</span><br><span class="line">    <span class="type">int</span> size;</span><br><span class="line">    Node&lt;E&gt; sentinel = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(<span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LinkedListDeque</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.capacity = capacity;</span><br><span class="line">        <span class="comment">//环形双向链表</span></span><br><span class="line">        sentinel.next = sentinel;</span><br><span class="line">        sentinel.prev = sentinel;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="环形数组实现双端队列"><a href="#环形数组实现双端队列" class="headerlink" title="环形数组实现双端队列"></a>环形数组实现双端队列</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 基于循环数组实现双端队列</span></span><br><span class="line"><span class="comment"> * - tail停下来的位置不存储，会浪费一个位置</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;E&gt;-队列中元素类型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayDeque1</span>&lt;E&gt; <span class="keyword">implements</span> <span class="title class_">Deque</span>&lt;E&gt;, Iterable&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//索引判断越界</span></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">inc</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> length)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(i + <span class="number">1</span> &gt;= length) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> i + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">dec</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> length)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(i - <span class="number">1</span> &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> length - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> i - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    E[] array;</span><br><span class="line">    <span class="type">int</span> head;</span><br><span class="line">    <span class="type">int</span> tail;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ArrayDeque1</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        array = (E[]) <span class="keyword">new</span> <span class="title class_">Object</span>[capacity + <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offerFirst</span><span class="params">(E e)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isFull()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//在头部添加元素要先移动指针</span></span><br><span class="line">        head = dec(head, array.length);</span><br><span class="line">        array[head] = e;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offerLast</span><span class="params">(E e)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isFull()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//在尾部添加元素要先添加再移动</span></span><br><span class="line">        array[head] = e;</span><br><span class="line">        tail = inc(tail, array.length);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">pollFirst</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//先添加值再移动指针</span></span><br><span class="line">        <span class="type">E</span> <span class="variable">e</span> <span class="operator">=</span> array[head];</span><br><span class="line">        array[head] = <span class="literal">null</span>; <span class="comment">//垃圾回收，不占用字节不占用内存</span></span><br><span class="line">        head = inc(head, array.length);</span><br><span class="line">        <span class="keyword">return</span> e;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">pollLast</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//先移动指针再删除</span></span><br><span class="line">        tail = dec(tail, array.length);</span><br><span class="line">        <span class="type">E</span> <span class="variable">e</span> <span class="operator">=</span> array[tail];</span><br><span class="line">        array[tail] = <span class="literal">null</span>; <span class="comment">//垃圾回收，不占用内存</span></span><br><span class="line">        <span class="keyword">return</span> e;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">peekFirst</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> array[head];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">peekLast</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//因为尾指针不存储值，所以要取它前一个</span></span><br><span class="line">        <span class="keyword">return</span> array[dec(tail, array.length)];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> head == tail;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(tail &gt; head) &#123;</span><br><span class="line">            <span class="keyword">return</span> tail - head == array.length - <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(tail &lt; head) &#123;</span><br><span class="line">            <span class="keyword">return</span> head - tail == <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;E&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Iterator</span>&lt;E&gt;() &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> head;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> p != tail;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> E <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="type">E</span> <span class="variable">e</span> <span class="operator">=</span> array[p];</span><br><span class="line">                p = inc(p, array.length);</span><br><span class="line">                <span class="keyword">return</span> e;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="练习-二叉树s字层序遍历"><a href="#练习-二叉树s字层序遍历" class="headerlink" title="练习:二叉树s字层序遍历"></a>练习:二叉树s字层序遍历</h1><p>基本思想和普通遍历一致，但是s型遍历需要用双端队列，奇数列在尾部添加，偶数列在头部添加<br>这样就可以实现s型遍历<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">            1</span></span><br><span class="line"><span class="comment">           / \</span></span><br><span class="line"><span class="comment">          2   3</span></span><br><span class="line"><span class="comment">         / \  / \</span></span><br><span class="line"><span class="comment">        4  5  6  7</span></span><br><span class="line"><span class="comment">    </span></span><br><span class="line"><span class="comment">    遍历结果：[[1], [3, 2], [4, 5, 6, 7]]</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">zigzagLevelOrder</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    List&lt;List&lt;Integer&gt;&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">if</span>(root == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//链表没有容量限制</span></span><br><span class="line">    LinkedListQueue&lt;TreeNode&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedListQueue</span>&lt;&gt;();</span><br><span class="line">    queue.offer(root);</span><br><span class="line">    <span class="type">int</span> <span class="variable">c1</span> <span class="operator">=</span> <span class="number">1</span>;<span class="comment">//当前节点数</span></span><br><span class="line">    <span class="type">boolean</span> <span class="variable">odd</span> <span class="operator">=</span> <span class="literal">true</span>; <span class="comment">//奇数层</span></span><br><span class="line">    <span class="keyword">while</span>(!queue.isEmpty()) &#123;</span><br><span class="line">        LinkedList&lt;Integer&gt; level = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;(); <span class="comment">//保存每一轮结果</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">c2</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">//下一层节点数</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; c1; i++) &#123;</span><br><span class="line">            <span class="comment">//从头部获取元素</span></span><br><span class="line">            <span class="type">TreeNode</span> <span class="variable">n</span> <span class="operator">=</span> queue.pool();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(odd) &#123;</span><br><span class="line">                <span class="comment">//奇数层在尾部添加</span></span><br><span class="line">                level.offerLast(n.val);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//偶数层在头部添加</span></span><br><span class="line">                level.offerFirst(n.val);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(n.left != <span class="literal">null</span>) &#123;</span><br><span class="line">                queue.offer(n.left);</span><br><span class="line">                c2++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(n.right != <span class="literal">null</span>) &#123;</span><br><span class="line">                queue.offer(n.right);</span><br><span class="line">                c2++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//循环结束变奇数偶数</span></span><br><span class="line">        odd = !odd;</span><br><span class="line">        result.add(level);</span><br><span class="line">        c1 = c2;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    
    <summary type="html">特殊的队列(一)</summary>
    
    
    
    <category term="数据结构与算法" scheme="http://love.sunnyherry.cn/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="队列" scheme="http://love.sunnyherry.cn/tags/%E9%98%9F%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>栈</title>
    <link href="http://love.sunnyherry.cn/_posts/37273.html"/>
    <id>http://love.sunnyherry.cn/_posts/37273.html</id>
    <published>2023-07-25T21:11:20.000Z</published>
    <updated>2023-08-06T14:11:38.837Z</updated>
    
    <content type="html"><![CDATA[<h1 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义<span class='p red'></span></h1><p>在计算机科学中，stack是一种线性的数据结构，<span class='p red'>只能在其一端添加数据和移除数据</span>。习惯来说，这一端称之为<span class='p red'>栈顶</span>，另一端不能操作数据的称之为<span class='p red'>栈底</span>，就像一个装书的容器一样，放从最上面放，拿从最上面拿。</p><h1 id="常见的栈方法接口实现"><a href="#常见的栈方法接口实现" class="headerlink" title="常见的栈方法接口实现"></a>常见的栈方法接口实现</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Stack</span>&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 向栈顶压入元素</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value-待压入值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 压入成功返回true，否则返回false</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">push</span><span class="params">(E value)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 从栈顶弹出元素</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 栈非空返回栈顶元素，栈为空返回null</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    E <span class="title function_">pop</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回栈顶元素，不弹出</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 栈非空返回栈顶元素，栈位空返回null</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    E <span class="title function_">peek</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 判断栈是否为空</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 空返回true，否则返回false</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 判断栈是否已满</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 满返回true，否则返回false</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="单向链表实现栈"><a href="#单向链表实现栈" class="headerlink" title="单向链表实现栈"></a>单向链表实现栈</h1><p>和队列差不多，就是少了一个尾指针，不在尾部拿值<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//单向链表带哨兵实现栈</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedListStack</span>&lt;E&gt; <span class="keyword">implements</span> <span class="title class_">Stack</span>&lt;E&gt; ,Iterable&lt;E&gt;&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> capacity;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line">    <span class="keyword">private</span> Node&lt;E&gt; head = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(<span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LinkedListStack</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.capacity = capacity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;E&gt; &#123;</span><br><span class="line">        E value;</span><br><span class="line">        Node&lt;E&gt; next;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(E value, Node&lt;E&gt; next)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.value = value;</span><br><span class="line">            <span class="built_in">this</span>.next = next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">push</span><span class="params">(E value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isFull()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// head -&gt; 2 -&gt; 1 -&gt; null</span></span><br><span class="line">        head.next = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(value, head.next);</span><br><span class="line">        size++;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Node&lt;E&gt; first = head.next;</span><br><span class="line">        <span class="comment">//移除操作</span></span><br><span class="line">        head.next = first.next;</span><br><span class="line">        size--;</span><br><span class="line">        <span class="keyword">return</span> first.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> head.next.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//return head.next == null;</span></span><br><span class="line">        <span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == capacity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;E&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Iterator</span>&lt;E&gt;() &#123;</span><br><span class="line">            Node&lt;E&gt; p = head.next;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> p != <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> E <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="type">E</span> <span class="variable">value</span> <span class="operator">=</span> p.value;</span><br><span class="line">                p = p.next;</span><br><span class="line">                <span class="keyword">return</span> value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="数组实现栈"><a href="#数组实现栈" class="headerlink" title="数组实现栈"></a>数组实现栈</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//数组实现栈</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayStack</span>&lt;E&gt; <span class="keyword">implements</span> <span class="title class_">Stack</span>&lt;E&gt;, Iterable&lt;E&gt;&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> E[] array;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> top;<span class="comment">// 栈顶指针</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        底          顶</span></span><br><span class="line"><span class="comment">        0   1   2   3</span></span><br><span class="line"><span class="comment">        a   b   c   d</span></span><br><span class="line"><span class="comment">        t(指针)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ArrayStack</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        <span class="comment">//数组初始化</span></span><br><span class="line">        <span class="built_in">this</span>.array = (E[]) <span class="keyword">new</span> <span class="title class_">Object</span>[capacity];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">push</span><span class="params">(E value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isFull()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//先找array[top]的值再自增，一举两得</span></span><br><span class="line">        array[top++] = value;</span><br><span class="line">        <span class="comment">//top++;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//因为在push方法中已经移动了指针，所以要取栈顶值是减一后的值</span></span><br><span class="line">        <span class="comment">//包含了top减一的情况了</span></span><br><span class="line">        <span class="keyword">return</span> array[--top];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//因为在push方法中已经移动了指针，所以要取栈顶值是减一后的值</span></span><br><span class="line">        <span class="keyword">return</span> array[top - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> top == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> top == array.length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;E&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Iterator</span>&lt;E&gt;() &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> top;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> p &gt; <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> E <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> array[--p];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="力扣关于栈的题"><a href="#力扣关于栈的题" class="headerlink" title="力扣关于栈的题"></a>力扣关于栈的题</h1><h2 id="有效的括号-T20"><a href="#有效的括号-T20" class="headerlink" title="有效的括号 T20"></a>有效的括号 T20</h2><p>遍历字符串每位字符比较，出现左括号存入相对应的右括号到栈中，接着出现右括号就进行比对，比对失败就是false<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValid</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        Stack&lt;Character&gt;stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;Character&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">char</span> c: s.toCharArray())&#123;</span><br><span class="line">            <span class="keyword">if</span>(c==<span class="string">&#x27;(&#x27;</span>)stack.push(<span class="string">&#x27;)&#x27;</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(c==<span class="string">&#x27;[&#x27;</span>)stack.push(<span class="string">&#x27;]&#x27;</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(c==<span class="string">&#x27;&#123;&#x27;</span>)stack.push(<span class="string">&#x27;&#125;&#x27;</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(stack.isEmpty()||c!=stack.pop())<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stack.isEmpty();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p><h2 id="逆波兰表达式求值-T150"><a href="#逆波兰表达式求值-T150" class="headerlink" title="逆波兰表达式求值 T150"></a>逆波兰表达式求值 T150</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">evalRPN</span><span class="params">(String[] tokens)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            解题思路：</span></span><br><span class="line"><span class="comment">                -遇到数字压入栈</span></span><br><span class="line"><span class="comment">                -遇到运算符，就从栈中弹出两个数字做运算，将结果压入栈</span></span><br><span class="line"><span class="comment">                -遍历结束，栈中剩下的数字就是结果</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">//里面也实现了栈的方法</span></span><br><span class="line">        LinkedList&lt;Integer&gt; stack = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (String token : tokens) &#123;</span><br><span class="line">            <span class="keyword">switch</span> (token) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;+&quot;</span> : &#123;</span><br><span class="line">                    <span class="type">Integer</span> <span class="variable">b</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">                    <span class="type">Integer</span> <span class="variable">a</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">                    stack.push(a+b);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;-&quot;</span> : &#123;</span><br><span class="line">                    <span class="type">Integer</span> <span class="variable">b</span> <span class="operator">=</span> stack.pop();<span class="comment">//注意先后顺序，先压后出</span></span><br><span class="line">                    <span class="type">Integer</span> <span class="variable">a</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">                    stack.push(a-b);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;*&quot;</span> : &#123;</span><br><span class="line">                    <span class="type">Integer</span> <span class="variable">b</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">                    <span class="type">Integer</span> <span class="variable">a</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">                    stack.push(a*b);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;/&quot;</span> : &#123;</span><br><span class="line">                    <span class="type">Integer</span> <span class="variable">b</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">                    <span class="type">Integer</span> <span class="variable">a</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">                    stack.push(a/b);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">default</span>: &#123;  <span class="comment">//剩下的就是数字</span></span><br><span class="line">                    stack.push(Integer.parseInt(token));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stack.pop();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="双栈实现队列-T232"><a href="#双栈实现队列-T232" class="headerlink" title="双栈实现队列 T232"></a>双栈实现队列 T232</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义两个栈</span></span><br><span class="line">    LinkedList&lt;Integer&gt; s1 = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    LinkedList&lt;Integer&gt; s2 = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="comment">//往队列尾部添加值就是先在一个栈中压入值</span></span><br><span class="line">        s2.push(x);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//从队列头部移除值就是从s2出来在压入s1就行</span></span><br><span class="line">        <span class="keyword">if</span>(s1.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">while</span>(!s2.isEmpty()) &#123;</span><br><span class="line">                s1.push(s2.pop());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> s1.pop();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(s1.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">while</span>(!s2.isEmpty()) &#123;</span><br><span class="line">                s1.push(s2.pop());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> s1.peek();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">empty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> s1.isEmpty() &amp;&amp; s2.isEmpty();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="单队列实现栈-T225"><a href="#单队列实现栈-T225" class="headerlink" title="单队列实现栈 T225"></a>单队列实现栈 T225</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//单队列</span></span><br><span class="line">    Queue&lt;Integer&gt; a;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//计算元素的个数</span></span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="comment">//把新添加的元素前面的元素都移动到它的后面去</span></span><br><span class="line">        a.offer(x);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">            a.offer(a.poll());</span><br><span class="line">        &#125;</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//移除列头元素</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line">        i--;</span><br><span class="line">        <span class="keyword">return</span> a.poll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">top</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a.peek();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">empty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a.isEmpty();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">只有一端的数据操作</summary>
    
    
    
    <category term="数据结构与算法" scheme="http://love.sunnyherry.cn/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="栈" scheme="http://love.sunnyherry.cn/tags/%E6%A0%88/"/>
    
  </entry>
  
  <entry>
    <title>常规队列</title>
    <link href="http://love.sunnyherry.cn/_posts/22394.html"/>
    <id>http://love.sunnyherry.cn/_posts/22394.html</id>
    <published>2023-07-19T21:11:20.000Z</published>
    <updated>2023-08-06T14:11:38.837Z</updated>
    
    <content type="html"><![CDATA[<h1 id="基本定义"><a href="#基本定义" class="headerlink" title="基本定义"></a>基本定义</h1><p>在计算机科学中，queue是以顺序的方式维护的一组数据集合，在一端添加数据，从另一端添加数据。习惯来说，添加的一端为尾，移除的一端为头，就如同生活中的排队买商品。</p><h1 id="环形链表实现队列"><a href="#环形链表实现队列" class="headerlink" title="环形链表实现队列"></a>环形链表实现队列</h1><p>只要根据队列的基本定义和链表的语法，就可以很轻松的写出队列的方法<br>特殊：<br><span class='p red'>队列需要有容量限制的，删除和添加只在头尾，不可在中间插入</span><br>定义队列的接口<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Queue</span>&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 向队列尾插入值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value-待插入值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 插入成功返回true，插入失败返回false</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">offer</span><span class="params">(E value)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 从队列头获取值，并移除</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 如果列表非空返回对头值，否则返回null</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    E <span class="title function_">pool</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 从队列头获取值，不移除</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 如果队列非空返回对头值，否则返回null</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    E <span class="title function_">peek</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 检查队列是否为空</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 空返回true，否则返回false</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 检查队列是否已满</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 满返回true，否则返回false</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>环形链表作为接口的实现类<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedListQueue</span>&lt;E&gt; <span class="keyword">implements</span> <span class="title class_">Queue</span>&lt;E&gt;, Iterable&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//定义节点内部类</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;E&gt; &#123;</span><br><span class="line">        E value;</span><br><span class="line">        Node&lt;E&gt; next;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(E value, Node&lt;E&gt; next)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.value = value;</span><br><span class="line">            <span class="built_in">this</span>.next = next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Node&lt;E&gt; head = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(<span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">    <span class="comment">//环形链表头尾相连</span></span><br><span class="line">    Node&lt;E&gt; tail = head;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size; <span class="comment">//节点数</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">capacity</span> <span class="operator">=</span> Integer.MAX_VALUE;<span class="comment">//容量</span></span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//构造方法共同有的可以抽取出来</span></span><br><span class="line">        tail.next = head;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LinkedListQueue</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.capacity = capacity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//构造方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LinkedListQueue</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//向队列尾部加入值</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offer</span><span class="params">(E value)</span> &#123;</span><br><span class="line">        <span class="comment">//设定队列的容量检查</span></span><br><span class="line">        <span class="keyword">if</span>(isFull()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Node&lt;E&gt; added = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(value, <span class="literal">null</span>);</span><br><span class="line">        <span class="comment">//原来的尾巴指向新节点</span></span><br><span class="line">        tail.next = added;</span><br><span class="line">        <span class="comment">//更新尾巴</span></span><br><span class="line">        tail = added;</span><br><span class="line">        <span class="comment">//节点数量增加</span></span><br><span class="line">        size++;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//队列头获取值并且移除</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">pool</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//队列为空</span></span><br><span class="line">        <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Node&lt;E&gt; first = head.next;</span><br><span class="line">        <span class="comment">//删除</span></span><br><span class="line">        head.next = first.next;</span><br><span class="line">        <span class="comment">//节点数减少</span></span><br><span class="line">        size--;</span><br><span class="line">        <span class="comment">//特殊情况</span></span><br><span class="line">        <span class="keyword">if</span>(first == tail)&#123;</span><br><span class="line">            tail = head;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> first.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//队列头获取值不移除</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//队列为空</span></span><br><span class="line">        <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//非空就找head.next的值</span></span><br><span class="line">        <span class="keyword">return</span> head.next.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//当头结点和尾节点的地址相等，即都指向哨兵节点</span></span><br><span class="line">        <span class="keyword">return</span> head == tail;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == capacity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;E&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Iterator</span>&lt;E&gt;() &#123;</span><br><span class="line">            Node&lt;E&gt; p = head.next;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="comment">//判断return的条件并且移动指针</span></span><br><span class="line">                <span class="comment">//环形链表遍历结束条件是尾回到头</span></span><br><span class="line">                <span class="keyword">return</span> p != head;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> E <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="type">E</span> <span class="variable">value</span> <span class="operator">=</span> p.value;</span><br><span class="line">                p = p.next;</span><br><span class="line">                <span class="keyword">return</span> value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="环形数组实现队列"><a href="#环形数组实现队列" class="headerlink" title="环形数组实现队列"></a>环形数组实现队列<span class='p red'></span></h1><p>好处<br>1、对比普通数组，起点和终点更为自由，不用考虑数据移动<br>2、“环”意味着不存在【越界】问题<br>3、数组性能更佳<br>4、环形数组比较适合实现有界队列，RingBuffer等</p><p>下标计算的方法：<br>例如，数组长度是5，当前位置是3，向前走2步，此时下标为(3 + 2)%5 = 0<br>即：<span class='p red'>(cur + step)%length</span><br>·cur当前指针位置<br>·step前进步数<br>·length数组长度</p><h2 id="方式一-留位置"><a href="#方式一-留位置" class="headerlink" title="方式一(留位置)"></a>方式一(留位置)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayQueue1</span>&lt;E&gt; <span class="keyword">implements</span> <span class="title class_">Queue</span>&lt;E&gt;, Iterable&lt;E&gt;&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> E[] array;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">head</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">tail</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;all&quot;)</span><span class="comment">//抑制警告产生</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ArrayQueue1</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        array = (E[])<span class="keyword">new</span> <span class="title class_">Object</span>[capacity + <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//向队列尾部加入值</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offer</span><span class="params">(E value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//向尾部添加值</span></span><br><span class="line">        array[tail] = value;</span><br><span class="line">        <span class="comment">//尾指针向前一步</span></span><br><span class="line">        <span class="comment">//这样可以防止索引出现异常，比如数组长度为5但是索引只有0~4</span></span><br><span class="line">        tail = (tail + <span class="number">1</span>) % array.length;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//队列头获取值并且移除</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">pool</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//得到当前头指针的值</span></span><br><span class="line">        <span class="type">E</span> <span class="variable">value</span> <span class="operator">=</span> array[head];</span><br><span class="line">        <span class="comment">//删除操作把头指针移动到下一个</span></span><br><span class="line">        head = (head + <span class="number">1</span>) % array.length;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//队列头获取值不移除</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//得到当前头指针的值</span></span><br><span class="line">        <span class="keyword">return</span> array[head];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> head == tail;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//当尾指针走一步就到了头指针的索引值那么就是满的</span></span><br><span class="line">        <span class="keyword">return</span> (tail+<span class="number">1</span>) % array.length == head;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;E&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Iterator</span>&lt;E&gt;() &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> head;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> p != tail;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> E <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="type">E</span> <span class="variable">value</span> <span class="operator">=</span> array[p];</span><br><span class="line">                <span class="comment">//p向后移</span></span><br><span class="line">                p = (p+<span class="number">1</span>) % array.length;</span><br><span class="line">                <span class="keyword">return</span> value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="方式二-size变量控制"><a href="#方式二-size变量控制" class="headerlink" title="方式二(size变量控制)"></a>方式二(size变量控制)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> E[] array;</span><br><span class="line">   <span class="keyword">private</span> <span class="type">int</span> <span class="variable">head</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">private</span> <span class="type">int</span> <span class="variable">tail</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">   <span class="comment">//引入新变量</span></span><br><span class="line">   <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@SuppressWarnings(&quot;all&quot;)</span><span class="comment">//抑制警告产生</span></span><br><span class="line">   <span class="keyword">public</span> <span class="title function_">ArrayQueue2</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">       array = (E[])<span class="keyword">new</span> <span class="title class_">Object</span>[capacity];</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//向队列尾部加入值</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offer</span><span class="params">(E value)</span> &#123;</span><br><span class="line">       <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//向尾部添加值</span></span><br><span class="line">       array[tail] = value;</span><br><span class="line">       <span class="comment">//尾指针向前一步</span></span><br><span class="line">       <span class="comment">//这样可以防止索引出现异常，比如数组长度为5但是索引只有0~4</span></span><br><span class="line">       tail = (tail + <span class="number">1</span>) % array.length;</span><br><span class="line">       size++;</span><br><span class="line">       <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//队列头获取值并且移除</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> E <span class="title function_">pool</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//得到当前头指针的值</span></span><br><span class="line">       <span class="type">E</span> <span class="variable">value</span> <span class="operator">=</span> array[head];</span><br><span class="line">       <span class="comment">//删除操作把头指针移动到下一个</span></span><br><span class="line">       head = (head + <span class="number">1</span>) % array.length;</span><br><span class="line">       size--;</span><br><span class="line">       <span class="keyword">return</span> value;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//队列头获取值不移除</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> E <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//得到当前头指针的值</span></span><br><span class="line">       <span class="keyword">return</span> array[head];</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//return head == tail;</span></span><br><span class="line">       <span class="comment">//用size来判断为不为空</span></span><br><span class="line">       <span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="comment">//当尾指针走一步就到了头指针的索引值那么就是满的</span></span><br><span class="line">       <span class="comment">//return (tail+1) % array.length == head;</span></span><br><span class="line">       <span class="comment">//用size判断是否为满</span></span><br><span class="line">       <span class="keyword">return</span> size == array.length;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> Iterator&lt;E&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Iterator</span>&lt;E&gt;() &#123;</span><br><span class="line">           <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> head;</span><br><span class="line">           <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">               <span class="keyword">return</span> count &lt; size;</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="keyword">public</span> E <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">               <span class="type">E</span> <span class="variable">value</span> <span class="operator">=</span> array[p];</span><br><span class="line">               <span class="comment">//p向后移</span></span><br><span class="line">               p = (p+<span class="number">1</span>) % array.length;</span><br><span class="line">               count++;</span><br><span class="line">               <span class="keyword">return</span> value;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h2 id="方法三-头尾指针移动"><a href="#方法三-头尾指针移动" class="headerlink" title="方法三(头尾指针移动)"></a>方法三(头尾指针移动)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> E[] array;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> head;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> tail;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;all&quot;)</span><span class="comment">//抑制警告产生</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ArrayQueue3</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        <span class="comment">//传过来的容量不是2^n两种办法</span></span><br><span class="line">        <span class="comment">//1、抛异常</span></span><br><span class="line">        <span class="comment">/*if ((capacity &amp; capacity - 1) != 0) &#123;</span></span><br><span class="line"><span class="comment">            throw new IllegalArgumentException(&quot;capactiy 必须是2的幂&quot;);</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line">        <span class="comment">//2、帮忙改成2^n   13 -&gt; 16  22 -&gt; 32</span></span><br><span class="line">        capacity -= <span class="number">1</span>;</span><br><span class="line">        capacity |=capacity&gt;&gt;<span class="number">1</span>;</span><br><span class="line">        capacity |=capacity&gt;&gt;<span class="number">2</span>;</span><br><span class="line">        capacity |=capacity&gt;&gt;<span class="number">8</span>;</span><br><span class="line">        capacity |=capacity&gt;&gt;<span class="number">16</span>;</span><br><span class="line">        capacity += <span class="number">1</span>;</span><br><span class="line">        array = (E[])<span class="keyword">new</span> <span class="title class_">Object</span>[capacity];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        head =0</span></span><br><span class="line"><span class="comment">        tail = 3 % 3 = 0</span></span><br><span class="line"><span class="comment">        capacity=3</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        0 1 2</span></span><br><span class="line"><span class="comment">        d b c</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        求模运算：</span></span><br><span class="line"><span class="comment">            - 如果除数是 2 的前n次方</span></span><br><span class="line"><span class="comment">            - 那么被除数的后n位即为余数(模)</span></span><br><span class="line"><span class="comment">            - 求被除数的后n位方法，与2^n-1 按位与</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offer</span><span class="params">(E value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//tail不直接做索引</span></span><br><span class="line">        <span class="comment">//array[(int) (Integer.toUnsignedLong(tail) % array.length)] = value;</span></span><br><span class="line">        <span class="comment">//如果保证了数组长度是2^n，那么就可以用数组长度 - 1 来按位与运算</span></span><br><span class="line">        array[tail &amp; (array.length - <span class="number">1</span>)] = value;</span><br><span class="line">        <span class="comment">//添加完指针移动</span></span><br><span class="line">        tail++;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">pool</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">E</span> <span class="variable">value</span> <span class="operator">=</span> array[head &amp; (array.length - <span class="number">1</span>)];</span><br><span class="line">        head++;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> array[head &amp; (array.length - <span class="number">1</span>)];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> head == tail;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//等于数组长度就表示满了</span></span><br><span class="line">        <span class="keyword">return</span> tail - head == array.length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;E&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Iterator</span>&lt;E&gt;() &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> head;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> p != tail;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> E <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="type">E</span> <span class="variable">value</span> <span class="operator">=</span> array[p &amp; (array.length - <span class="number">1</span>)];</span><br><span class="line">                p++;</span><br><span class="line">                <span class="keyword">return</span> value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">新的篇章</summary>
    
    
    
    <category term="数据结构与算法" scheme="http://love.sunnyherry.cn/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="队列" scheme="http://love.sunnyherry.cn/tags/%E9%98%9F%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>链表习题</title>
    <link href="http://love.sunnyherry.cn/_posts/15687.html"/>
    <id>http://love.sunnyherry.cn/_posts/15687.html</id>
    <published>2023-07-13T21:11:20.000Z</published>
    <updated>2023-08-06T14:11:38.837Z</updated>
    
    <content type="html"><![CDATA[<h1 id="反转单向链表-206题"><a href="#反转单向链表-206题" class="headerlink" title="反转单向链表(206题)"></a>反转单向链表(206题)</h1><h2 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h2><p>构建一个新链表，从<span class='p red'>旧链表</span>依次拿到每个节点，创建新节点添加至<span class='p red'>新链表</span>头部，完成后新链表即是倒序的。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方法一</span></span><br><span class="line">    <span class="keyword">public</span> ListNode <span class="title function_">reverseList1</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">res</span> <span class="operator">=</span> <span class="literal">null</span>;<span class="comment">//自己构造的新链表</span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">p</span> <span class="operator">=</span> head;<span class="comment">//旧链表的头结点</span></span><br><span class="line">        <span class="keyword">while</span>(p != <span class="literal">null</span>)&#123;</span><br><span class="line">            res = <span class="keyword">new</span> <span class="title class_">ListNode</span>(p.val, res);</span><br><span class="line">            p= p.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><br>评价：简单直白，<span class='p red'>但是得创建节点对象</span></p><h2 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h2><p>与方法一类似，构造一个新链表，从<span class='p red'>旧链表头部</span>移除节点，添加到<span class='p red'>新链表头部</span>，完成后新链表即时倒序的，区别在于原题目未提供节点外层的容器类，这里需要手动提供一个，另外一个区别是并不需要构造新节点。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方法二</span></span><br><span class="line">    <span class="keyword">public</span> ListNode <span class="title function_">reverseList2</span><span class="params">(ListNode head)</span>&#123;</span><br><span class="line">        <span class="type">List</span> <span class="variable">list1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">List</span>(head);</span><br><span class="line">        <span class="type">List</span> <span class="variable">list2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">List</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="type">ListNode</span> <span class="variable">first</span> <span class="operator">=</span> list1.removeFirst();</span><br><span class="line">            <span class="keyword">if</span>(first == <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            list2.addFirst(first);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list2.head;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">List</span>&#123;</span><br><span class="line">        ListNode head;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">List</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.head = head;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addFirst</span><span class="params">(ListNode first)</span>&#123;</span><br><span class="line">            first.next = head;</span><br><span class="line">            head = first;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> ListNode <span class="title function_">removeFirst</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="type">ListNode</span> <span class="variable">first</span> <span class="operator">=</span> head;</span><br><span class="line">            <span class="keyword">if</span>(first != <span class="literal">null</span>)&#123;</span><br><span class="line">                head = first.next;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> first;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><br>评价：更加面向对象，如果实际写代码非刷题，更多会那么做。</p><h2 id="方法三-递归"><a href="#方法三-递归" class="headerlink" title="方法三(递归)"></a>方法三(递归)</h2><p>递归，利用归时倒序的特性，完成让5-&gt;4,4-&gt;3,…<br>写一个递归方法，返回值用来拿到最后一个节点<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方法三-递归</span></span><br><span class="line">    <span class="keyword">public</span> ListNode <span class="title function_">reverseList3</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(head == <span class="literal">null</span> || head.next == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> head; <span class="comment">//最后节点</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">res</span> <span class="operator">=</span> reverseList3(head.next);</span><br><span class="line">        head.next.next = head;<span class="comment">//实现5-&gt;4</span></span><br><span class="line">        head.next = <span class="literal">null</span>;<span class="comment">// 防止死链情况:5-&gt;4 4-&gt;5</span></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><br>评价：单向链表没有prev指针，但是利用递归的特性[记住了]链表倒过来的顺序</p><h2 id="方法四"><a href="#方法四" class="headerlink" title="方法四"></a>方法四<span class='p red'></span></h2><p>从链表每次拿到第二个节点，将其从链表断开，插入头部，直到它为null结束<br>1、设置指针head(旧头)、n1(新头)、o2(旧老二)，分别指向<span class='p red'>第一、第一、第二</span>节点。<br>2、将o2节点从链表中断开，即o1节点指向第三节点<br>3、o2节点链入链表头部<br>4、n1指向o2<br>5、o2指向o1的下一个节点<br>6、重复以上2~5步，直到o2指向null<br>7应该考虑边界条件，即链表中不满足两个元素时，无需走以上逻辑。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方法四</span></span><br><span class="line">    <span class="keyword">public</span> ListNode <span class="title function_">reverseList4</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">        <span class="comment">//边界情况：空链表   特殊情况：只有一个元素</span></span><br><span class="line">        <span class="keyword">if</span>(head == <span class="literal">null</span> || head.next == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> head;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//表示旧老二的起始指针</span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">o2</span> <span class="operator">=</span> head.next;</span><br><span class="line">        <span class="comment">//新头结点</span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">n1</span> <span class="operator">=</span> head;</span><br><span class="line">        <span class="keyword">while</span>(o2 != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">//把o2断开</span></span><br><span class="line">            head.next = o2.next;</span><br><span class="line">            <span class="comment">//把o2指向新头</span></span><br><span class="line">            o2.next = n1;</span><br><span class="line">            <span class="comment">//把o2当作新头</span></span><br><span class="line">            n1 = o2;</span><br><span class="line">            <span class="comment">//o2回到o1的下一个节点</span></span><br><span class="line">            o2 = head.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> n1;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>评价：最难但是最高效的方法，死了好多脑细胞啊/(ㄒoㄒ)/~~</p><h2 id="方法五"><a href="#方法五" class="headerlink" title="方法五"></a>方法五</h2><p>把链表分成两部分，思路就是不断从链表2的头，往链表1的头搬移<br>1、n1指向null，代表新链表一开始没有元素，o1指向原链表的首节点<br>2、开始循环，o2指向原链表次节点<br>3、搬移<br>4、指针复位<br>5、重复2~4步<br>6、当o1 = null时退出循环<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方法五</span></span><br><span class="line">    <span class="keyword">public</span> ListNode <span class="title function_">reverseList5</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">        <span class="comment">//边界情况：空链表   特殊情况：只有一个元素</span></span><br><span class="line">        <span class="keyword">if</span>(head == <span class="literal">null</span> || head.next == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> head;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//造一个新头节点</span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">while</span>(head.next != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="comment">//创建旧老二节点</span></span><br><span class="line">            <span class="type">ListNode</span> <span class="variable">o2</span> <span class="operator">=</span> head.next;</span><br><span class="line">            <span class="comment">//将旧头的next指向新头</span></span><br><span class="line">            head.next = n1;</span><br><span class="line">            <span class="comment">//旧头代替新头成为新头节点</span></span><br><span class="line">            n1 = head;</span><br><span class="line">            <span class="comment">//把原始旧头又放回到下一个循环的第一个位置，也就是此循环的o2位置</span></span><br><span class="line">            head = o2;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> n1;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><br>总结：稀里糊涂的，感觉好难好难啊，为什么看一道题不会一道题…</p><h1 id="根据值删除节点-203题"><a href="#根据值删除节点-203题" class="headerlink" title="根据值删除节点(203题)"></a>根据值删除节点(203题)</h1><h2 id="普通方法"><a href="#普通方法" class="headerlink" title="普通方法"></a>普通方法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">removeElements</span><span class="params">(ListNode head, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">        <span class="comment">//添加哨兵节点</span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(-<span class="number">1</span>, head);</span><br><span class="line">        <span class="comment">//定义两个指针,刚好加上哨兵两个指针就可以一直走正常逻辑</span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">p1</span> <span class="operator">=</span> s;</span><br><span class="line">        ListNode p2;</span><br><span class="line">        <span class="keyword">while</span>((p2 = p1.next) != <span class="literal">null</span>)&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(p2.val == val) &#123;</span><br><span class="line">                <span class="comment">//p2的值等于目标值那么做删除操作，p1.next指向p2.next的指针</span></span><br><span class="line">                p1.next = p2.next;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">//没有相对应的值那就向下移动p1和p2的指针</span></span><br><span class="line">                p1 = p1.next;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//返回哨兵.next的新头结点</span></span><br><span class="line">        <span class="keyword">return</span> s.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h2><span class='p red'>我真的要被递归搞烦死了，真的烦死了，气死我了！！！(╯▔皿▔)╯</span><p>思路，递归函数负责返回：从当前节点(我)开始，完成删除的链表<br>1、若我与v相等，应当返回下一个节点递归结果<br>2、若我与v不等，应该返回我，但我的next应该更新(让我能带上后续删过的节点)<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">removeElements</span><span class="params">(ListNode head, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(head == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(head.val == val) &#123;</span><br><span class="line">        <span class="keyword">return</span> removeElements(head.next, val);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        head.next = removeElements(head.next, val);</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="删除链表的倒数第N个节点-19题"><a href="#删除链表的倒数第N个节点-19题" class="headerlink" title="删除链表的倒数第N个节点(19题)"></a>删除链表的倒数第N个节点(19题)</h1><h2 id="链表求解"><a href="#链表求解" class="headerlink" title="链表求解"></a>链表求解</h2><p>没得说，现在链表都是简单方法了吗？我不敢苟同，这样显得我很笨哈哈哈<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">removeNthFromEnd</span><span class="params">(ListNode head, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="comment">//加一个哨兵节点就可以删除第一个节点，第一个节点就有上位</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(-<span class="number">1</span>, head);</span><br><span class="line">    recursion(s, n);</span><br><span class="line">    <span class="keyword">return</span> s.next;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//自己写一个方法，返回值返回整数</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">recursion</span><span class="params">(ListNode p, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(p == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//下一个节点的倒数位置</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">nth</span> <span class="operator">=</span> recursion(p.next, n);</span><br><span class="line">    <span class="keyword">if</span>(nth == n) &#123;</span><br><span class="line">        <span class="comment">//p=3  p.next=4  p.next.next=5</span></span><br><span class="line">        p.next = p.next.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//为顶层方法的返回值</span></span><br><span class="line">    <span class="keyword">return</span> nth + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="快慢指针法-双指针"><a href="#快慢指针法-双指针" class="headerlink" title="快慢指针法(双指针)"></a>快慢指针法(双指针)</h2><p>写一下思路，要不然下一次看都不知道自己在干什么<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="number">2</span>   p1 p2为设置的指针</span><br><span class="line">p1</span><br><span class="line">p2</span><br><span class="line">s -&gt; <span class="number">1</span> -&gt; <span class="number">2</span> -&gt; <span class="number">3</span> -&gt; <span class="number">4</span> -&gt; <span class="number">5</span> -&gt; <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">        p2</span><br><span class="line">s -&gt; <span class="number">1</span> -&gt; <span class="number">2</span> -&gt; <span class="number">3</span> -&gt; <span class="number">4</span> -&gt; <span class="number">5</span> -&gt; <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">            p2                        先让p2走三步</span><br><span class="line">s -&gt; <span class="number">1</span> -&gt; <span class="number">2</span> -&gt; <span class="number">3</span> -&gt; <span class="number">4</span> -&gt; <span class="number">5</span> -&gt; <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">p1                  p2                   开始同时移动</span><br><span class="line">s -&gt; <span class="number">1</span> -&gt; <span class="number">2</span> -&gt; <span class="number">3</span> -&gt; <span class="number">4</span> -&gt; <span class="number">5</span> -&gt; <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">                      p1                     p2    让p2移动到<span class="literal">null</span>为止，刚刚好p1指针就可以做倒数第二的删除操作了，太牛了  </span><br><span class="line">s -&gt; <span class="number">1</span> -&gt; <span class="number">2</span> -&gt; <span class="number">3</span> -&gt; <span class="number">4</span> -&gt; <span class="number">5</span> -&gt; <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">removeNthFromEnd</span><span class="params">(ListNode head, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="comment">//哨兵节点</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(-<span class="number">1</span>, head);</span><br><span class="line">    <span class="comment">//两个新指针</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p1</span> <span class="operator">=</span> s;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p2</span> <span class="operator">=</span> s;</span><br><span class="line">    <span class="comment">//实现p2先走n + 1步</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n + <span class="number">1</span>; i++) &#123;</span><br><span class="line">        p2 = p2.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(p2 != <span class="literal">null</span>) &#123;</span><br><span class="line">        p1 = p1.next;</span><br><span class="line">        p2 = p2.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//循环结束之后p1刚好可以执行删除操作</span></span><br><span class="line">    p1.next = p1.next.next;</span><br><span class="line">    <span class="keyword">return</span> s.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="删除有序链表的重复节点-83题"><a href="#删除有序链表的重复节点-83题" class="headerlink" title="删除有序链表的重复节点(83题)"></a>删除有序链表的重复节点(83题)</h1><h2 id="双指针"><a href="#双指针" class="headerlink" title="双指针"></a>双指针</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">deleteDuplicates</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="comment">//创建两个指针</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p1</span> <span class="operator">=</span> head;</span><br><span class="line">    ListNode p2;</span><br><span class="line">    <span class="comment">//排除链表为空和链表只有一个元素的情况</span></span><br><span class="line">    <span class="keyword">if</span>(head == <span class="literal">null</span> || head.next == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>((p2 = p1.next) != <span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="comment">//如果p1和p2的值相同那么就执行删除</span></span><br><span class="line">        <span class="keyword">if</span>(p1.val == p2.val) &#123;</span><br><span class="line">            p1.next = p2.next;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//不相等那么就一起移动指针</span></span><br><span class="line">            p1 = p1.next;</span><br><span class="line">            <span class="comment">//这一步写到循环判断条件去了，优雅</span></span><br><span class="line">            <span class="comment">//p2 = p2.next;</span></span><br><span class="line">        &#125;    </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="递归-1"><a href="#递归-1" class="headerlink" title="递归"></a>递归</h2><p>我最爱的递归又来了(微笑🙂)<br>思路<br>递归负责返回：从当前节点(我)开始，完成去重的链表<br>1、若我与next重复，返回next<br>2、若我与next不重复，返回我，但next需要更新</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">deleteDuplicates</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="comment">//递归结束条件</span></span><br><span class="line">    <span class="keyword">if</span>(head == <span class="literal">null</span> || head.next == <span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(head.val == head.next.val) &#123;</span><br><span class="line">        <span class="keyword">return</span> deleteDuplicates(head.next);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        head.next = deleteDuplicates(head.next);</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="删除排序链表的重复元素-82题"><a href="#删除排序链表的重复元素-82题" class="headerlink" title="删除排序链表的重复元素(82题)"></a>删除排序链表的重复元素(82题)</h1><p>注意和上一题区别的是重复的元素一个都不留</p><h2 id="递归-2"><a href="#递归-2" class="headerlink" title="递归"></a>递归</h2><p>我最爱的递归又来了(微笑)<br>思路：<br>递归函数负责返回：从当前节点(我)开始，完成去重的链表<br>1、若我与next重复，一直找到下一个不重复的节点，已它的返回值为准<br>2、若我与next不重复，返回我,重视更新next<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">deleteDuplicates</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(head == <span class="literal">null</span> || head.next == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(head.val == head.next.val) &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">x</span> <span class="operator">=</span> head.next.next;</span><br><span class="line">        <span class="keyword">while</span>(x != <span class="literal">null</span> &amp;&amp; x.val == head.val) &#123;</span><br><span class="line">            <span class="comment">//一直向后找找到最后一个相同的元素位置</span></span><br><span class="line">            x = x.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//退出循环就意味着这个x对应的值和head的值不一样</span></span><br><span class="line">        <span class="comment">//此时递归从x开始，把重复都丢出去</span></span><br><span class="line">        <span class="keyword">return</span> deleteDuplicates(x);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//不重复更新next</span></span><br><span class="line">        head.next = deleteDuplicates(head.next);</span><br><span class="line">        <span class="comment">//不重复要把自己给带上，返回自己</span></span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="带哨兵三指针"><a href="#带哨兵三指针" class="headerlink" title="带哨兵三指针"></a>带哨兵三指针</h2><p>s：哨兵<br>p1：要删除的前一个节点指针<br>p2：重复的第一个节点<br>p3：移动到不重复的第一个节点</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">p1 p2 p3</span></span><br><span class="line"><span class="comment">s, 1, 1, 1, 2, 3, null</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">p1 p2    p3             p3移动直到遇到与p2不符合的元素</span></span><br><span class="line"><span class="comment">s, 1, 1, 1, 2, 3, null</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">p1 p2       p3          执行删除操作</span></span><br><span class="line"><span class="comment">s, 1, 1, 1, 2, 3, null</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">p1 p3                   </span></span><br><span class="line"><span class="comment">s, 2, 3, null</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">p1 p2 p3                重新定义指针</span></span><br><span class="line"><span class="comment">s, 2, 3, null</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">   p1 p2  p3            整体向右移动指针</span></span><br><span class="line"><span class="comment">s, 2, 3, null</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">deleteDuplicates</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(head == <span class="literal">null</span> || head.next == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    &#125;</span><br><span class="line">        <span class="comment">//哨兵</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(-<span class="number">1</span>, head);</span><br><span class="line">    <span class="comment">//定义三指针</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p1</span> <span class="operator">=</span> s;</span><br><span class="line">    ListNode p2, p3;</span><br><span class="line">    <span class="comment">//循环判断p3是否移动到了不相同元素</span></span><br><span class="line">    <span class="keyword">while</span>((p2 = p1.next) != <span class="literal">null</span> &amp;&amp; (p3 = p2.next) != <span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(p2.val == p3.val) &#123;</span><br><span class="line">            <span class="keyword">while</span>((p3=p3.next) != <span class="literal">null</span> &amp;&amp; p3.val == p2.val) &#123;</span><br><span class="line">                <span class="comment">//已经在循环判断写了   </span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//循环完p3就找到了不重复的元素</span></span><br><span class="line">            p1.next = p3;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//没找到重复的元素</span></span><br><span class="line">            <span class="comment">//三个指针一起向后移动</span></span><br><span class="line">            p1 = p1.next;</span><br><span class="line">            <span class="comment">//剩下的这两个在循环一开始就有了不用写</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="合并有序链表-21题"><a href="#合并有序链表-21题" class="headerlink" title="合并有序链表(21题)"></a>合并有序链表(21题)</h1><h2 id="方法一-大小比较链入法"><a href="#方法一-大小比较链入法" class="headerlink" title="方法一(大小比较链入法)"></a>方法一(大小比较链入法)</h2><ul><li>谁小，把谁链给新的链表p，p和小的都向后平移一位</li><li>当p1, p2有一个为null，退出循环，把不为null的链给p<br>自己写出来了，开心哈哈哈</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">mergeTwoLists</span><span class="params">(ListNode l1, ListNode l2)</span> &#123;</span><br><span class="line">        <span class="comment">//创建新的链表</span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(-<span class="number">1</span>, <span class="literal">null</span>);</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">p</span> <span class="operator">=</span> s;</span><br><span class="line">        <span class="comment">//设置两个指针对l1,l2操作</span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">p1</span> <span class="operator">=</span> l1;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">p2</span> <span class="operator">=</span> l2;</span><br><span class="line">        <span class="comment">//只要有一个链表到了null就退出循环</span></span><br><span class="line">        <span class="keyword">while</span>(p1 != <span class="literal">null</span> &amp;&amp; p2 != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(p1.val &lt;= p2.val) &#123;</span><br><span class="line">                <span class="comment">//p1.val小那么就把小的链入新链表</span></span><br><span class="line">                p.next = p1;</span><br><span class="line">                <span class="comment">//小的和新链表的指针都向后平移</span></span><br><span class="line">                p1 = p1.next;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//p2.val小</span></span><br><span class="line">                p.next = p2;</span><br><span class="line">                p2 = p2.next;</span><br><span class="line">            &#125;</span><br><span class="line">            p = p.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//循环结束后的情况是有一个链表已经是null了，把不是null的链入新链表</span></span><br><span class="line">        <span class="keyword">if</span>(p1 == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="comment">//把p2链入</span></span><br><span class="line">            p.next = p2;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(p2 == <span class="literal">null</span>) &#123;</span><br><span class="line">            p.next = p1;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> s.next;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="递归-3"><a href="#递归-3" class="headerlink" title="递归"></a>递归</h2><p>我最爱的递归又来了(微笑)<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">mergeTwoLists</span><span class="params">(ListNode p1, ListNode p2)</span> &#123;</span><br><span class="line">    <span class="comment">//递归终止条件</span></span><br><span class="line">    <span class="keyword">if</span>(p2 == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">//p2短后面链入p1</span></span><br><span class="line">        <span class="keyword">return</span> p1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(p1 == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">//p1短后面链入p2</span></span><br><span class="line">        <span class="keyword">return</span> p2;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(p1.val &lt; p2.val) &#123;</span><br><span class="line">        <span class="comment">//因为是p1小所以下一次递归轮到p1.next了</span></span><br><span class="line">        p1.next = mergeTwoLists(p1.next, p2);</span><br><span class="line">        <span class="keyword">return</span> p1;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        p2.next = mergeTwoLists(p1, p2.next);</span><br><span class="line">        <span class="keyword">return</span> p2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="合并K个升序链表-23题"><a href="#合并K个升序链表-23题" class="headerlink" title="合并K个升序链表(23题)"></a>合并K个升序链表(23题)</h1><h2 id="多路递归"><a href="#多路递归" class="headerlink" title="多路递归"></a>多路递归</h2><p>听老师讲吧，我真的好笨/(ㄒoㄒ)/~~<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">mergeKLists</span><span class="params">(ListNode[] lists)</span> &#123;</span><br><span class="line">    <span class="comment">//空数组返回空链表</span></span><br><span class="line">    <span class="keyword">if</span>(lists.length == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> split(lists, <span class="number">0</span>, lists.length - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//返回合并后的链表，ij分别表示左右边界</span></span><br><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">split</span><span class="params">(ListNode[] lists, <span class="type">int</span> i, <span class="type">int</span> j)</span>&#123;</span><br><span class="line">    <span class="comment">//结束递归条件:数组内只有一个链表了</span></span><br><span class="line">    <span class="keyword">if</span>(i == j) &#123;</span><br><span class="line">        <span class="keyword">return</span> list[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//数组不断二分，形成一个树的形状就可以利用上题的两链表合并，然后多路递归实现K个链表合并</span></span><br><span class="line">    <span class="comment">//定义中间值</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span>(i+j) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//第一分支,返回树左侧的链表</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">left</span> <span class="operator">=</span> split(lists, i, m);</span><br><span class="line">    <span class="comment">//第二分支,返回树右侧的链表</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">right</span> <span class="operator">=</span> split(lists, m+<span class="number">1</span>, j);</span><br><span class="line">    <span class="comment">//点睛之笔：直接调用合并两个升序链表的方法</span></span><br><span class="line">    <span class="keyword">return</span> mergeTwoLists(left, right);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">mergeTwoLists</span><span class="params">(ListNode l1, ListNode l2)</span> &#123;</span><br><span class="line">    <span class="comment">//创建新的链表</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(-<span class="number">1</span>, <span class="literal">null</span>);</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p</span> <span class="operator">=</span> s;</span><br><span class="line">    <span class="comment">//设置两个指针对l1,l2操作</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p1</span> <span class="operator">=</span> l1;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p2</span> <span class="operator">=</span> l2;</span><br><span class="line">    <span class="comment">//只要有一个链表到了null就退出循环</span></span><br><span class="line">    <span class="keyword">while</span>(p1 != <span class="literal">null</span> &amp;&amp; p2 != <span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(p1.val &lt;= p2.val) &#123;</span><br><span class="line">            <span class="comment">//p1.val小那么就把小的链入新链表</span></span><br><span class="line">            p.next = p1;</span><br><span class="line">            <span class="comment">//小的和新链表的指针都向后平移</span></span><br><span class="line">            p1 = p1.next;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//p2.val小</span></span><br><span class="line">            p.next = p2;</span><br><span class="line">            p2 = p2.next;</span><br><span class="line">        &#125;</span><br><span class="line">        p = p.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//循环结束后的情况是有一个链表已经是null了，把不是null的链入新链表</span></span><br><span class="line">    <span class="keyword">if</span>(p1 == <span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="comment">//把p2链入</span></span><br><span class="line">        p.next = p2;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(p2 == <span class="literal">null</span>) &#123;</span><br><span class="line">        p.next = p1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>本题的思路是典型的分而治之问题(分，治，合)<br><span class='p red'>分：一个问题在内部被切分成的多个子问题，每个子规模比原来减少了k倍(此题是减少了一半)</span><br><span class='p red'>治：解决问题，要根据分来解决问题</span><br><span class='p red'>合：每个子问题解决完之后就合并成原来的问题</span></p><h1 id="找链表的中间节点-876题"><a href="#找链表的中间节点-876题" class="headerlink" title="找链表的中间节点(876题)"></a>找链表的中间节点(876题)</h1><h2 id="快慢指针"><a href="#快慢指针" class="headerlink" title="快慢指针"></a>快慢指针</h2><p>顶级思路：<br>一个指针p1走一步，一个指针p2走两步<br>走的快的分两种情况<br>1、它的p2.next到null了，那么此时p1所在位置就是中间节点位置<br>2、p2走到null了，那么此时p1所在位置就是中间节点位置</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">middleNode</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p1</span> <span class="operator">=</span> head;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p2</span> <span class="operator">=</span> head;</span><br><span class="line">    <span class="keyword">while</span>(p2 != <span class="literal">null</span> &amp;&amp; p2.next != <span class="literal">null</span>) &#123;<span class="comment">//顺序不能颠倒，保留运算符，前面的已经不成立就不会执行后面的</span></span><br><span class="line">        p1 = p1.next;</span><br><span class="line">        <span class="comment">//走两步</span></span><br><span class="line">        p2 = p2.next;</span><br><span class="line">        p2 = p2.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> p1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="回文链表-234题"><a href="#回文链表-234题" class="headerlink" title="回文链表(234题)"></a>回文链表(234题)</h1><h2 id="方法一-1"><a href="#方法一-1" class="headerlink" title="方法一"></a>方法一</h2><p>步骤1、找中间点<br>步骤2、中间节点后半段链表反转<br>步骤3、反转后链表与原链表逐一比对</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isPalindrome</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="comment">//得到中间节点</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">middle</span> <span class="operator">=</span> mideele(head);</span><br><span class="line">    <span class="comment">//后半段反转链表</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">reverse</span> <span class="operator">=</span> reverse(middle);</span><br><span class="line">    <span class="comment">//前后端链表比较是否相同</span></span><br><span class="line">    <span class="keyword">while</span>(reverse != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">//只要有一个值不等那么就返回false</span></span><br><span class="line">        <span class="keyword">if</span>(reverse.val != head.val) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//一直向后平移比较</span></span><br><span class="line">        reverse = reverse.next;</span><br><span class="line">        head = head.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//循环结束肯定是true了</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//返回中间值节点方法</span></span><br><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">middle</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p1</span> <span class="operator">=</span> head;</span><br><span class="line">    <span class="comment">//快指针</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p2</span> <span class="operator">=</span> head;</span><br><span class="line">    <span class="keyword">while</span>(p2 != <span class="literal">null</span> &amp;&amp; p2.next != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">//p1走一步</span></span><br><span class="line">        p1 = p1.next;</span><br><span class="line">        <span class="comment">//p2走两步</span></span><br><span class="line">        p2 = p2.next;</span><br><span class="line">        p2 = p2.head;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> p1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//反转链表方法</span></span><br><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">reverse</span><span class="params">(ListNode o1)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">while</span>(o1 != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">//记录原来的老二位置</span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">o2</span> <span class="operator">=</span> o1.next;</span><br><span class="line">        <span class="comment">//旧头插在新头前面</span></span><br><span class="line">        o1.next = n1;</span><br><span class="line">        <span class="comment">//旧头变成新头以便于循环操作</span></span><br><span class="line">        n1 = o1;</span><br><span class="line">        <span class="comment">//将旧老二的位置赋值给旧头这样就可以开启下一轮循环</span></span><br><span class="line">        o1 = o2;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//链表数目最少是一就不用判断边界条件</span></span><br><span class="line">    <span class="keyword">return</span> n1;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>优化：快慢指针找中间值和反转链表同时做到放在一个循环里面<br>步骤1、找中间点同时中间节点前半段链表反转、<br>步骤2、反转后前半个链表与原链表逐一比对</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isPalindrome</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="comment">//得到中间节点</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p1</span> <span class="operator">=</span> head;</span><br><span class="line">    <span class="comment">//快指针</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p2</span> <span class="operator">=</span> head;</span><br><span class="line">    <span class="comment">//新头指针</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">o1</span> <span class="operator">=</span> head;</span><br><span class="line">    <span class="keyword">while</span>(p2 != <span class="literal">null</span> &amp;&amp; p2.next != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">//p1走一步</span></span><br><span class="line">        p1 = p1.next;</span><br><span class="line">        <span class="comment">//p2走两步</span></span><br><span class="line">        p2 = p2.next;</span><br><span class="line">        p2 = p2.next;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//奇数情况调整</span></span><br><span class="line">    <span class="keyword">if</span>(p2 != <span class="literal">null</span>) &#123;</span><br><span class="line">        p1 = p1.next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//反转代码</span></span><br><span class="line">        <span class="comment">//o2和p1实质上是一样的可以省略</span></span><br><span class="line">        <span class="comment">//ListNode o2 = o1.next;</span></span><br><span class="line">        o1.next = n1;</span><br><span class="line">        n1 = o1;</span><br><span class="line">        o1 = p1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//判断</span></span><br><span class="line">    <span class="keyword">while</span>(n1 != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(n1.val != p1.val) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        n1 = n1.next;</span><br><span class="line">        p1 = p1.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="判断是否有环形链表-141题"><a href="#判断是否有环形链表-141题" class="headerlink" title="判断是否有环形链表(141题)"></a>判断是否有环形链表(141题)</h1><h2 id="龟兔算法判断"><a href="#龟兔算法判断" class="headerlink" title="龟兔算法判断"></a>龟兔算法判断</h2><p>思路：</p><ul><li>龟一次走一步，兔子一次走两步</li><li>当兔子能走到终点时，不存在环</li><li>当兔子能够追上龟时，则可以判定存在环链表</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasCycle</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">h</span> <span class="operator">=</span> head;<span class="comment">//兔</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">t</span> <span class="operator">=</span> head;<span class="comment">//龟</span></span><br><span class="line">    <span class="keyword">while</span>(h != <span class="literal">null</span> &amp;&amp; h.next != <span class="literal">null</span>) &#123;</span><br><span class="line">        t = t.next;</span><br><span class="line">        h = h.next.next;</span><br><span class="line">        <span class="comment">//相遇</span></span><br><span class="line">        <span class="keyword">if</span>(h == t) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="确定环的入口位置-142题"><a href="#确定环的入口位置-142题" class="headerlink" title="确定环的入口位置(142题)"></a>确定环的入口位置(142题)</h1><h2 id="龟兔算法进阶判断"><a href="#龟兔算法进阶判断" class="headerlink" title="龟兔算法进阶判断"></a>龟兔算法进阶判断</h2><p>进阶算法：判断环的入口</p><ul><li><span class='p red'>从他们第一次相遇开始，龟回到起点，兔子保持原位不变</span></li><li><span class='p red'>龟和兔子一次都只走一步</span></li><li><span class='p red'>当再次相遇时，相遇点就是环的入口</span>解释：<span class='p red'></span></li><li>设起点到环入口走a步，绕环一周的长度为b</li><li>那么<span class='p red'>从起点开始，走a + 绕环n圈，都能找到环的入口</span>(顶级思路)</li><li>第一次相遇时：<ul><li>兔走了a + 绕环n圈 + k，k是他们相遇距环入口位置</li><li>龟走了a + 绕环n圈 + k, 当然它绕的圈数比兔少</li><li>兔走的距离是龟的两倍，所以<span class='p red'>龟走的 = 兔走的 - 龟走的 = 环绕n圈</span>(顶级思路)</li></ul></li><li>而前面分析过，如果走了a + 绕环n圈，都能找到环入口，因此相遇点开始，再走a步，就是环入口</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">detectCycle</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">h</span> <span class="operator">=</span> head;<span class="comment">//兔</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">t</span> <span class="operator">=</span> head;<span class="comment">//龟</span></span><br><span class="line">    <span class="keyword">while</span>(h != <span class="literal">null</span> &amp;&amp; h.next != <span class="literal">null</span>) &#123;</span><br><span class="line">        t = t.next;</span><br><span class="line">        h = h.next.next;</span><br><span class="line">        <span class="comment">//第一次相遇</span></span><br><span class="line">        <span class="keyword">if</span>(h == t) &#123;</span><br><span class="line">            <span class="comment">//进入第二阶段</span></span><br><span class="line">            t = head;</span><br><span class="line">            <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">                 <span class="comment">//下一次相遇就是环的入口</span></span><br><span class="line">                 <span class="comment">//而且判断条件放在指针移动的前面还可以排除全环链表的错误情况</span></span><br><span class="line">                 <span class="comment">//因为全环的环入口在龟回到起始点时他们还是相遇的，此时直接返回结果就行</span></span><br><span class="line">                <span class="keyword">if</span>(t == h) &#123;</span><br><span class="line">                    <span class="keyword">return</span> t;</span><br><span class="line">                &#125;</span><br><span class="line">                t = t.next;</span><br><span class="line">                <span class="comment">//这时候兔子只走一步</span></span><br><span class="line">                h = h.next;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="合并有序数组-88题变形"><a href="#合并有序数组-88题变形" class="headerlink" title="合并有序数组(88题变形)"></a>合并有序数组(88题变形)</h1><h2 id="方法一：递归"><a href="#方法一：递归" class="headerlink" title="方法一：递归"></a>方法一：递归</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//a1原始数组 a2结果数组 </span></span><br><span class="line"><span class="comment">//i, iEnd 第一个有序区间的起点终点， j， jEnd 第二个有序区间的起点和终点</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span>[] a1, <span class="type">int</span> i, <span class="type">int</span> iEnd, <span class="type">int</span> j, <span class="type">int</span> jEnd, <span class="type">int</span>[] a2, <span class="type">int</span> k)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(i &gt; iENd) &#123;</span><br><span class="line">        <span class="comment">//代表i没元素了，j多余的要拷贝</span></span><br><span class="line">        System.arraycopy(a1, j, a2, k, jEmd - j + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(j &gt; jEnd) &#123;</span><br><span class="line">        <span class="comment">//代表j没元素了，i多余的要拷贝</span></span><br><span class="line">        System.arraycopy(a1, i, a2, k, iEmd - i + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(a1[i] &lt; a1[j]) &#123;</span><br><span class="line">        <span class="comment">//i值小那么就赋值给结果数组</span></span><br><span class="line">        a2[k] = a1[i];</span><br><span class="line">        <span class="comment">//递归把i索引向后移</span></span><br><span class="line">        merge(a1, i+<span class="number">1</span>, iEnd, j, jEnd, a2, k+<span class="number">1</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        a2[k] = a1[j];</span><br><span class="line">        merge(a1, i, iEnd, j+<span class="number">1</span>, jEnd, a2, k+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="方法二-1"><a href="#方法二-1" class="headerlink" title="方法二"></a>方法二</h2><p>和方法一逻辑一致，也是比较<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span>[] a1, <span class="type">int</span> i, <span class="type">int</span> iEnd, <span class="type">int</span> j, <span class="type">int</span> jEnd, <span class="type">int</span>[] a2)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(i &lt;= iEnd &amp;&amp; j &lt;= jEnd) &#123;</span><br><span class="line">        <span class="keyword">if</span>(a1[i] &lt; a1[j]) &#123;</span><br><span class="line">            a2[k] = a1[i];</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            a2[k] = a1[j];</span><br><span class="line">            j++;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        k++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//循环结束就可以判断谁的没元素了</span></span><br><span class="line">    <span class="keyword">if</span>(i &gt; iEnd) &#123;</span><br><span class="line">        System.arraycopy(a1, j, a2, k, jEmd - j + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(j &gt; jEnd) &#123;</span><br><span class="line">        <span class="comment">//代表j没元素了，i多余的要拷贝</span></span><br><span class="line">        System.arraycopy(a1, i, a2, k, iEmd - i + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    
    <summary type="html">天啊，例题和leetCode上的完全不是一个档次啊</summary>
    
    
    
    <category term="数据结构与算法" scheme="http://love.sunnyherry.cn/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="链表习题" scheme="http://love.sunnyherry.cn/tags/%E9%93%BE%E8%A1%A8%E4%B9%A0%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>递归</title>
    <link href="http://love.sunnyherry.cn/_posts/38362.html"/>
    <id>http://love.sunnyherry.cn/_posts/38362.html</id>
    <published>2023-07-11T21:11:20.000Z</published>
    <updated>2023-08-06T14:11:38.837Z</updated>
    
    <content type="html"><![CDATA[<h1 id="定义"><a href="#定义" class="headerlink" title="定义 "></a>定义 <span class='p red'></span></h1><ul><li>计算机科学中，递归是一种解决计算问题的方法，其中解决方法<span class='p red'>取决于同一类问题的更小子集</span></li></ul><p>比如单链表递归遍历的例子：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">f</span><span class="params">(Node node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(node == <span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    f(node.next);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>说明：<br>1、自己调用自己，如果说每一个函数对应着一种解决方案，自己调用自己意味着解决方案是一样的(有规律的)<br>2、每次调用，函数处理的数据会较上次缩减(子集)，而且最后会缩减至无需继续递归<br>3、<span class='p red'>内层函数调用(子集处理)完成，外层函数才能算调用完成</span></p><h1 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h1><p>1、确定能否使用递归求解<br>2、推导出递推关系，即<span class='p red'>父问题与子问题的关系，以及递归的结束条件</span></p><p><em>深入到最里层叫做递</em>从最里层出来叫做归<br>*在递的过程中，外层函数内的<span class='p red'>局部变量(以及方法参数)并未消失，归的时候还可以用到</span></p><h2 id="例一-阶乘"><a href="#例一-阶乘" class="headerlink" title="例一- 阶乘"></a>例一- 阶乘</h2><p>用递归方法求阶乘<br>·阶乘的定义 n！ = 1·2·3···(n-2)·(n-1)·n，其中n为自然数，当然0！ = 1<br>·递推关系:<br>f(n) = {<br>    1，n=1<br>    n * f(n-1) ,n&gt;1<br>}</p><p>代码实现<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 递归实现阶乘</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Factorial</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">f</span><span class="params">(<span class="type">int</span> n)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> n * f(n-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">f</span> <span class="operator">=</span> f(<span class="number">5</span>);</span><br><span class="line">        System.out.println(f);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="例二-反向打印字符串"><a href="#例二-反向打印字符串" class="headerlink" title="例二- 反向打印字符串"></a>例二- 反向打印字符串</h2><p>使用递归反向打印字符串，n为字符在整个字符串str中的索引位置<br>·递：n从0开始，每次n+1，一直递到n == str.length() - 1<br>·归：从n == str.length() 开始归，自然是逆序的<br>递推关系：<br>f(n) = {<br>    停止    n = str.length()<br>    f(n+1)  0 ≤ n ≤ str.lenth() - 1<br>}</p><p>代码实现<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 递归反向打印字符串</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReversePrintString</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">f</span><span class="params">(<span class="type">int</span> n, String str)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (n == str.length())&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//要放在调用递归方法的后面才能实现逆序</span></span><br><span class="line">        f(n + <span class="number">1</span>, str);</span><br><span class="line">        System.out.println(str.charAt(n));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        f(<span class="number">0</span>,<span class="string">&quot;abcd&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="例三-递归实现二分查找"><a href="#例三-递归实现二分查找" class="headerlink" title="例三- 递归实现二分查找"></a>例三- 递归实现二分查找</h2><p>代码实现<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">E03BinarySearch</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">search</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> target)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//边界值包含的情况</span></span><br><span class="line">        <span class="keyword">return</span> f(a,target,<span class="number">0</span>,a.length -<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 递归(子问题)函数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> a-数组</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> target-待查找值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> i-起始索引(包含)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> j-结束索引(包含)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     *      -找到返回索引</span></span><br><span class="line"><span class="comment">     *      -没找到返回-1</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">f</span><span class="params">(<span class="type">int</span>[] a,<span class="type">int</span> target, <span class="type">int</span> i, <span class="type">int</span> j)</span>&#123;</span><br><span class="line">        <span class="comment">//跳出递归的条件</span></span><br><span class="line">        <span class="keyword">if</span>(i &gt; j)&#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> (i + j) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(target &lt; a[m])&#123;</span><br><span class="line">            <span class="keyword">return</span> f(a, target, i, m-<span class="number">1</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(a[m] &lt; target)&#123;</span><br><span class="line">            <span class="keyword">return</span> f(a, target, i+<span class="number">1</span>, j);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> m;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="例四-递归实现冒泡排序"><a href="#例四-递归实现冒泡排序" class="headerlink" title="例四- 递归实现冒泡排序"></a>例四- 递归实现冒泡排序</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 递归冒泡排序</span></span><br><span class="line"><span class="comment"> * -将数组划分成两部分[0..j][j+1 .. a.length-1]</span></span><br><span class="line"><span class="comment"> * -左边[0..j]是未排序部分</span></span><br><span class="line"><span class="comment"> * -右边[j+1 .. a.length-1]是已排序的部分</span></span><br><span class="line"><span class="comment"> * -未排序区间内，相邻的两个元素比较，如果前一个大于后一个，则交换位置</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">E04BubbleSort</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] a)</span>&#123;</span><br><span class="line">        bubble1(a,a.length -<span class="number">1</span> );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//j代表未排序区域右边界</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">bubble1</span><span class="params">(<span class="type">int</span>[] a,<span class="type">int</span> j)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(j == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; j; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[i] &gt; a[i + <span class="number">1</span>]) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> a[i];</span><br><span class="line">                a[i] = a[i+<span class="number">1</span>];</span><br><span class="line">                a[i+<span class="number">1</span>] = t;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//递归调用</span></span><br><span class="line">        bubble1(a,j - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 递归函数(优化) 在范围[0 .. j]内冒泡最大元素到右侧</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> a-数组</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> j-未排序区域右边界</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">bubble2</span><span class="params">(<span class="type">int</span>[] a,<span class="type">int</span> j)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(j == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; j; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[i] &gt; a[i + <span class="number">1</span>]) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> a[i];</span><br><span class="line">                a[i] = a[i+<span class="number">1</span>];</span><br><span class="line">                a[i+<span class="number">1</span>] = t;</span><br><span class="line">                <span class="comment">//将i赋值给x会减少很多不必要的递归</span></span><br><span class="line">                x = i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//递归调用</span></span><br><span class="line">        bubble2(a,x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="例五-递归实现插入排序"><a href="#例五-递归实现插入排序" class="headerlink" title="例五- 递归实现插入排序"></a>例五- 递归实现插入排序</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">E05InsertionSort</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] a)</span> &#123;</span><br><span class="line">        insertion(a, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 递归实现插入排序</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> a-数组</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> low-未排序区域的左边界</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">insertion</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> low)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (low == a.length) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> a[low];</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> low - <span class="number">1</span>; <span class="comment">// 已排序区域指针</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//找比t小的元素</span></span><br><span class="line">        <span class="keyword">while</span>(i &gt;= <span class="number">0</span> &amp;&amp; a[i] &gt; t) &#123; <span class="comment">//退出循环意味着找到了插入位置</span></span><br><span class="line">            a[i+<span class="number">1</span>] = a[i]; <span class="comment">// 空出插入位置</span></span><br><span class="line">            i--;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//找到插入位置</span></span><br><span class="line">        <span class="keyword">if</span>(i+<span class="number">1</span> != low)&#123;</span><br><span class="line">            <span class="comment">//减少一次赋值动作</span></span><br><span class="line">            a[i+<span class="number">1</span>] = t;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        insertion(a, low + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//另一种冒泡排序实现,但是赋值次数比上一次多得多,效率低</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">insertion2</span><span class="params">(<span class="type">int</span>[] a,<span class="type">int</span> low)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(low == a.length) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> low - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(i &gt;= <span class="number">0</span> &amp;&amp; a[i] &gt; a[i+<span class="number">1</span>])&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> a[i];</span><br><span class="line">            a[i] = a[i+<span class="number">1</span>];</span><br><span class="line">            a[i+<span class="number">1</span>] = t;</span><br><span class="line"></span><br><span class="line">            i--;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        insertion2(a,low+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="例六-斐波那契数列"><a href="#例六-斐波那契数列" class="headerlink" title="例六- 斐波那契数列"></a>例六- 斐波那契数列</h2><p>·之前的例子是每个递归函数只包含一个自身的调用，这称之为 <span class='p red'>single recursion</span><br>·如果每个递归函数包含多个自身调用，称之为 <span class='p red'>multi recursion(多路递归)</span><br>递推关系：<br>f(n) = {<br>    0,              n=0<br>    1,              n=1<br>    f(n-1) + f(n-2) n&gt;1<br>}</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 递归求斐波那契数列</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">E06Fibonacci</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// f(3) =&gt; 调用了5次递归</span></span><br><span class="line">    <span class="comment">// f(4) =&gt; 调用了9次递归</span></span><br><span class="line">    <span class="comment">// f(5) =&gt; 调用了15次递归</span></span><br><span class="line">    <span class="comment">// f(n) =&gt; 调用了 2*f(n+1) - 1次递归</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">f</span><span class="params">(<span class="type">int</span> n)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> f(n - <span class="number">1</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">y</span> <span class="operator">=</span> f(n - <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">return</span> x + y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>递归的次数也符合斐波那契数列，<span class='p red'>2*f(n+1) - 1</span></li><li>它的时间复杂度为 O(1.618^n)</li></ul><h1 id="递归优化-动态规划"><a href="#递归优化-动态规划" class="headerlink" title="递归优化(动态规划)"></a>递归优化(动态规划)</h1><p>空间换时间，数组存储递归值减少计算量<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用Memoization(记忆法，也称备忘录)改进,空间换时间</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> n-第n项</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 第n项的值</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">fibonacci</span><span class="params">(<span class="type">int</span> n)</span>&#123;</span><br><span class="line">    <span class="comment">//存储递归的值</span></span><br><span class="line">    <span class="type">int</span>[] cache = <span class="keyword">new</span> <span class="title class_">int</span>[n + <span class="number">1</span>];</span><br><span class="line">    <span class="comment">//初始化</span></span><br><span class="line">    Arrays.fill(cache,-<span class="number">1</span>); <span class="comment">//[-1, -1, -1, -1]</span></span><br><span class="line">    <span class="comment">//赋值已知值</span></span><br><span class="line">    cache[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    cache[<span class="number">1</span>] = <span class="number">1</span>;<span class="comment">//[0, 1, -1, -1]</span></span><br><span class="line">    <span class="keyword">return</span> f(n, cache);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">f</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span>[] cache)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(cache[n] != -<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> cache[n];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> f(n - <span class="number">1</span>, cache);</span><br><span class="line">    <span class="type">int</span> <span class="variable">y</span> <span class="operator">=</span> f(n - <span class="number">2</span>, cache);</span><br><span class="line">    cache[n] = x + y;<span class="comment">//[0, 1, ?, -1] 存入数组</span></span><br><span class="line">    <span class="keyword">return</span> cache[n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="解决爆栈"><a href="#解决爆栈" class="headerlink" title="解决爆栈"></a>解决爆栈</h1><h2 id="尾调用"><a href="#尾调用" class="headerlink" title="尾调用"></a>尾调用</h2><p>如果函数的最后一步是调用一个函数，那么称为尾调用，例如<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">funtion <span class="title function_">a</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> b();</span><br><span class="line">&#125;    </span><br><span class="line">    <span class="comment">//下面实例都不叫尾调用：</span></span><br><span class="line">        <span class="comment">//最后一步并非调用函数</span></span><br><span class="line">        <span class="type">const</span> <span class="variable">c</span> <span class="operator">=</span> b();</span><br><span class="line">        <span class="keyword">return</span> c;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//最后一步虽然调用了函数，但是又用到了外层函数的数值1，相当于最后一步是加法操作</span></span><br><span class="line">        <span class="keyword">return</span> b() + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//下面同理使用了外层函数的变量x</span></span><br><span class="line">        <span class="keyword">return</span> b() + x;</span><br></pre></td></tr></table></figure></p><p>尾调用的好处就是可以把嵌套的函数关系变成<span class='p red'>平级的函数关系</span>，外层的函数不需要占着内存等内函数执行完就会被释放掉。<br>优雅！！！<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">funtion <span class="title function_">a</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> b();</span><br><span class="line">&#125; </span><br><span class="line">funtion <span class="title function_">b</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">10000</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><br>*散了吧，java编译器没优化递归的尾调用/(ㄒoㄒ)/~~</p><h2 id="改成循环"><a href="#改成循环" class="headerlink" title="改成循环"></a>改成循环</h2><p>返璞归真，还得是直接暴力循环，反正也比爆栈的报错强吧？哈哈哈</p><h1 id="递归时间复杂度计算"><a href="#递归时间复杂度计算" class="headerlink" title="递归时间复杂度计算"></a>递归时间复杂度计算</h1><h2 id="主定理计算方法"><a href="#主定理计算方法" class="headerlink" title="主定理计算方法"></a>主定理计算方法<span class='p red'></span></h2><p>若有递归式：<br><span class='p red'>T(n) = aT(n/b) + f(n)</span><br>其中：</p><ul><li><span class='p red'>T(n)是问题的运行时间，n是数据规模</span></li><li>a是子问题的个数<span class='p red'></span></li><li><span class='p red'>T(n/b)是子问题的运行时间，每个子问题被拆成原问题数据规模的n/b</span></li><li><span class='p red'>f(n)是除递归外执行的计算</span>令x = log[b]a,即x = log[子问题缩小倍数]子问题个数<br>那么可得时间复杂度为：<br>T(n) =<br>{<br>  O(n^x)              f(n) = O(n^c)并且c &lt; x<br>  O(n^x * log[n])     f(n) = O(n^x)并且c = x<br>  O(n^c)              f(n) = O(n^x)并且c &gt; x<br>}</li></ul><p>例如：<br>1、T(n) 2T(n/2) + n^4   (此时a = 2,b = 2,x = log[b]a =1, c = 4再用上面的公式求解时间复杂度)<br>·此时x = 1 &lt; 4,由后者决定整个时间复杂度O(n^4)</p><h2 id="展开求时间复杂度"><a href="#展开求时间复杂度" class="headerlink" title="展开求时间复杂度"></a>展开求时间复杂度</h2><p>像T(n) = T(n - 1) + T(1) + n这种找不到abc的就不能用上面的办法，得使用数学方式展开求时间复杂度，类似于数列的递推公式</p><p>例如求：递归快排的时间复杂度<br>快速排序分区没分好的极端情况<br>T(n) = T(n - 1) + T(1) + n, T(1) = c<br>即:T(n) = T(n - 1) + c + n<br>下面为展开过程<br>T(n) = T(n - 2) + c + (n - 1) + c +n<br>T(n) = T(n - 3) + c + (n - 2) + (n - 1) + c +n<br>…<br><span class='p red'>T(n) = T(n-(n-1)) + (n - 1)c + 2+...+n = n^2/2 + 2cn+n/2 - 1</span><br>时间复杂度为O(n^2)</p><p>不会推导的可以进入外挂 <a href="https://www.wolframalpha.com/">https://www.wolframalpha.com/</a><br>·例一：输入f(n) = f(n-1) + c,f(1) = c</p><h1 id="汉诺塔"><a href="#汉诺塔" class="headerlink" title="汉诺塔"></a>汉诺塔</h1><p>Tower of Hanol，是一个源于印度的古老传说：大梵天创建世界时做了三根金刚石柱，在一根柱子从下往上按大小顺序摞着64片黄金圆盘，大梵天命令婆罗门把圆盘重新摆放在另一根柱子上，并且规定</p><ul><li><span class='p red'>一次只能移动一次圆盘</span></li><li><span class='p red'>小圆盘上不能放大圆盘</span></li></ul><p>代码实现：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">E02HanoiTower</span> &#123;</span><br><span class="line">    <span class="comment">//三个集合代表三个柱子</span></span><br><span class="line">    <span class="keyword">static</span> LinkedList&lt;Integer&gt; a =<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">static</span> LinkedList&lt;Integer&gt; b =<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">static</span> LinkedList&lt;Integer&gt; c =<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化方法，将初始数量的圆盘放到a柱子上由大到小表示如[3, 2, 1]</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> n-圆盘数量</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(<span class="type">int</span> n)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> n; i &gt;= <span class="number">1</span> ; i--) &#123;</span><br><span class="line">            a.addLast(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> n-圆盘个数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> a-原始柱</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> b-借用柱</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> c-目标柱</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">move</span><span class="params">(<span class="type">int</span> n, LinkedList&lt;Integer&gt; a,</span></span><br><span class="line"><span class="params">                     LinkedList&lt;Integer&gt; b,</span></span><br><span class="line"><span class="params">                     LinkedList&lt;Integer&gt; c)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//将上一步的一堆看作一个整体移到b上，比如321，拿出21移到b上，而且必须借助“借用柱”，这里的借用柱就是c</span></span><br><span class="line">        move(n - <span class="number">1</span>, a, c, b);</span><br><span class="line">        <span class="comment">//剩下的最大的那一个圆盘直接移到目标柱，当然也要借用柱</span></span><br><span class="line">        c.addLast(a.removeLast());</span><br><span class="line">        print();</span><br><span class="line">        <span class="comment">//这时候再把那一堆放到目标c柱上即可，那一推会用递归变成我说的注释内容。妙！！！</span></span><br><span class="line">        move(n - <span class="number">1</span>, b, a, c);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//查看柱子上的圆盘情况</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;----------------------&quot;</span>);</span><br><span class="line">        System.out.println(a);</span><br><span class="line">        System.out.println(b);</span><br><span class="line">        System.out.println(c);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        init(<span class="number">3</span>);</span><br><span class="line">        print();</span><br><span class="line">        move(<span class="number">3</span>, a, b, c);</span><br><span class="line">        print();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>时间复杂度估算<br>T(n) = 2T(n - 1) + c, T(1) = c<br>用展开求解<br>T(n) = c(2^n - 1)<br>即时间复杂度O(2^n)</p><h1 id="杨辉三角"><a href="#杨辉三角" class="headerlink" title="杨辉三角"></a>杨辉三角</h1><p>有三种方法：<br>第一种：直接递归<br>第二种：二维数组记忆法，也有递归<br>第三种：直接一维数组不需要递归</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">E03PascalTriangle</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 直接递归</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> i-行坐标</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> j- 列坐标</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 该坐标元素值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">element</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(j == <span class="number">0</span> || i == j)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> element(i - <span class="number">1</span>,j - <span class="number">1</span>) + element(i - <span class="number">1</span>, j);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 打印空格实现金字塔杨辉三角</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> n-阶数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> i-每行</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">printSpace</span><span class="params">(<span class="type">int</span> n , <span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> (n - <span class="number">1</span> - i) * <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; sum; j++) &#123;</span><br><span class="line">            System.out.print(<span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 直角等腰三角形版杨辉三角</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> n-阶数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            printSpace(n , i);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt;= i; j++) &#123;</span><br><span class="line">                System.out.printf(<span class="string">&quot;%-4d&quot;</span>,element(i, j));<span class="comment">//-号表示左对齐，4d表示每次格式化空格单位</span></span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 优化一-使用二维数组记忆法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> i-行坐标</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> j-列坐标</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 该坐标元素值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">element1</span><span class="params">(<span class="type">int</span>[][] triangle, <span class="type">int</span> i, <span class="type">int</span> j)</span>&#123;</span><br><span class="line">        <span class="comment">//因为数组默认值是0，只要计算过了那么就说明大于0直接返回</span></span><br><span class="line">        <span class="keyword">if</span>(triangle[i][j] &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> triangle[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(j == <span class="number">0</span> || i == j)&#123;</span><br><span class="line">            triangle[i][j] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        triangle[i][j] =  element1(triangle, i - <span class="number">1</span>,j - <span class="number">1</span>) + element1(triangle, i - <span class="number">1</span>, j);</span><br><span class="line">        <span class="keyword">return</span> triangle[i][j];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 等腰三角形版杨辉三角(二位数组存储优化递归)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> n-阶数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">print1</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[][] triangle = <span class="keyword">new</span> <span class="title class_">int</span>[n][];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            triangle[i] = <span class="keyword">new</span> <span class="title class_">int</span>[i+<span class="number">1</span>];<span class="comment">//第i行列的个数就是i+1</span></span><br><span class="line">            printSpace(n , i);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt;= i; j++) &#123;</span><br><span class="line">                System.out.printf(<span class="string">&quot;%-4d&quot;</span>,element1(triangle, i, j));<span class="comment">//-号表示左对齐，4d表示每次格式化空格单位</span></span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &lt;h3&gt;优化2-使用一维数组记忆法&lt;/h3&gt;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> row-行数组</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> i-行号</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        0 0 0 0 0 0     初始状态</span></span><br><span class="line"><span class="comment">        1 0 0 0 0 0     i=0</span></span><br><span class="line"><span class="comment">        1 1 0 0 0 0     i=1</span></span><br><span class="line"><span class="comment">        1 2 1 0 0 0     i=2</span></span><br><span class="line"><span class="comment">        1 3 3 1 0 0     i=3</span></span><br><span class="line"><span class="comment">        1 4 6 4 1 0     i=4</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">creatRow</span><span class="params">(<span class="type">int</span>[] row, <span class="type">int</span> i)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(i == <span class="number">0</span>)&#123;</span><br><span class="line">            row[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i; j &gt; <span class="number">0</span> ; j--) &#123;</span><br><span class="line">            row[j] = row[j] + row[j - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">print2</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] row = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            creatRow(row,i);</span><br><span class="line">            printSpace(n , i);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt;= i; j++) &#123;</span><br><span class="line">                System.out.printf(<span class="string">&quot;%-4d&quot;</span>, row[j]);<span class="comment">//-号表示左对齐，4d表示每次格式化空格单位</span></span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">会被学劝退的递归，更得好好学</summary>
    
    
    
    <category term="数据结构与算法" scheme="http://love.sunnyherry.cn/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="递归" scheme="http://love.sunnyherry.cn/tags/%E9%80%92%E5%BD%92/"/>
    
  </entry>
  
  <entry>
    <title>单、双、循环链表</title>
    <link href="http://love.sunnyherry.cn/_posts/13476.html"/>
    <id>http://love.sunnyherry.cn/_posts/13476.html</id>
    <published>2023-07-09T21:11:20.000Z</published>
    <updated>2023-08-06T14:11:38.837Z</updated>
    
    <content type="html"><![CDATA[<h1 id="链表"><a href="#链表" class="headerlink" title="链表 "></a>链表 <span class='p red'></span></h1><h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>在计算机科学中，链表是数据元素的线性集合，其<span class='p red'>每个元素都指向下一个元素，元素存储上并不连续</span></p><h2 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h2><ul><li>单向链表：每个元素只知道下一个元素是谁</li><li>双向链表：每个元素知道其上一个元素和下一个元素</li><li>循环链表：通常的链表尾节点tail指向的都是null，而循环链表的尾tail指向的是头节点head</li></ul><p>*链表内还有一种特殊的节点称为哨兵(Sentinel)节点，也叫做哑元(Dummy)节点，，<span class='p red'>它不存储数据，通常用作头尾，用来简化边界判断</span></p><h2 id="性能"><a href="#性能" class="headerlink" title="性能"></a>性能</h2><p>随机访问：<br>根据index查找，时间复杂度O(n)，数据越多随机访问性能越差</p><p>插入和删除：<br>·起始位置：O(1),和链表数据规模无关<br>·结束位置：如果已知tail尾节点是O(1),不知道tail尾节点是O(n)<br>·中间位置：根据index查找时间+O(1)</p><h1 id="单向链表"><a href="#单向链表" class="headerlink" title="单向链表"></a>单向链表</h1><h2 id="构建单向链表类"><a href="#构建单向链表类" class="headerlink" title="构建单向链表类"></a>构建单向链表类</h2><p>这里要注意的是这个类的创建过程，有单链表类内部还有节点类<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SinglyLinkedList</span> <span class="keyword">implements</span> <span class="title class_">Iterable</span>&lt;Integer&gt; &#123; <span class="comment">// 整体</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Node</span> <span class="variable">head</span> <span class="operator">=</span> <span class="literal">null</span>;<span class="comment">// 头指针</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//重写迭代器,实际上重写了增强for内部的方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;Integer&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//匿名内部类</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Iterator</span>&lt;Integer&gt;() &#123;</span><br><span class="line">            <span class="type">Node</span> <span class="variable">p</span> <span class="operator">=</span> head;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;<span class="comment">// 是否有下一个元素</span></span><br><span class="line">                <span class="keyword">return</span> p != <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Integer <span class="title function_">next</span><span class="params">()</span> &#123; <span class="comment">//返回当前值，并指向下一个元素</span></span><br><span class="line">                <span class="comment">//得到当前元素的值</span></span><br><span class="line">                <span class="type">int</span> <span class="variable">v</span> <span class="operator">=</span> p.value;</span><br><span class="line">                <span class="comment">//指向下一个元素</span></span><br><span class="line">                p = p.next;</span><br><span class="line">                <span class="comment">//返回当前元素值</span></span><br><span class="line">                <span class="keyword">return</span> v;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 节点类</span></span><br><span class="line"><span class="comment">     * 像这种类与类组合的方式一般都要考虑是否可以成为内部类，减少类的暴露</span></span><br><span class="line"><span class="comment">     * 什么时候加static？</span></span><br><span class="line"><span class="comment">     * 当匿名内部类中没有使用外部类的成员变量时就可以使用static，反之则不行。static随着类的加载而加载</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        <span class="type">int</span> value;<span class="comment">// 值</span></span><br><span class="line">        Node next;<span class="comment">//下一个节点指针</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//有参构造</span></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(<span class="type">int</span> value, Node next)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.value = value;</span><br><span class="line">            <span class="built_in">this</span>.next = next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="常见的单链表方法"><a href="#常见的单链表方法" class="headerlink" title="常见的单链表方法"></a>常见的单链表方法</h2><p>有熟悉的增删改查方法，底层原理在代码中写的比较详细了</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 向链表头部添加链表元素(头插)</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value-待添加的值</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addFirst</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">    <span class="comment">//1、链表为空</span></span><br><span class="line">    <span class="comment">//head = new Node(value,null);</span></span><br><span class="line">    <span class="comment">//2、链表非空,下面这行包含了链表为空和不为空的情况，因为head一开始就是null，赋值为null</span></span><br><span class="line">    head = <span class="keyword">new</span> <span class="title class_">Node</span>(value, head);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 遍历链表(while版)</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> consumer-由调用者决定该方法的作用，用accept方法实现</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">loop1</span><span class="params">(Consumer&lt;Integer&gt; consumer)</span> &#123;</span><br><span class="line">    <span class="type">Node</span> <span class="variable">p</span> <span class="operator">=</span> head;</span><br><span class="line">    <span class="keyword">while</span> (p != <span class="literal">null</span>) &#123;</span><br><span class="line">        consumer.accept(p.value);</span><br><span class="line">        <span class="comment">//上面处理完当前节点值之后，将p地址赋值为下一个节点的地址</span></span><br><span class="line">        p = p.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 遍历链表(for版)</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> consumer-由调用者决定该方法的作用，用accept方法实现</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">loop2</span><span class="params">(Consumer&lt;Integer&gt; consumer)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">Node</span> <span class="variable">p</span> <span class="operator">=</span> head; p != <span class="literal">null</span>; p = p.next) &#123;</span><br><span class="line">        consumer.accept(p.value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查找链表中的最后一个元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> Node <span class="title function_">findLast</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(head == <span class="literal">null</span>)&#123;<span class="comment">//空链表情况</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Node p;</span><br><span class="line">    <span class="keyword">for</span> (p = head; p.next != <span class="literal">null</span>; p = p.next) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 向链表尾部添加</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value-待添加值</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addLast</span><span class="params">(<span class="type">int</span> value)</span>&#123;</span><br><span class="line">    <span class="type">Node</span> <span class="variable">last</span> <span class="operator">=</span> findLast();</span><br><span class="line">    <span class="keyword">if</span>(last == <span class="literal">null</span>)&#123;</span><br><span class="line">        addFirst(value);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    last.next = <span class="keyword">new</span> <span class="title class_">Node</span>(value,<span class="literal">null</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*public void test()&#123;</span></span><br><span class="line"><span class="comment">    int i = 0;</span></span><br><span class="line"><span class="comment">    for(Node p = head; p.next != null; p = p.next, i++)&#123;//第三个部分可以有多行操作(Java语法)</span></span><br><span class="line"><span class="comment">        System.out.println(p.value + &quot;索引是&quot; + i);</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查找节点</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> index</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> Node <span class="title function_">findNode</span><span class="params">(<span class="type">int</span> index)</span>&#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">Node</span> <span class="variable">p</span> <span class="operator">=</span> head; p != <span class="literal">null</span>; p = p.next, i++)&#123;<span class="comment">//第三个部分可以有多行操作(Java语法)</span></span><br><span class="line">        <span class="keyword">if</span>(i == index)&#123;</span><br><span class="line">            <span class="keyword">return</span> p;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;<span class="comment">//没找到</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据索引查找</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> index-索引</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 找到，返回该索引位置节点的值</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IllegalArgumentException-找不到，抛出index非法异常</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span>&#123;</span><br><span class="line">    <span class="type">Node</span> <span class="variable">node</span> <span class="operator">=</span> findNode(index);</span><br><span class="line">    <span class="keyword">if</span>(node == <span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="keyword">throw</span> illegalIndex(index);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> node.value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 抽取出来的异常类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> index</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> IllegalArgumentException <span class="title function_">illegalIndex</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(String.format(<span class="string">&quot;index [%d] 不合法%n&quot;</span>, index));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 向索引位置插入</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> index-索引</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value-待插入值</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IllegalArgumentException-找不到，抛出index非法异常</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(<span class="type">int</span> index, <span class="type">int</span> value)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(index == <span class="number">0</span>)&#123;</span><br><span class="line">        addFirst(value);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//直接调用上面写好的方法查询要插入位置的上一个节点</span></span><br><span class="line">    <span class="type">Node</span> <span class="variable">prev</span> <span class="operator">=</span> findNode(index - <span class="number">1</span>);<span class="comment">//找到下一个节点</span></span><br><span class="line">    <span class="keyword">if</span>(prev == <span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="keyword">throw</span> illegalIndex(index);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//新添加的下一个节点地址就是先前的下一个节点地址</span></span><br><span class="line">    <span class="comment">//新添加前面的节点的下一个节点地址要改为新添加的节点地址</span></span><br><span class="line">    prev.next = <span class="keyword">new</span> <span class="title class_">Node</span>(value, prev.next);<span class="comment">//太优雅了！！！</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 删除第一个节点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">removeFirst</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(head == <span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="keyword">throw</span> illegalIndex(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//将把第二个节点当作第一个节点</span></span><br><span class="line">    head = head.next;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 从索引位置删除</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> index-索引</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IllegalArgumentException-找不到，抛出index非法异常</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">removeByIndex</span><span class="params">(<span class="type">int</span> index)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(index == <span class="number">0</span>)&#123;</span><br><span class="line">        removeFirst();</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">Node</span> <span class="variable">prev</span> <span class="operator">=</span> findNode(index - <span class="number">1</span>);<span class="comment">//上一个节点</span></span><br><span class="line">    <span class="keyword">if</span>(prev == <span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="keyword">throw</span> illegalIndex(index);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//获取当前要删除的节点对象</span></span><br><span class="line">    <span class="type">Node</span> <span class="variable">removed</span> <span class="operator">=</span> prev.next;</span><br><span class="line">    <span class="keyword">if</span>(removed == <span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="keyword">throw</span> illegalIndex(index);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//将前一个节点的下一个指针指向删除节点的下一个指针</span></span><br><span class="line">    prev.next = removed.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="带哨兵的单向链表"><a href="#带哨兵的单向链表" class="headerlink" title="带哨兵的单向链表"></a>带哨兵的单向链表</h2><p>个人理解哨兵:哨兵节点实际上就是省去了考虑大量的边界问题，一开始链表就存在一个哨兵节点，占着索引0的位置，但我们书写代码的时候可以把哨兵的索引写成-1这样其它的代码都可以不需要改变。哨兵节点是只读，不可操作的隐藏节点，设计非常巧妙，省去了很多在头部的判断情况,充分的简化了代码。<br>*需要注意遍历的时候起始遍历点是哨兵.next 这样就可以正常遍历。</p><h1 id="双向链表-带哨兵"><a href="#双向链表-带哨兵" class="headerlink" title="双向链表(带哨兵)"></a>双向链表(带哨兵)</h1><p>和单向链表大差不差，多了一个往前指的指针，好处在于在尾部可以直接根据尾哨兵从尾遍历</p><h2 id="构建双向链表类"><a href="#构建双向链表类" class="headerlink" title="构建双向链表类"></a>构建双向链表类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 双向链表</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DoublyLinkedListSentinel</span> <span class="keyword">implements</span> <span class="title class_">Iterable</span>&lt;Integer&gt;&#123;</span><br><span class="line">    <span class="comment">//重写迭代器</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;Integer&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Iterator</span>&lt;Integer&gt;() &#123;</span><br><span class="line">            <span class="comment">//设置起始位置</span></span><br><span class="line">            <span class="type">Node</span> <span class="variable">p</span> <span class="operator">=</span> head.next;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123; <span class="comment">// 是否有下一个元素</span></span><br><span class="line">                <span class="comment">//当节点地址不等于尾哨兵的时候就继续遍历</span></span><br><span class="line">                <span class="keyword">return</span> p != tail;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Integer <span class="title function_">next</span><span class="params">()</span> &#123; <span class="comment">//返回当前值，并指向下一个元素</span></span><br><span class="line">                <span class="type">Integer</span> <span class="variable">value</span> <span class="operator">=</span> p.value;</span><br><span class="line">                p = p.next;</span><br><span class="line">                <span class="keyword">return</span> value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        Node prev;<span class="comment">//上一个节点指针</span></span><br><span class="line">        Integer value;<span class="comment">//值</span></span><br><span class="line">        Node next;<span class="comment">//下一个节点指针</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(Node prev, Integer value, Node next)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.prev = prev;</span><br><span class="line">            <span class="built_in">this</span>.value = value;</span><br><span class="line">            <span class="built_in">this</span>.next = next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//双向链表加入两个哨兵，头尾各一个</span></span><br><span class="line">    <span class="keyword">private</span> Node head; <span class="comment">//头哨兵</span></span><br><span class="line">    <span class="keyword">private</span> Node tail; <span class="comment">//尾哨兵</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DoublyLinkedListSentinel</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//初始化链表头哨兵不需要prev，值无所谓，next初始化为尾节点</span></span><br><span class="line">        <span class="comment">//初始化链表尾哨兵不需要next，值无所谓，prev初始化为头节点</span></span><br><span class="line">        head = <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="literal">null</span>,<span class="number">666</span>,<span class="literal">null</span>);</span><br><span class="line">        tail = <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="literal">null</span>,<span class="number">888</span>,<span class="literal">null</span>);</span><br><span class="line">        head.next = tail;</span><br><span class="line">        tail.prev = head;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="常用带哨兵方法"><a href="#常用带哨兵方法" class="headerlink" title="常用带哨兵方法"></a>常用带哨兵方法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据索引查找指定节点</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index-索引值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 节点对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Node <span class="title function_">findNode</span><span class="params">(<span class="type">int</span> index)</span>&#123;<span class="comment">//工具类不给外界使用设为私有</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">Node</span> <span class="variable">p</span> <span class="operator">=</span> head; p != tail; p = p.next,i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(index == i)&#123;</span><br><span class="line">                <span class="keyword">return</span> p;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据索引插入节点</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index-索引值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value-待添加值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IllegalArgumentException-索引越界</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(<span class="type">int</span> index,<span class="type">int</span> value)</span>&#123;</span><br><span class="line">        <span class="comment">//获取待添加的位置的上一个节点和下一个节点地址</span></span><br><span class="line">        <span class="type">Node</span> <span class="variable">prev</span> <span class="operator">=</span> findNode(index - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span>(prev == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> illegalIndex(index);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">next</span> <span class="operator">=</span> prev.next;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">inserted</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(prev,value,next);</span><br><span class="line">        <span class="comment">//上一个节点的next改为添加的节点地址值</span></span><br><span class="line">        <span class="comment">//下一个节点的prev改为添加的节点地址值</span></span><br><span class="line">        prev.next = inserted;</span><br><span class="line">        next.prev = inserted;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 抽取出来的异常类</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> IllegalArgumentException <span class="title function_">illegalIndex</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(String.format(<span class="string">&quot;index [%d] 不合法%n&quot;</span>, index));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通过索引删除</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index-索引值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(<span class="type">int</span> index)</span>&#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">prev</span> <span class="operator">=</span> findNode(index - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span>(prev == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> illegalIndex(index);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">removed</span> <span class="operator">=</span> prev.next;</span><br><span class="line">        <span class="keyword">if</span>(removed == tail)&#123;</span><br><span class="line">            <span class="keyword">throw</span> illegalIndex(index);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">next</span> <span class="operator">=</span> removed.next;</span><br><span class="line">        <span class="comment">//待删除的前后两个节点前后互指即可</span></span><br><span class="line">        prev.next = next;</span><br><span class="line">        next.prev = prev;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 尾插入值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value-值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addLast</span><span class="params">(<span class="type">int</span> value)</span>&#123;</span><br><span class="line">        <span class="comment">//逻辑很简单，有尾哨兵更简单直接操作</span></span><br><span class="line">        <span class="type">Node</span> <span class="variable">last</span> <span class="operator">=</span> tail.prev;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">added</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(last,value,tail);</span><br><span class="line">        last.next = added;</span><br><span class="line">        tail.prev = added;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 尾删除值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">removeLast</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">removed</span> <span class="operator">=</span> tail.prev;</span><br><span class="line">        <span class="comment">//如果链表除了哨兵之外没有值了，这个时候不能删除头哨兵</span></span><br><span class="line">        <span class="keyword">if</span>(removed == head)&#123;</span><br><span class="line">            <span class="keyword">throw</span> illegalIndex(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">prev</span> <span class="operator">=</span> removed.prev;</span><br><span class="line">        <span class="comment">//上一个节点指向尾哨兵</span></span><br><span class="line">        prev.next = tail;</span><br><span class="line">        <span class="comment">//尾哨兵prev指向待删除的上一个节点值</span></span><br><span class="line">        tail.prev = prev;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h1 id="环形链表-带哨兵"><a href="#环形链表-带哨兵" class="headerlink" title="环形链表(带哨兵)"></a>环形链表(带哨兵)</h1><p>双向环形链表带哨兵，这时哨兵<span class='p red'>既作为头，也作为尾(优雅)</span></p><h2 id="创建环形双向链表类"><a href="#创建环形双向链表类" class="headerlink" title="创建环形双向链表类"></a>创建环形双向链表类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RingLinkedListSentinel</span> <span class="keyword">implements</span> <span class="title class_">Iterable</span>&lt;Integer&gt;&#123;</span><br><span class="line">    <span class="comment">//重写迭代器</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;Integer&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Iterator</span>&lt;Integer&gt;() &#123;</span><br><span class="line">            <span class="type">Node</span> <span class="variable">p</span> <span class="operator">=</span> sentinel.next;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123; <span class="comment">// 是否有下一个元素</span></span><br><span class="line">                <span class="comment">//等于哨兵的地址值表示刚好转了一圈，此时结束遍历</span></span><br><span class="line">                <span class="keyword">return</span> p != sentinel;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Integer <span class="title function_">next</span><span class="params">()</span> &#123; <span class="comment">//返回当前值，并指向下一个元素</span></span><br><span class="line">                <span class="type">int</span> <span class="variable">value</span> <span class="operator">=</span> p.value;</span><br><span class="line">                p = p.next;</span><br><span class="line">                <span class="keyword">return</span> value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 节点类</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        Node prev;</span><br><span class="line">        <span class="type">int</span> value;</span><br><span class="line">        Node next;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(Node prev, <span class="type">int</span> value, Node next)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.prev = prev;</span><br><span class="line">            <span class="built_in">this</span>.value = value;</span><br><span class="line">            <span class="built_in">this</span>.next = next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建哨兵</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Node</span> <span class="variable">sentinel</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="literal">null</span>,-<span class="number">1</span>,<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">RingLinkedListSentinel</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//环形双向链表的哨兵初始化prev和next都要指向自己</span></span><br><span class="line">        sentinel.next = sentinel;</span><br><span class="line">        sentinel.prev = sentinel;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="常见的环形链表方法"><a href="#常见的环形链表方法" class="headerlink" title="常见的环形链表方法"></a>常见的环形链表方法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 添加到第一个</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addFirst</span><span class="params">(<span class="type">int</span> value)</span>&#123;</span><br><span class="line">       <span class="comment">//通过哨兵指针获取哨兵对象已经它的下一个对象</span></span><br><span class="line">       <span class="comment">//当环形链表只存在哨兵时，a和b都是指的哨兵地址</span></span><br><span class="line">       <span class="type">Node</span> <span class="variable">a</span> <span class="operator">=</span> sentinel;</span><br><span class="line">       <span class="type">Node</span> <span class="variable">b</span> <span class="operator">=</span> sentinel.next;</span><br><span class="line">       <span class="comment">//创建带添加的节点，前后就是哨兵(a)和初始第一个节点(b)</span></span><br><span class="line">       <span class="type">Node</span> <span class="variable">inserted</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(a,value,b);</span><br><span class="line">       <span class="comment">//哨兵指向下一位为新添加节点，原来第一个节点上一位指向新节点</span></span><br><span class="line">       a.next = inserted;</span><br><span class="line">       b.prev = inserted;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 添加到最后一个</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addLast</span><span class="params">(<span class="type">int</span> value)</span>&#123;</span><br><span class="line">       <span class="comment">//自己想想就知道了，不用注释啦</span></span><br><span class="line">       <span class="comment">//核心就把环形拆成正常的双向链表，只不过尾哨兵和头哨兵一样</span></span><br><span class="line">       <span class="type">Node</span> <span class="variable">a</span> <span class="operator">=</span> sentinel.prev;</span><br><span class="line">       <span class="type">Node</span> <span class="variable">b</span> <span class="operator">=</span> sentinel;</span><br><span class="line"></span><br><span class="line">       <span class="type">Node</span> <span class="variable">inserted</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(a,value,b);</span><br><span class="line"></span><br><span class="line">       a.next = inserted;</span><br><span class="line">       b.prev = inserted;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 删除第一个节点</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">removeFirst</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="type">Node</span> <span class="variable">removed</span> <span class="operator">=</span> sentinel.next;</span><br><span class="line">       <span class="comment">//如果哨兵的上一个节点还是哨兵，那么说明这个链表没有任何值了，不能删除</span></span><br><span class="line">       <span class="keyword">if</span>(removed == sentinel)&#123;</span><br><span class="line">           <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;非法&quot;</span>);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="type">Node</span> <span class="variable">a</span> <span class="operator">=</span> sentinel;</span><br><span class="line">       <span class="type">Node</span> <span class="variable">b</span> <span class="operator">=</span>removed.next;</span><br><span class="line">       a.next = b;</span><br><span class="line">       b.prev = a;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 删除最后一个节点</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">removeLast</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="type">Node</span> <span class="variable">removed</span> <span class="operator">=</span> sentinel.prev;</span><br><span class="line">       <span class="comment">//如果哨兵的上一个节点还是哨兵，那么说明这个链表没有任何值了，不能删除</span></span><br><span class="line">       <span class="keyword">if</span>(removed == sentinel)&#123;</span><br><span class="line">           <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;非法&quot;</span>);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="type">Node</span> <span class="variable">a</span> <span class="operator">=</span> removed.prev;</span><br><span class="line">       <span class="type">Node</span> <span class="variable">b</span> <span class="operator">=</span> sentinel;</span><br><span class="line">       a.next = b;</span><br><span class="line">       b.prev = a;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 根据值删除(新)</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">removeByValue</span><span class="params">(<span class="type">int</span> value)</span>&#123;</span><br><span class="line">       <span class="type">Node</span> <span class="variable">removed</span> <span class="operator">=</span> findByValue(value);</span><br><span class="line">       <span class="keyword">if</span>(removed == <span class="literal">null</span>)&#123;</span><br><span class="line">           <span class="keyword">return</span>; <span class="comment">//没找到不用删</span></span><br><span class="line">       &#125;</span><br><span class="line">       <span class="type">Node</span> <span class="variable">a</span> <span class="operator">=</span>removed.prev;</span><br><span class="line">       <span class="type">Node</span> <span class="variable">b</span> <span class="operator">=</span>removed.next;</span><br><span class="line">       a.next = b;</span><br><span class="line">       b.prev = a;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 根据值查找(私有内部方法)</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="keyword">private</span> Node <span class="title function_">findByValue</span><span class="params">(<span class="type">int</span> value)</span>&#123;</span><br><span class="line">       <span class="type">Node</span> <span class="variable">p</span> <span class="operator">=</span>sentinel.next;</span><br><span class="line">       <span class="keyword">while</span>(p != sentinel)&#123;</span><br><span class="line">           <span class="keyword">if</span>(p.value == value)&#123;</span><br><span class="line">               <span class="keyword">return</span> p;</span><br><span class="line">           &#125;</span><br><span class="line">           p = p.next;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h1 id="链表递归遍历法"><a href="#链表递归遍历法" class="headerlink" title="链表递归遍历法"></a>链表递归遍历法</h1><p>下面以单向链表(带哨兵)来展示递归遍历，下一节就会讲递归<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">loop3</span><span class="params">(Consumer&lt;Integer&gt; before,</span></span><br><span class="line"><span class="params">                      Consumer&lt;Integer&gt; after)</span>&#123;</span><br><span class="line">        <span class="comment">//以单向链表为例，有哨兵的话参数地址就是哨兵.next</span></span><br><span class="line">        recursion(head.next,before,after);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">recursion</span><span class="params">(Node curr,</span></span><br><span class="line"><span class="params">                           Consumer&lt;Integer&gt; before, Consumer&lt;Integer&gt; after)</span>&#123; <span class="comment">//某个节点要进行的操作</span></span><br><span class="line">        <span class="keyword">if</span>(curr == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        before.accept(curr.value);</span><br><span class="line">        <span class="comment">//将下一个节点地址当作参数值传递实现递归</span></span><br><span class="line">        recursion(curr.next, before, after);</span><br><span class="line">        after.accept(curr.value);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><br>实现的结果:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">list.loop3(value -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;before&quot;</span> + value);</span><br><span class="line">        &#125;, value -&gt;&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;after&quot;</span> + value);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    before:1</span></span><br><span class="line"><span class="comment">    before:2</span></span><br><span class="line"><span class="comment">    before:3</span></span><br><span class="line"><span class="comment">    before:4</span></span><br><span class="line"><span class="comment">    after:1</span></span><br><span class="line"><span class="comment">    after:2</span></span><br><span class="line"><span class="comment">    after:3</span></span><br><span class="line"><span class="comment">    after:4</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><br>由结果不难发现执行递归的上下遍历出来的链表顺序互为逆序<br><span class='p red'>究其原因应该是发生了递归回溯，根据出入栈的规则导致结果的不同</span><br>跟spring特性中的AOP(面向切面编程)的原理很类似<br>详细的解释等下一章学递归就好解释了<br>解释：只有内层方法调用完了，外层才能继续运行，意思就是外层从一开始调用就不会停止，直到回到最外层走完。<br>将递归打开更加直观(没有用到的判断被我删去了)<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">f</span><span class="params">(Node node = <span class="number">1</span>)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;before&quot;</span> + node.value);</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">f</span><span class="params">(Node node = <span class="number">2</span>)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before&quot;</span> + node.value);</span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">f</span><span class="params">(Node node = <span class="number">3</span>)</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;before&quot;</span> + node.value);</span><br><span class="line">            <span class="keyword">void</span> <span class="title function_">f</span><span class="params">(Node node = <span class="literal">null</span>)</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(node == <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;after&quot;</span> + node.value);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;after&quot;</span> + node.value);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">&quot;after&quot;</span> + node.value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    
    <summary type="html">经典数据结构，狠狠地学起来！</summary>
    
    
    
    <category term="数据结构与算法" scheme="http://love.sunnyherry.cn/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="链表" scheme="http://love.sunnyherry.cn/tags/%E9%93%BE%E8%A1%A8/"/>
    
  </entry>
  
  <entry>
    <title>Map系列集合底层</title>
    <link href="http://love.sunnyherry.cn/_posts/36475.html"/>
    <id>http://love.sunnyherry.cn/_posts/36475.html</id>
    <published>2023-07-08T21:11:20.000Z</published>
    <updated>2023-08-06T14:11:38.837Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Map双列集合"><a href="#Map双列集合" class="headerlink" title="Map双列集合"></a>Map双列集合</h1><h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><p>1、双列集合一次需要存一对数据，分别为键(key)和值(value)<br>2、键不能重复，值可以重复<br>3、键和值是一一对应的，每一个键只能找到自己对应的值<br>4、键+值这个整体我们称之为“键值对”或者“键值对对象”，在Java中叫做“Entry对象”</p><h2 id="常见API"><a href="#常见API" class="headerlink" title="常见API"></a>常见API</h2><p>Map是双列集合的顶层接口，它的功能是全部双列集合都可以继承使用的<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/*</span></span><br><span class="line"><span class="comment">     V put(K key V value)                添加元素</span></span><br><span class="line"><span class="comment">     V remove(Object key)                根据键删除键值对元素</span></span><br><span class="line"><span class="comment">     void clear()                        移除所有的键值对元素</span></span><br><span class="line"><span class="comment">     boolean containsKey(Object key)     判断集合是否包含指定的键</span></span><br><span class="line"><span class="comment">     boolean containsValue(Object value) 判断集合是否包含指定的值</span></span><br><span class="line"><span class="comment">     boolean isEmpty()                   判断集合是否为空</span></span><br><span class="line"><span class="comment">     int size()                          集合的长度，也就是集合中键值对的个数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//1、创建Map集合的对象(用多态创建)</span></span><br><span class="line">Map&lt;String ,String&gt; m = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">//2、添加元素</span></span><br><span class="line"><span class="comment">//put的方法的细节</span></span><br><span class="line"><span class="comment">//添加+覆盖的功能</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//在添加数据的时候，如果键不存在，那么直接把键值对对象添加到map集合当中</span></span><br><span class="line"><span class="comment">//在添加数据的时候，如果键存在，那么就会把原有的键值对对象覆盖，会把被覆盖的值作为返回值返回</span></span><br><span class="line">m.put(<span class="string">&quot;郭靖&quot;</span>,<span class="string">&quot;黄蓉&quot;</span>);</span><br><span class="line">m.put(<span class="string">&quot;韦小宝&quot;</span>,<span class="string">&quot;木健平&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> m.put(<span class="string">&quot;韦小宝&quot;</span>,<span class="string">&quot;双儿&quot;</span>);</span><br><span class="line">System.out.println(value);<span class="comment">//木健平</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h2 id="遍历方式"><a href="#遍历方式" class="headerlink" title="遍历方式"></a>遍历方式</h2><h3 id="方式一：键找值"><a href="#方式一：键找值" class="headerlink" title="方式一：键找值"></a>方式一：键找值</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Map集合的第一种遍历方式</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1、创建Map集合对象</span></span><br><span class="line">Map&lt;String ,String&gt; m = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">//2、添加元素</span></span><br><span class="line">m.put(<span class="string">&quot;郭靖&quot;</span>,<span class="string">&quot;黄蓉&quot;</span>);</span><br><span class="line">m.put(<span class="string">&quot;韦小宝&quot;</span>,<span class="string">&quot;木健平&quot;</span>);</span><br><span class="line">m.put(<span class="string">&quot;欧阳克&quot;</span>,<span class="string">&quot;黄蓉&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//3、通过键找值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3.1、获取所有的键，把这些键放到一个单列集合当中</span></span><br><span class="line">Set&lt;String&gt; keys = map.keySet();</span><br><span class="line"><span class="comment">//3.2、遍历每一个集合，得到一个键</span></span><br><span class="line"><span class="keyword">for</span>(String key : keys) &#123;</span><br><span class="line">    <span class="comment">//3.3、利用map集合中的键获取对应的值 get</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> map.get(key);</span><br><span class="line">    System.out.println(key + <span class="string">&quot;=&quot;</span> + value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="方式二：键值对遍历"><a href="#方式二：键值对遍历" class="headerlink" title="方式二：键值对遍历"></a>方式二：键值对遍历</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//上面的12步都一样就不写了</span></span><br><span class="line"><span class="comment">//3、Map集合的第二种遍历方式</span></span><br><span class="line"><span class="comment">//通过键值对对象进行遍历</span></span><br><span class="line"><span class="comment">//3.1、通过一个方法获取所有的键值对对象，返回一个Set集合</span></span><br><span class="line">Set&lt;Map.Entry&lt;String, String&gt;&gt; entries = map.entrySet();</span><br><span class="line"><span class="comment">//3.2、遍历entries这个集合，去得到里面的每一个键值对对象</span></span><br><span class="line"><span class="keyword">for</span>(Map.Entry&lt;String, String&gt; entry : entries)&#123;</span><br><span class="line">    <span class="comment">//3.3、利用entry调用get方法获取键和值</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> entry.getKey();</span><br><span class="line">    <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> entry.getValue();</span><br><span class="line">    System.out.println(key + <span class="string">&quot;=&quot;</span> + value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="方式三：lambda表达式"><a href="#方式三：lambda表达式" class="headerlink" title="方式三：lambda表达式"></a>方式三：lambda表达式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//3.利用lambda表达式进行遍历</span></span><br><span class="line"><span class="comment">//底层：</span></span><br><span class="line"><span class="comment">//forEach其实就是利用第二种方式进行遍历，依次得到每一个键和值</span></span><br><span class="line"><span class="comment">//再调用</span></span><br><span class="line">map.forEach((key, value) -&gt; System.out.println(key + <span class="string">&quot;=&quot;</span> + value));</span><br></pre></td></tr></table></figure><h1 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a>HashMap</h1><h2 id="特点-1"><a href="#特点-1" class="headerlink" title="特点"></a>特点</h2><p>1、HashMap是Map里面的一个实现类。<br>2、没有额外需要学习的特有方法，直接使用Map里面的方法就可以了。<br>3、特点都是由键决定的：<span class='p red'>无序、不重复、无索引</span>，跟值没有任何关系<br>4、HashMap跟HashSet底层原理是一模一样的，都是哈希表结构，详细请看《HashSet、LinkedHashSet底层》</p><p><em>HashMap底层是哈希表结构的</em>依赖hashCode方法和equals方法保证键的唯一<br>*如果键存储的是自定义对象，需要重写hashCode和equals方法<br> 如果值存储自定义对象，不需要重写hashCode和equals方法</p><h1 id="LinkedHashMap"><a href="#LinkedHashMap" class="headerlink" title="LinkedHashMap"></a>LinkedHashMap</h1><h2 id="特点-2"><a href="#特点-2" class="headerlink" title="特点"></a>特点</h2><p>1、由键决定：有序、不重复、无索引<br>2、这里的有序指的是保证存储和取出的元素顺序一致<br>3、原理：底层数据结构是依然哈希表，只是每个键值对元素又额外的多了一个双链表的机制记录存储的顺序。</p><h1 id="TreeMap"><a href="#TreeMap" class="headerlink" title="TreeMap"></a>TreeMap</h1><h2 id="特点-3"><a href="#特点-3" class="headerlink" title="特点"></a>特点</h2><p>·TreeMap跟TreeSet底层原理一样，都是红黑树结构的<br>·由键决定特性：不重复、无索引、可排序<br>·可排序：对键进行排序。<br>·注意：默认按照键的从小到大进行排序，也可以自己规定键的排序规则</p><p>*代码书写两种排序规则<br>·实现Comparable接口，只当比较规则<br>·创建集合时传递Comparator比较器对象，指定比较规则(两种存在时第二种优先)</p><h2 id="小练习"><a href="#小练习" class="headerlink" title="小练习"></a>小练习</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    需求：</span></span><br><span class="line"><span class="comment">    字符串&quot;aababcabcdabcde&quot;</span></span><br><span class="line"><span class="comment">    请统计字符串每一个字符出现的次数，并按照以下格式输出</span></span><br><span class="line"><span class="comment">    输出结果:</span></span><br><span class="line"><span class="comment">    a(5)b(4)c(3)d(2)e(1)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        新的统计思想：利用map集合进行统计</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    如果题目中没有要求对结果进行排序，默认使用HashMap(效率最高)</span></span><br><span class="line"><span class="comment">    如果题目中要求对结果进行排序，请使用TreeMap，因为只有它可以实现自定义排序</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    键：表示要统计的内容</span></span><br><span class="line"><span class="comment">    值：表示次数</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1、定义字符串</span></span><br><span class="line"><span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;aababcabcdabcde&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2、创建集合</span></span><br><span class="line">TreeMap&lt;Character, Integer&gt; tm = <span class="keyword">new</span> <span class="title class_">TreeMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">//3、遍历字符串得到里面的每一个字符</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; s.length(); i++) &#123;</span><br><span class="line">    <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> s.charAt(i);</span><br><span class="line">    <span class="comment">//拿着c到集合中判断是否存在</span></span><br><span class="line">    <span class="comment">//存在，表示当前字符又出现了一次</span></span><br><span class="line">    <span class="comment">//不存在。表示当前字符是第一次出现</span></span><br><span class="line">    <span class="keyword">if</span>(tm.containsKey(c))&#123;</span><br><span class="line">        <span class="comment">//存在</span></span><br><span class="line">        <span class="comment">//先把已经出现的次数拿出来</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> tm.get(c);</span><br><span class="line">        <span class="comment">//当前字符又出现了一次</span></span><br><span class="line">        count++;</span><br><span class="line">        <span class="comment">//把自增之后的结果再添加到集合当中</span></span><br><span class="line">        tm.put(c,count);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//不存在</span></span><br><span class="line">        tm.put(c,<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//4遍历集合，并按照指定的格式进行拼接</span></span><br><span class="line"><span class="comment">//a(5)b(4)c(3)d(2)e(1)</span></span><br><span class="line"><span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line"></span><br><span class="line">tm.forEach((key, value) -&gt; sb.append(key).append(<span class="string">&quot;(&quot;</span>).append(value).append(<span class="string">&quot;)&quot;</span>));</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">Map底层详解,暑假快乐o(*￣▽￣*)ブ</summary>
    
    
    
    <category term="JavaSe" scheme="http://love.sunnyherry.cn/categories/JavaSe/"/>
    
    
    <category term="JavaSe" scheme="http://love.sunnyherry.cn/tags/JavaSe/"/>
    
  </entry>
  
  <entry>
    <title>HashSet、LinkedHashSet底层</title>
    <link href="http://love.sunnyherry.cn/_posts/53294.html"/>
    <id>http://love.sunnyherry.cn/_posts/53294.html</id>
    <published>2023-07-07T21:11:20.000Z</published>
    <updated>2023-08-06T14:11:38.837Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Set系列集合"><a href="#Set系列集合" class="headerlink" title="Set系列集合"></a>Set系列集合</h1><p>1、Set系列集合的特点<br>·无序、不重复、无索引<br>·Set集合的方法上基本上与Collection(所有集合的顶级父类)的API一致</p><p>2、Set集合的实现类特点<br>·HashSet：无序、不重复、无索引<br>·LinkedHashSet：有序、不重复、无索引<br>·TreeSet：可排序、不重复、无索引</p><h1 id="哈希表"><a href="#哈希表" class="headerlink" title="哈希表"></a>哈希表</h1><p>·JDK8之前：<span class='p red'>数组+链表</span><br>·JDK8之后：<span class='p red'>数组+链表+红黑树</span></p><h2 id="哈希值"><a href="#哈希值" class="headerlink" title="哈希值"></a>哈希值</h2><p>·根据hashCode方法算出来的int类型的整数，计算公式：（数组长度 - 1） &amp; 哈希值<br>·该方法定义在Object类中，所有对象都可以调用，默认使用地址值进行计算<br>·与一般情况下，会重写hashCode方法，利用对象内部的属性值计算哈希值</p><p>对象的哈希值特点<br>·如果没有重写hashCode方法，不同对象计算出的哈希值是不同的<br>·如果已经重写hashCode方法，不同对象只要属性值相同，计算出的哈希值就是一样的<br>·在小部分情况下，不同的属性值或者不同的地址值计算出来的哈希值也有可能一样(哈希碰撞，这名字真帅哈哈)</p><h1 id="HashSet"><a href="#HashSet" class="headerlink" title="HashSet"></a>HashSet</h1><h2 id="底层原理"><a href="#底层原理" class="headerlink" title="底层原理"></a>底层原理</h2><p>·HashSet：无序、不重复、无索引<br>·HashSet集合底层采取哈希表存储数据<br>·哈希表是一种对于增删改查数据性能都较好的结构</p><h2 id="添加元素底层原理"><a href="#添加元素底层原理" class="headerlink" title="添加元素底层原理"></a>添加元素底层原理</h2><p>1、创建一个默认长度16，默认加载因子(扩容)0.75的数组，数组名table<br>2、根据元素的哈希值跟数组长度计算出应存入的位置<br>3、判断当前位置是否为null，如果是则直接存入<br>4、如果位置不为null，表示有元素，则调用equals方法比较属性值<br>5、如果一样则不存(Set不重复)，不一样则存入数据，形成链表<br><span class='p red'>JDK8以前：新元素存入数组，老元素挂在新元素的下面</span>，<br><span class='p red'>JDK8以后：新元素直接挂在老元素下面</span></p><p><em><span class='p red'>当添加元素里面有16*0.75=12的元素之后就会扩容，扩容为原来的两倍</span></em><span class='p red'>当链表的长度大于8并且数组长度大于等于64的时候，链表就会变成红黑树进行存储</span><br><em>三中结构(数组、链表、红黑树)可以同时存在</em><span class='p red'>如果集合中存储的是自定义对象，必须重写hashCode和equals方法</span></p><h2 id="HashSet的三个问题"><a href="#HashSet的三个问题" class="headerlink" title="HashSet的三个问题"></a>HashSet的三个问题</h2><p>HashSet为什么存和取的顺序不一样？<br>因为存值的时候不是按照顺序存的，放到链表的位置是不固定的，红黑树的方式存储也是一样不固定的。而取是按照顺序取的。无序是由于哈希值影响的</p><p>HashSet为什么没有索引？<br>还是因为有链表和红黑树的存在，1索引下可能是一个链表或者红黑树，1索引下的那么多值都是1索引就没有意义了，所以干脆不设索引</p><p>HashSet是利用什么机制保证数据去重的？<br>利用HashCode方法和equals方法，HashCode获取哈希值，确定当前元素在数组的哪个位置，再利用equals比较数据的属性值就可以判断值是否相同。<br>如果存储的是自定义对象必须重写这两个方法，不然不能实现去重的效果！！！</p><h1 id="LinkedHashSet-HashSet的子类"><a href="#LinkedHashSet-HashSet的子类" class="headerlink" title="LinkedHashSet(HashSet的子类)"></a>LinkedHashSet(HashSet的子类)</h1><h2 id="底层原理-1"><a href="#底层原理-1" class="headerlink" title="底层原理"></a>底层原理</h2><p>·LinkedHashSet：<span class='p red'>有序</span> 、不重复、无索引<br>·这里的有序指的是保证存储和取出的元素顺序一致<br>·原理：<span class='p red'>底层数据结构依然是哈希表，只是每个元素又额外多了一个双链表的机制记录存储的顺序，于是就可以保持存储一致，遍历的是双向链表</span></p><h1 id="TreeSet"><a href="#TreeSet" class="headerlink" title="TreeSet"></a>TreeSet</h1><h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><p>·不重复、无索引、<span class='p red'>可排序</span><br>·可可排序：按照元素的默认规则(由小到大)排序<br>·TressSet集合底层是基于<span class='p red'>红黑树的数据结构</span>实现排序的，增删改查性能都较好</p><h2 id="默认排序规则"><a href="#默认排序规则" class="headerlink" title="默认排序规则"></a>默认排序规则</h2><p>·对于数值类型：Integer，Double，默认按照从小到大的顺序进行排序<br>·对于字符、字符串类型：按照字符在ASCII码中的数字升序进行排序，多个字符就是从左到右依次比较，只要比对出来就结束不会再看后面。</p><h2 id="自定义对象排序"><a href="#自定义对象排序" class="headerlink" title="自定义对象排序"></a>自定义对象排序</h2><h3 id="方式一-自然排序"><a href="#方式一-自然排序" class="headerlink" title="方式一(自然排序)"></a>方式一(自然排序)</h3><span class='p red'>自定义类要继承Comparable接口，泛型就是自定义类</span><p>之后就重写接口中的方法，编写我们自定义排序的代码<br>距离：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Student o)</span>&#123;</span><br><span class="line">    <span class="comment">//指定排序的规则</span></span><br><span class="line">    <span class="comment">//只看年龄。我想要按照年龄的升序进行排序</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.getAge() - o.getAge();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        this:表示当前要添加的元素</span></span><br><span class="line"><span class="comment">        o:表示已经在红黑树里面的元素</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        返回值：</span></span><br><span class="line"><span class="comment">            负数：认为要添加的元素是小的，存左边</span></span><br><span class="line"><span class="comment">            正数：认为要添加的元素是大的，存右边</span></span><br><span class="line"><span class="comment">            0：认为要添加的元素已经存在，直接舍弃不存</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="方式二-Comparator比较器"><a href="#方式二-Comparator比较器" class="headerlink" title="方式二(Comparator比较器)"></a>方式二(Comparator比较器)<span class='p red'></span></h3><span class='p red'>比较器排序：创建TreeSet对象的时候，传递比较器Comparator制定规则</span><p>举例：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在创建对象的时候就可以使用函数式接口把Comparator实现出来</span></span><br><span class="line">TreeSet&lt;String&gt; ts = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;String&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(String o1, String o2)</span> &#123;</span><br><span class="line">        <span class="comment">//自定义规则</span></span><br><span class="line">        <span class="comment">//按照长度排序</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> o1.length() - o2.length();</span><br><span class="line">        <span class="comment">//如果一样长则按照首字母排序</span></span><br><span class="line">        i = i == <span class="number">0</span> ? o1.compareTo(o2) : i;</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;) </span><br><span class="line"></span><br><span class="line"><span class="comment">//使用lamba表达式化简</span></span><br><span class="line">    TreeSet&lt;String&gt; ts = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;&gt;((o1 , o2) -&gt; &#123;</span><br><span class="line">        <span class="comment">//自定义规则</span></span><br><span class="line">        <span class="comment">//按照长度排序</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> o1.length() - o2.length();</span><br><span class="line">        <span class="comment">//如果一样长则按照首字母排序</span></span><br><span class="line">        i = i == <span class="number">0</span> ? o1.compareTo(o2) : i;</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure></p><h1 id="单列集合总结"><a href="#单列集合总结" class="headerlink" title="单列集合总结"></a>单列集合总结</h1><p>1、如果想要集合中的元素可重复<br>·用ArrayList集合，基于数组的。(用的最多)</p><p>2、如果想要集合中的元素可重复，而且当前的增删改查明显多于查询<br>·用LinkedList集合，基于链表的</p><p>3、如果想对集合中的元素去重<br>·用HashSet集合，基于哈希表的(用的最多)</p><p>4、如果想对集合中的元素去重，而且保证<span class='p red'>存储顺序</span><br>·用LinkedHashSet集合，基于哈希表和双链表，效率低于HashSet</p><p>5、如果相对集合中的元素进行<span class='p red'>排序</span><br>·用TreeSet集合，基于红黑树，后续也可以用List集合实现排序。</p>]]></content>
    
    
    <summary type="html">Set底层详解,暑假快乐o(*￣▽￣*)ブ</summary>
    
    
    
    <category term="JavaSe" scheme="http://love.sunnyherry.cn/categories/JavaSe/"/>
    
    
    <category term="JavaSe" scheme="http://love.sunnyherry.cn/tags/JavaSe/"/>
    
  </entry>
  
  <entry>
    <title>谷粒学苑(Day9-10)</title>
    <link href="http://love.sunnyherry.cn/_posts/16480.html"/>
    <id>http://love.sunnyherry.cn/_posts/16480.html</id>
    <published>2023-06-23T21:11:20.000Z</published>
    <updated>2023-08-06T14:11:38.837Z</updated>
    
    <content type="html"><![CDATA[<h1 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h1><p>小插曲：<br>真的气死我了(╯▔皿▔)╯<br>我在解决加载问题的时候居然把target里面的代码删干净了，我都懵逼了我以为ctrl+z能拯救一切，但是回不来了，而且最重要的是回收站也没有，很奇怪。<br>我都快气死了，真的没办法了只能找来老师的源码，我那些注释都没有了，还好我在博客上记录了一些还能抢救。再次见识到了备份的重要性还有git仓库的重要性。<br>下次注意，不对，没有下一次！</p><h1 id="课程确认发布"><a href="#课程确认发布" class="headerlink" title="课程确认发布"></a>课程确认发布</h1><h2 id="课程信息确认-后端"><a href="#课程信息确认-后端" class="headerlink" title="课程信息确认(后端)"></a>课程信息确认(后端)</h2><p>老师把它放在第八天了，但是还是都放在第九天吧，这个和第九天的内容紧密型强</p><h3 id="自写sql查询课程"><a href="#自写sql查询课程" class="headerlink" title="自写sql查询课程"></a>自写sql查询课程</h3><p>由于课程信息确认中信息的回显只是多张表中的其它一些值，所以写sql语句应该是最好的办法实现的。<br>只需要创建一个封装这些数据的Vo类就可以了，不需要再贼多涨表还要在对应的Service做什么查询再拷贝进Vo类，麻烦死啦。</p><span class='p red'>多表连接查询的三种方式</span><p>1、<span class='p red'>内连接：是指多张表内有相同字段名称，表与表内部之间有直接关系</span><br>2、<span class='p red'>左外连接： 是指位于左边的表可以选择性查出全部想要的字段，位于右边的需要加条件来实现关联关系，如果关系不成立就查不出来。</span><br>3、<span class='p red'>右外连接： 和左外连接相反，左边的是关联表</span></p><p>下面给出例子(实际需求基本上都是左外连接查询)<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ec.id,ec.title,ec.price,ec.lesson_num <span class="keyword">as</span> lessonNum,ec.cover,</span><br><span class="line">       et.name <span class="keyword">as</span> teacherName,</span><br><span class="line">       es1.title <span class="keyword">as</span> subjectLevelOne,</span><br><span class="line">       es2.title <span class="keyword">as</span> subjectLevelTwo</span><br><span class="line"><span class="keyword">from</span> edu_course ec <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> edu_course_description ecd <span class="keyword">on</span> ec.id <span class="operator">=</span> ecd.id</span><br><span class="line">                   <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> edu_teacher et <span class="keyword">on</span> ec.teacher_id <span class="operator">=</span> et.id</span><br><span class="line">                   <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> edu_subject es1 <span class="keyword">on</span> ec.subject_parent_id <span class="operator">=</span> es1.id</span><br><span class="line">                   <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> edu_subject es2 <span class="keyword">on</span> ec.subject_id <span class="operator">=</span> es2.id</span><br><span class="line"><span class="keyword">where</span> ec.id <span class="operator">=</span> <span class="string">&#x27;1670024852233478146&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br>接着就可以在mpper层里面添加的接口</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.eduservice.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.eduservice.entity.EduCourse;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.eduservice.entity.vo.CoursePublishVo;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * 课程 Mapper 接口</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> testjava</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2020-03-02</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EduCourseMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;EduCourse&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> CoursePublishVo <span class="title function_">getPublishCourseInfo</span><span class="params">(String courseId)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在映射文件中写sql语句<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.atguigu.eduservice.mapper.EduCourseMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--sql语句：根据课程id查询课程确认信息--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getPublishCourseInfo&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.atguigu.eduservice.entity.vo.CoursePublishVo&quot;</span>&gt;</span></span><br><span class="line">        SELECT ec.id,ec.title,ec.price,ec.lesson_num AS lessonNum,ec.cover,</span><br><span class="line">               et.name AS teacherName,</span><br><span class="line">               es1.title AS subjectLevelOne,</span><br><span class="line">               es2.title AS subjectLevelTwo</span><br><span class="line">        FROM edu_course ec LEFT OUTER JOIN edu_course_description ecd ON ec.id=ecd.id</span><br><span class="line">                           LEFT OUTER JOIN edu_teacher et ON ec.teacher_id=et.id</span><br><span class="line">                           LEFT OUTER JOIN edu_subject es1 ON ec.subject_parent_id=es1.id</span><br><span class="line">                   LEFT OUTER JOIN edu_subject es2 ON ec.subject_id=es2.id</span><br><span class="line">        WHERE ec.id=#&#123;courseId&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p>在controller层写接口<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据课程id查询课程确认信息</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;getPublishCourseInfo/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">getPublishCourseInfo</span><span class="params">(<span class="meta">@PathVariable</span> String id)</span> &#123;</span><br><span class="line">        <span class="type">CoursePublishVo</span> <span class="variable">coursePublishVo</span> <span class="operator">=</span> courseService.publishCourseInfo(id);</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">&quot;publishCourse&quot;</span>,coursePublishVo);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p><h3 id="加载报错问题"><a href="#加载报错问题" class="headerlink" title="加载报错问题"></a>加载报错问题</h3><span class='p red'>问题就出现在maven加载忽略了在java包下的xml文件，导致程序找不到我们写的sql语句. maven加载的时候，把java文件夹里面.java后缀的文件进行编译，如果是其它类型的文件则不会加载。</span><p>解决方式:<br>1、复制xml到target目录中<br>2、把xml文件放到resources目录下<br>3、推荐使用，通过配置实现，修改如下。<br>    (1)pom.xml 在guli_edu的pom中配置如下节点<br>    (2)项目application.properties 在Spring Boot配置文件中添加配置<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 项目打包时会将java目录中的*.xml文件也进行打包 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><br><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus.mapper-locations</span>=<span class="string">classpath:com/atguigu/eduservice/mapper/xml/*.xml</span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    
    <summary type="html">课程最终发布(步骤条第三步)以及阿里云点播上传视频</summary>
    
    
    
    <category term="前端" scheme="http://love.sunnyherry.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="项目" scheme="http://love.sunnyherry.cn/tags/%E9%A1%B9%E7%9B%AE/"/>
    
  </entry>
  
  <entry>
    <title>C++期末大作业(学生管理系统)</title>
    <link href="http://love.sunnyherry.cn/_posts/16585.html"/>
    <id>http://love.sunnyherry.cn/_posts/16585.html</id>
    <published>2023-06-19T21:11:20.000Z</published>
    <updated>2023-08-06T14:11:38.837Z</updated>
    
    <content type="html"><![CDATA[<h1 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h1><p>这一次是大一最后的程序实验课啦，基本上是对大一的一个检测自我水平的大作业吧。用C++实现一个学生信息管理系统。虽然我在大一上的时候用Java代码跟着黑马视频已经写过一个学生信息管理系统了，基本上也是增删改查操作，现在来看增删改查操作真的已经好简单了对于我来说哈哈哈。但是这一次不一样的地方在于要把学生信息写回.txt文本文件，相当于把存在内存的数据写入硬盘里面，实际上就是一个io流的操作嘛，之前我用的不太熟现在刚好可以拿来练手。正所谓语言不互通但是逻辑还是一样的。大概写了几天吧，我就提前给老师答辩了，还不错85分。主要是我按照了之前的理解先把学生对象存到容器中再进行文本文件的读写操作，但是老师的要求的是直接对文本文件进行操作，这个就是C++的特性了，要用指针对字节一个一个操作，真的很痛苦啊而且我也不太熟悉C++的底层，那就算了吧哈哈哈。以后可能就不写C++代码咯，也可能后面Java变成不主流了那只能用C++混口饭吃了，那么就记录一下这一次的C++期末大作业吧！大二就是我的领域啦！Java课程我来咯o(<em>￣▽￣</em>)ブ</p><h1 id="源代码实现"><a href="#源代码实现" class="headerlink" title="源代码实现"></a>源代码实现</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;app.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span><span class="comment">//list容器类</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;locale&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;fstream&gt;</span><span class="comment">//包含了读写文件两种，支持数据的输入和输出操作</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//初始菜单函数接口</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">menu</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\n                             学生信息管理系统\n\n&quot;</span></span><br><span class="line">&lt;&lt; <span class="string">&quot;*******************************************************************************\n\n&quot;</span></span><br><span class="line">&lt;&lt; <span class="string">&quot;\t\t\t\t0.退出系统\n\n&quot;</span></span><br><span class="line">&lt;&lt; <span class="string">&quot;\t\t\t\t1.录入学生信息\n\n&quot;</span></span><br><span class="line">&lt;&lt; <span class="string">&quot;\t\t\t\t2.导出学生信息\n\n&quot;</span></span><br><span class="line">&lt;&lt; <span class="string">&quot;\t\t\t\t3.修改学生信息\n\n&quot;</span></span><br><span class="line">&lt;&lt; <span class="string">&quot;\t\t\t\t4.删除学生信息\n\n&quot;</span></span><br><span class="line">&lt;&lt; <span class="string">&quot;\t\t\t\t5.查询学生信息\n\n&quot;</span></span><br><span class="line">&lt;&lt; <span class="string">&quot;*******************************************************************************\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//定义学生类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">string id;<span class="comment">//学号</span></span><br><span class="line">string name;<span class="comment">//学生姓名</span></span><br><span class="line">string sex;<span class="comment">//性别</span></span><br><span class="line"><span class="type">int</span> age;<span class="comment">//年龄</span></span><br><span class="line">string adder;<span class="comment">//地址</span></span><br><span class="line">string profession;<span class="comment">//专业名称</span></span><br><span class="line"><span class="type">int</span> num_delete;<span class="comment">//逻辑删除 1表示删除 </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="comment">//无参构造方法</span></span><br><span class="line"><span class="built_in">Student</span>() &#123;</span><br><span class="line">num_delete = <span class="number">0</span>;<span class="comment">//定义逻辑删除的默认值为0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 有参构造方法</span></span><br><span class="line"><span class="built_in">Student</span>(string studentId, string studentName, string studentSex,</span><br><span class="line"><span class="type">int</span> studentAge, string studentAdder, string studentProfession) &#123;</span><br><span class="line">id = studentId;</span><br><span class="line">name = studentName;</span><br><span class="line">sex = studentSex;</span><br><span class="line">age = studentAge;</span><br><span class="line">adder = studentAdder;</span><br><span class="line">profession = studentProfession;</span><br><span class="line">num_delete = <span class="number">0</span>;<span class="comment">//定义逻辑删除的默认值为0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 匹配函数，判断当前学生对象是否匹配关键字</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">matchesKeyword</span><span class="params">(<span class="type">const</span> string&amp; keyword)</span> <span class="type">const</span> </span>&#123;</span><br><span class="line"><span class="comment">// 在此处实现匹配逻辑，假设关键字与姓名、性别和学号都进行匹配</span></span><br><span class="line"><span class="type">bool</span> idMatch = id.<span class="built_in">find</span>(keyword) != string::npos;</span><br><span class="line"><span class="type">bool</span> nameMatch = name.<span class="built_in">find</span>(keyword) != string::npos;</span><br><span class="line"><span class="type">bool</span> sexMatch = sex.<span class="built_in">find</span>(keyword) != string::npos;</span><br><span class="line"><span class="type">bool</span> adderMatch = adder.<span class="built_in">find</span>(keyword) != string::npos;</span><br><span class="line"><span class="type">bool</span> professionMatch = profession.<span class="built_in">find</span>(keyword) != string::npos;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以根据实际需求确定匹配条件，这里假设只要有一个字段匹配即可</span></span><br><span class="line"><span class="keyword">return</span> nameMatch || sexMatch || idMatch || adderMatch || professionMatch;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Getter 方法</span></span><br><span class="line"><span class="function">std::string <span class="title">getId</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">std::string <span class="title">getName</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">std::string <span class="title">getSex</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> sex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getAge</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">std::string <span class="title">getAdder</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> adder;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">std::string <span class="title">getProfession</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> profession;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getNumDelete</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> num_delete;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Setter 方法</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setId</span><span class="params">(<span class="type">const</span> string&amp; studentId)</span> </span>&#123;</span><br><span class="line">id = studentId;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setName</span><span class="params">(<span class="type">const</span> string&amp; studentName)</span> </span>&#123;</span><br><span class="line">name = studentName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setSex</span><span class="params">(<span class="type">const</span> string&amp; studentSex)</span> </span>&#123;</span><br><span class="line">sex = studentSex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setAge</span><span class="params">(<span class="type">int</span> studentAge)</span> </span>&#123;</span><br><span class="line">age = studentAge;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setAdder</span><span class="params">(<span class="type">const</span> string&amp; studentAdder)</span> </span>&#123;</span><br><span class="line">adder = studentAdder;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setProfession</span><span class="params">(<span class="type">const</span> string&amp; studentProfession)</span> </span>&#123;</span><br><span class="line">profession = studentProfession;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setNumDelete</span><span class="params">(<span class="type">int</span> deleteStatus)</span> </span>&#123;</span><br><span class="line">num_delete = deleteStatus;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//创建list容器存储学生类数据</span></span><br><span class="line">list&lt;Student&gt; stulist;<span class="comment">//list容器</span></span><br><span class="line">list&lt;Student&gt;::iterator stu;<span class="comment">//定义迭代器stu用来遍历list容器</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//读取文本文件信息</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="function">ifstream <span class="title">inputFile</span><span class="params">(<span class="string">&quot;students.txt&quot;</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取文件数据</span></span><br><span class="line"></span><br><span class="line">std::string line;</span><br><span class="line"><span class="keyword">while</span> (<span class="built_in">getline</span>(inputFile, line)) &#123;</span><br><span class="line">Student student;</span><br><span class="line"><span class="function">std::istringstream <span class="title">iss</span><span class="params">(line)</span></span>;</span><br><span class="line">std::string field;</span><br><span class="line"></span><br><span class="line"><span class="built_in">getline</span>(iss, field, <span class="string">&#x27;,&#x27;</span>); <span class="comment">// 读取学号字段</span></span><br><span class="line">student.<span class="built_in">setId</span>(field);</span><br><span class="line"></span><br><span class="line"><span class="built_in">getline</span>(iss, field, <span class="string">&#x27;,&#x27;</span>); <span class="comment">// 读取姓名字段</span></span><br><span class="line">student.<span class="built_in">setName</span>(field);</span><br><span class="line"></span><br><span class="line"><span class="built_in">getline</span>(iss, field, <span class="string">&#x27;,&#x27;</span>); <span class="comment">// 读取性别字段</span></span><br><span class="line">student.<span class="built_in">setSex</span>(field);</span><br><span class="line"></span><br><span class="line"><span class="built_in">getline</span>(iss, field, <span class="string">&#x27;,&#x27;</span>); <span class="comment">// 读取年龄字段</span></span><br><span class="line">student.<span class="built_in">setAge</span>(<span class="built_in">stoi</span>(field));</span><br><span class="line"></span><br><span class="line"><span class="built_in">getline</span>(iss, field, <span class="string">&#x27;,&#x27;</span>); <span class="comment">// 读取地址字段</span></span><br><span class="line">student.<span class="built_in">setAdder</span>(field);</span><br><span class="line"></span><br><span class="line"><span class="built_in">getline</span>(iss, field); <span class="comment">// 读取专业名称字段</span></span><br><span class="line">student.<span class="built_in">setProfession</span>(field);</span><br><span class="line"></span><br><span class="line">stulist.<span class="built_in">push_back</span>(student);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 关闭文件</span></span><br><span class="line">inputFile.<span class="built_in">close</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//检查学生输入是否合理的函数，抽取</span></span><br><span class="line"><span class="function">Student <span class="title">checkStudent</span><span class="params">(string name,string sex,<span class="type">int</span> age,string adder,string profession)</span> </span>&#123;</span><br><span class="line">string ids;</span><br><span class="line">string a, b, c, d,e;</span><br><span class="line"><span class="type">bool</span> validInput = <span class="literal">false</span>;</span><br><span class="line"><span class="type">bool</span> validSex = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;是否想添加姓名？(是/否)&quot;</span>;</span><br><span class="line">cin &gt;&gt; a;</span><br><span class="line"><span class="keyword">if</span> (a == <span class="string">&quot;是&quot;</span>) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入姓名:&quot;</span> &lt;&lt; endl;</span><br><span class="line">cin &gt;&gt; name;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;是否想添加性别？(是/否)&quot;</span>;</span><br><span class="line">cin &gt;&gt; b;</span><br><span class="line"><span class="keyword">if</span> (b == <span class="string">&quot;是&quot;</span>) &#123;</span><br><span class="line"><span class="keyword">while</span> (!validSex) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入性别(男/女):&quot;</span> &lt;&lt; endl;</span><br><span class="line">cin &gt;&gt; sex;</span><br><span class="line"><span class="keyword">if</span> (sex == <span class="string">&quot;男&quot;</span> || sex == <span class="string">&quot;女&quot;</span>) &#123;</span><br><span class="line">validSex = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;性别输入不合理,重新输入&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;是否想添加年龄？(是/否)&quot;</span>;</span><br><span class="line">cin &gt;&gt; c;</span><br><span class="line"><span class="keyword">if</span> (c == <span class="string">&quot;是&quot;</span>) &#123;</span><br><span class="line"><span class="keyword">while</span> (!validInput) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入年龄:&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">if</span> (cin &gt;&gt; age) &#123;</span><br><span class="line"><span class="keyword">if</span> (age &gt; <span class="number">0</span> &amp;&amp; age &lt; <span class="number">100</span>) &#123;</span><br><span class="line">validInput = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入一个合法的年龄&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;输入无效，请输入一个有效的数字年龄。&quot;</span> &lt;&lt; endl;</span><br><span class="line">cin.<span class="built_in">clear</span>();  <span class="comment">// 清除错误标志</span></span><br><span class="line">cin.<span class="built_in">ignore</span>(numeric_limits&lt;streamsize&gt;::<span class="built_in">max</span>(), <span class="string">&#x27;\n&#x27;</span>);  <span class="comment">// 忽略当前输入行</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;是否想添加地址？(是/否)&quot;</span>;</span><br><span class="line">cin &gt;&gt; d;</span><br><span class="line"><span class="keyword">if</span> (d == <span class="string">&quot;是&quot;</span>) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入地址:&quot;</span> &lt;&lt; endl;</span><br><span class="line">cin &gt;&gt; adder;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;是否想添加专业名称？(是/否)&quot;</span>;</span><br><span class="line">cin &gt;&gt; e;</span><br><span class="line"><span class="keyword">if</span> (e == <span class="string">&quot;是&quot;</span>) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入专业名称:&quot;</span> &lt;&lt; endl;</span><br><span class="line">cin &gt;&gt; profession;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Student <span class="title">data</span><span class="params">(ids, name, sex, age, adder, profession)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//录入学生信息函数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">inputStudent</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">//录入信息的做法就是不断的创造新的节点，然后接到容器的尾部</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入学生信息\n&quot;</span>;</span><br><span class="line">string ids, name, sex, adder, profession;</span><br><span class="line"><span class="type">int</span> age = <span class="number">0</span>;</span><br><span class="line"><span class="type">bool</span> validInput = <span class="literal">false</span>;</span><br><span class="line"><span class="type">bool</span> validId = <span class="literal">false</span>;</span><br><span class="line"><span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (!validId) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入必选学号:(只可尝试三次)&quot;</span> &lt;&lt; endl;</span><br><span class="line">cin &gt;&gt; ids;</span><br><span class="line"><span class="comment">//对录入的数据进行判断</span></span><br><span class="line">string yearString = ids.<span class="built_in">substr</span>(<span class="number">0</span>, <span class="number">4</span>);</span><br><span class="line"><span class="comment">//字符串转Int类型</span></span><br><span class="line"><span class="type">int</span> year = <span class="built_in">stoi</span>(yearString);</span><br><span class="line"><span class="keyword">if</span> (year &gt;= <span class="number">1935</span> &amp;&amp; year &lt;= <span class="number">2024</span> &amp;&amp; ids.<span class="built_in">length</span>() == <span class="number">12</span>) &#123;</span><br><span class="line">validId = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;输入无效，请输入符合规定的学号(12位数字并且数字含义正确)。&quot;</span> &lt;&lt; endl;</span><br><span class="line">i++;</span><br><span class="line"><span class="keyword">if</span> (i == <span class="number">3</span>) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;输入学号多次失败，自动返回系统界面&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//遍历list容器查看学号是否已经存在</span></span><br><span class="line"><span class="keyword">for</span> (stu = stulist.<span class="built_in">begin</span>(); stu != stulist.<span class="built_in">end</span>(); stu++) &#123;</span><br><span class="line"><span class="keyword">if</span> (ids == (*stu).<span class="built_in">getId</span>()) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;学号已存在，请重新回初始界面选择&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//调用抽取出来的函数直接添加</span></span><br><span class="line">Student student = <span class="built_in">checkStudent</span>(name, sex, age, adder, profession);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function">Student <span class="title">data</span><span class="params">(ids, student.getName(), student.getSex(), student.getAge(), student.getAdder(), student.getProfession())</span></span>;</span><br><span class="line"><span class="comment">//存入list容器中(在容器尾部插入元素)</span></span><br><span class="line">stulist.<span class="built_in">push_back</span>(data);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;添加信息成功&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//导出学生信息函数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">outputStudent</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">// 打开文件</span></span><br><span class="line"><span class="function">ofstream <span class="title">outputFile1</span><span class="params">(<span class="string">&quot;students.txt&quot;</span>)</span></span>;</span><br><span class="line"><span class="function">ofstream <span class="title">outputFile2</span><span class="params">(<span class="string">&quot;DeleteStudents.txt&quot;</span>)</span></span>;</span><br><span class="line"><span class="comment">//遍历list容器，获取学生对象</span></span><br><span class="line"><span class="keyword">for</span> (stu = stulist.<span class="built_in">begin</span>(); stu != stulist.<span class="built_in">end</span>(); stu++) &#123;</span><br><span class="line"><span class="keyword">if</span> (outputFile1.<span class="built_in">is_open</span>() &amp;&amp; outputFile2.<span class="built_in">is_open</span>()) &#123;</span><br><span class="line"><span class="keyword">if</span> ((*stu).<span class="built_in">getNumDelete</span>() != <span class="number">1</span>) &#123;</span><br><span class="line"><span class="comment">// 写入学生对象的数据到文件</span></span><br><span class="line">outputFile1 &lt;&lt; (*stu).<span class="built_in">getId</span>() &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; (*stu).<span class="built_in">getName</span>() &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; (*stu).<span class="built_in">getSex</span>()</span><br><span class="line">&lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; (*stu).<span class="built_in">getAge</span>() &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; (*stu).<span class="built_in">getAdder</span>() &lt;&lt; <span class="string">&quot;, &quot;</span> </span><br><span class="line">&lt;&lt; (*stu).<span class="built_in">getProfession</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;学生信息导出成功!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">// 写入学生对象的数据到文件</span></span><br><span class="line">outputFile2 &lt;&lt; (*stu).<span class="built_in">getId</span>() &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; (*stu).<span class="built_in">getName</span>() &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; (*stu).<span class="built_in">getSex</span>()</span><br><span class="line">&lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; (*stu).<span class="built_in">getAge</span>() &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; (*stu).<span class="built_in">getAdder</span>() &lt;&lt; <span class="string">&quot;, &quot;</span></span><br><span class="line">&lt;&lt; (*stu).<span class="built_in">getProfession</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;学生信息导出成功!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cerr &lt;&lt; <span class="string">&quot;无法打开文件&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 关闭文件</span></span><br><span class="line">outputFile1.<span class="built_in">close</span>();</span><br><span class="line">outputFile2.<span class="built_in">close</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 谓词函数，用于判断学号是否匹配</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">matchStudentId</span><span class="params">(<span class="type">const</span> Student&amp; student, <span class="type">const</span> std::string&amp; id)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> student.<span class="built_in">getId</span>() == id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//修改学生数据</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">updateStudent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">string strId, name, sex, adder, profession;</span><br><span class="line"><span class="type">int</span> age = <span class="number">0</span>;</span><br><span class="line"><span class="type">bool</span> found = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入需要修改信息的学生的学号：&quot;</span>;</span><br><span class="line">cin &gt;&gt; strId;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历容器，查找匹配的学生对象</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span>&amp; student : stulist) &#123;</span><br><span class="line"><span class="keyword">if</span> (student.<span class="built_in">getId</span>() == strId &amp;&amp; student.<span class="built_in">getNumDelete</span>() != <span class="number">1</span>) &#123;</span><br><span class="line">found = <span class="literal">true</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入你希望修改的学生信息：&quot;</span> &lt;&lt; endl;</span><br><span class="line">Student data = <span class="built_in">checkStudent</span>(name, sex, age, adder, profession);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 更新学生对象的数据</span></span><br><span class="line">student.<span class="built_in">setName</span>(data.<span class="built_in">getName</span>());</span><br><span class="line">student.<span class="built_in">setSex</span>(data.<span class="built_in">getSex</span>());</span><br><span class="line">student.<span class="built_in">setAge</span>(data.<span class="built_in">getAge</span>());</span><br><span class="line">student.<span class="built_in">setAdder</span>(data.<span class="built_in">getAdder</span>());</span><br><span class="line">student.<span class="built_in">setProfession</span>(data.<span class="built_in">getProfession</span>());</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (found) &#123;</span><br><span class="line"><span class="comment">// 打开文件并清空内容</span></span><br><span class="line"><span class="function">ofstream <span class="title">outputFile</span><span class="params">(<span class="string">&quot;students.txt&quot;</span>, ios::out | ios::trunc)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (outputFile.<span class="built_in">is_open</span>()) &#123;</span><br><span class="line"><span class="comment">// 将学生对象的数据写入文件</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span>&amp; student : stulist) &#123;</span><br><span class="line"><span class="keyword">if</span> (student.<span class="built_in">getNumDelete</span>() != <span class="number">1</span>) &#123;</span><br><span class="line">outputFile &lt;&lt; student.<span class="built_in">getId</span>() &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; student.<span class="built_in">getName</span>() &lt;&lt; <span class="string">&quot;, &quot;</span></span><br><span class="line">&lt;&lt; student.<span class="built_in">getSex</span>() &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; student.<span class="built_in">getAge</span>() &lt;&lt; <span class="string">&quot;, &quot;</span></span><br><span class="line">&lt;&lt; student.<span class="built_in">getAdder</span>() &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; student.<span class="built_in">getProfession</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;修改成功&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cerr &lt;&lt; <span class="string">&quot;无法打开文件&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 关闭文件</span></span><br><span class="line">outputFile.<span class="built_in">close</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;该学号不存在或输入错误，请选择添加学生信息或再次输入：&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;1.添加学生信息&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;2.再次输入修改学号&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;3.返回主菜单&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="type">int</span> choice;</span><br><span class="line">cin &gt;&gt; choice;</span><br><span class="line"><span class="keyword">switch</span> (choice) &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line"><span class="built_in">inputStudent</span>();</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line"><span class="built_in">updateStudent</span>();</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;自动回到初始界面\n&quot;</span>;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">deleteStudentPhysically</span><span class="params">(string id)</span> </span>&#123;</span><br><span class="line"><span class="function">ifstream <span class="title">inputFile</span><span class="params">(<span class="string">&quot;students.txt&quot;</span>)</span></span>;</span><br><span class="line">vector&lt;Student&gt; students;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取文件数据</span></span><br><span class="line"></span><br><span class="line">std::string line;</span><br><span class="line"><span class="keyword">while</span> (<span class="built_in">getline</span>(inputFile, line)) &#123;</span><br><span class="line">Student student;</span><br><span class="line"><span class="function">std::istringstream <span class="title">iss</span><span class="params">(line)</span></span>;</span><br><span class="line">std::string field;</span><br><span class="line"></span><br><span class="line"><span class="built_in">getline</span>(iss, field, <span class="string">&#x27;,&#x27;</span>); <span class="comment">// 读取学号字段</span></span><br><span class="line">student.<span class="built_in">setId</span>(field);</span><br><span class="line"></span><br><span class="line"><span class="built_in">getline</span>(iss, field, <span class="string">&#x27;,&#x27;</span>); <span class="comment">// 读取姓名字段</span></span><br><span class="line">student.<span class="built_in">setName</span>(field);</span><br><span class="line"></span><br><span class="line"><span class="built_in">getline</span>(iss, field, <span class="string">&#x27;,&#x27;</span>); <span class="comment">// 读取性别字段</span></span><br><span class="line">student.<span class="built_in">setSex</span>(field);</span><br><span class="line"></span><br><span class="line"><span class="built_in">getline</span>(iss, field, <span class="string">&#x27;,&#x27;</span>); <span class="comment">// 读取年龄字段</span></span><br><span class="line">student.<span class="built_in">setAge</span>(<span class="built_in">stoi</span>(field));</span><br><span class="line"></span><br><span class="line"><span class="built_in">getline</span>(iss, field, <span class="string">&#x27;,&#x27;</span>); <span class="comment">// 读取地址字段</span></span><br><span class="line">student.<span class="built_in">setAdder</span>(field);</span><br><span class="line"></span><br><span class="line"><span class="built_in">getline</span>(iss, field); <span class="comment">// 读取专业名称字段</span></span><br><span class="line">student.<span class="built_in">setProfession</span>(field);</span><br><span class="line"></span><br><span class="line">students.<span class="built_in">push_back</span>(student);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查找并删除已逻辑删除的学生数据</span></span><br><span class="line"><span class="comment">// 使用 lambda 表达式作为谓词函数来匹配学生对象</span></span><br><span class="line">students.<span class="built_in">erase</span>(<span class="built_in">remove_if</span>(students.<span class="built_in">begin</span>(), students.<span class="built_in">end</span>(),</span><br><span class="line">[id](<span class="type">const</span> Student&amp; s) &#123; <span class="keyword">return</span> s.<span class="built_in">getId</span>() == id; &#125;),</span><br><span class="line">students.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 关闭文件</span></span><br><span class="line">inputFile.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将更新后的数据写回文件</span></span><br><span class="line"><span class="function">ofstream <span class="title">outputFile</span><span class="params">(<span class="string">&quot;students.txt&quot;</span>)</span></span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span>&amp; s : students) &#123;</span><br><span class="line">outputFile &lt;&lt; s.<span class="built_in">getId</span>() &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; s.<span class="built_in">getName</span>() &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; s.<span class="built_in">getSex</span>()</span><br><span class="line">&lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; s.<span class="built_in">getAge</span>() &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; s.<span class="built_in">getAdder</span>() &lt;&lt; <span class="string">&quot;, &quot;</span></span><br><span class="line">&lt;&lt; s.<span class="built_in">getProfession</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 关闭文件</span></span><br><span class="line">outputFile.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;已从文本文件中删除已逻辑删除的学生数据。&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//删除学生信息</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">deldeteStudent</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">//通过学号查找学生信息</span></span><br><span class="line">string strId;</span><br><span class="line"><span class="type">bool</span> f = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入需要删除信息的学生的学号&quot;</span>;</span><br><span class="line">cin &gt;&gt; strId;</span><br><span class="line"><span class="keyword">if</span> (strId.<span class="built_in">length</span>() != <span class="number">12</span>) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;输入的学号有误，请重新输入&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">for</span> (stu = stulist.<span class="built_in">begin</span>(); stu != stulist.<span class="built_in">end</span>(); stu++) &#123;</span><br><span class="line"><span class="keyword">if</span> (strId == (*stu).<span class="built_in">getId</span>()) &#123;</span><br><span class="line"><span class="comment">//逻辑删除，将num_delete赋值为1</span></span><br><span class="line">(*stu).<span class="built_in">setNumDelete</span>(<span class="number">1</span>);</span><br><span class="line"><span class="built_in">deleteStudentPhysically</span>(strId);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;删除成功&quot;</span> &lt;&lt; endl;</span><br><span class="line">f = !f;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (f) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;该同学的学号不存在无法删除&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 模糊查询函数</span></span><br><span class="line"><span class="function">list&lt;Student&gt; <span class="title">fuzzySearch</span><span class="params">(<span class="type">const</span> list&lt;Student&gt;&amp; students, <span class="type">const</span> string&amp; keyword)</span> </span>&#123;</span><br><span class="line">list&lt;Student&gt; results;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">const</span> Student&amp; student : students) &#123;</span><br><span class="line"><span class="keyword">if</span> (student.<span class="built_in">matchesKeyword</span>(keyword)) &#123;</span><br><span class="line">results.<span class="built_in">push_back</span>(student);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> results;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//模糊查询并输出学生数据</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">fuzzySearchResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">string keyword;</span><br><span class="line"><span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入你想要查询的关键字&quot;</span>;</span><br><span class="line">cin &gt;&gt; keyword;</span><br><span class="line">list&lt;Student&gt; searchResults = <span class="built_in">fuzzySearch</span>(stulist, keyword);</span><br><span class="line"><span class="keyword">if</span> (searchResults.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;你输入的关键字无对应的匹配结果&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;含有关键字的学生对象输出如下:&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">const</span> Student&amp; result : searchResults) &#123;</span><br><span class="line"><span class="keyword">if</span> (result.<span class="built_in">getNumDelete</span>() != <span class="number">1</span>) &#123;</span><br><span class="line">cout &lt;&lt; result.<span class="built_in">getId</span>() &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; result.<span class="built_in">getName</span>() &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; result.<span class="built_in">getSex</span>()</span><br><span class="line">&lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; result.<span class="built_in">getAge</span>() &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; result.<span class="built_in">getAdder</span>() &lt;&lt; <span class="string">&quot;, &quot;</span></span><br><span class="line">&lt;&lt; result.<span class="built_in">getProfession</span>() &lt;&lt; endl;</span><br><span class="line">i++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;满足条件的人数为:&quot;</span> &lt;&lt; i &lt;&lt; <span class="string">&quot;人&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义比较函数，按照入学年份进行排序</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">compare</span><span class="params">(<span class="type">const</span> Student&amp; student1, <span class="type">const</span> Student&amp; student2)</span> </span>&#123;</span><br><span class="line"><span class="comment">//先对学号进行处理，把入学年份拿到</span></span><br><span class="line">string stringYear1 = student1.<span class="built_in">getId</span>().<span class="built_in">substr</span>(<span class="number">0</span>, <span class="number">4</span>);</span><br><span class="line">string stringYear2 = student2.<span class="built_in">getId</span>().<span class="built_in">substr</span>(<span class="number">0</span>, <span class="number">4</span>);</span><br><span class="line"><span class="comment">//再转int类型比较大小</span></span><br><span class="line"><span class="type">int</span> year1 = <span class="built_in">stoi</span>(stringYear1);</span><br><span class="line"><span class="type">int</span> year2 = <span class="built_in">stoi</span>(stringYear2);</span><br><span class="line"><span class="keyword">return</span> year1 &lt; year2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//按照入学年份由小到大查询所有</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">decList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">stulist.<span class="built_in">sort</span>(compare);</span><br><span class="line"><span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// 输出排序后的学生对象</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">const</span> Student&amp; student : stulist) &#123;</span><br><span class="line"><span class="keyword">if</span> (student.<span class="built_in">getNumDelete</span>() != <span class="number">1</span>) &#123;</span><br><span class="line">cout &lt;&lt; student.<span class="built_in">getId</span>() &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; student.<span class="built_in">getName</span>() &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; student.<span class="built_in">getSex</span>()</span><br><span class="line">&lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; student.<span class="built_in">getAge</span>() &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; student.<span class="built_in">getAdder</span>() &lt;&lt; <span class="string">&quot;, &quot;</span></span><br><span class="line">&lt;&lt; student.<span class="built_in">getProfession</span>() &lt;&lt; endl;</span><br><span class="line">i++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;满足条件的人数为:&quot;</span> &lt;&lt; i &lt;&lt; <span class="string">&quot;人&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//查询学生信息</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">getStudent</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> choice&#123; <span class="number">0</span> &#125;;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入您要操作的序号&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;1.模糊查询&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;2.按照入学年份由小到大查询所有&quot;</span> &lt;&lt; endl;</span><br><span class="line">cin &gt;&gt; choice;</span><br><span class="line"><span class="keyword">switch</span> (choice) &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line"><span class="built_in">fuzzySearchResult</span>();</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line"><span class="built_in">decList</span>();</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;选择的序号不存在，请重新选择\n&quot;</span>;</span><br><span class="line"><span class="built_in">getStudent</span>();</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//操作选择，采用switch选择</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">keydown</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> choice&#123; <span class="number">0</span> &#125;;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入您要操作的序号&quot;</span>;</span><br><span class="line">cin &gt;&gt; choice;</span><br><span class="line"><span class="keyword">switch</span> (choice) &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;期待再次与你相遇...&quot;</span>;</span><br><span class="line"><span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\n*****************************【录入学生信息】*********************************\n&quot;</span>;</span><br><span class="line"><span class="built_in">inputStudent</span>();</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\n*****************************【导出学生信息】*********************************\n&quot;</span>;</span><br><span class="line"><span class="built_in">outputStudent</span>();</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\n*****************************【修改学生信息】*********************************\n&quot;</span>;</span><br><span class="line"><span class="built_in">updateStudent</span>();</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\n*****************************【删除学生信息】*********************************\n&quot;</span>;</span><br><span class="line"><span class="built_in">deldeteStudent</span>();</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\n*****************************【查询学生信息】*********************************\n&quot;</span>;</span><br><span class="line"><span class="built_in">getStudent</span>();</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;选择的序号不存在，请重新输入\n&quot;</span>;</span><br><span class="line"><span class="built_in">keydown</span>();</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">init</span>();</span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="built_in">menu</span>();</span><br><span class="line"><span class="built_in">keydown</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">应该是最后一次写C++代码啦~</summary>
    
    
    
    <category term="后端" scheme="http://love.sunnyherry.cn/categories/%E5%90%8E%E7%AB%AF/"/>
    
    
    <category term="C++" scheme="http://love.sunnyherry.cn/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>谷粒学苑(Day7-8)</title>
    <link href="http://love.sunnyherry.cn/_posts/21011.html"/>
    <id>http://love.sunnyherry.cn/_posts/21011.html</id>
    <published>2023-06-16T21:11:20.000Z</published>
    <updated>2023-08-06T14:11:38.837Z</updated>
    
    <content type="html"><![CDATA[<h1 id="课程分类"><a href="#课程分类" class="headerlink" title="课程分类"></a>课程分类</h1><h2 id="添加课程分类"><a href="#添加课程分类" class="headerlink" title="添加课程分类"></a>添加课程分类</h2><p>现在的感觉就是，写一两集后端代码，剩下的两三天都是前端，真的好麻烦呀前端，可能就是没有系统学过Vue吧。<br>慢慢来吧~<br>步骤和5-6天的差不多，基本上也是调接口和写vue代码再配合element组件就可以基本实现</p><p>添加课程接口调用<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1 课程分类列表</span></span><br><span class="line">    <span class="comment">//current当前页 limit每页显示数 teacherQuery条件对象</span></span><br><span class="line">    <span class="title function_">getSubjectList</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">            <span class="comment">//url: &#x27;eduservice/&#x27;+current+&quot;/&quot;+limit,</span></span><br><span class="line">            <span class="attr">url</span>: <span class="string">`/eduservice/subject/getAllSubject`</span>,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>以excel的形式直接传文件添加课程<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">label-width</span>=<span class="string">&quot;120px&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;信息描述&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-tag</span> <span class="attr">type</span>=<span class="string">&quot;info&quot;</span>&gt;</span>excel模版说明<span class="tag">&lt;/<span class="name">el-tag</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-tag</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-download&quot;</span>/&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">:href</span>=<span class="string">&quot;&#x27;/static/01.xlsx&#x27;&quot;</span>&gt;</span>点击下载模版<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-tag</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;选择Excel&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">          <span class="attr">ref</span>=<span class="string">&quot;upload&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:auto-upload</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:on-success</span>=<span class="string">&quot;fileUploadSuccess&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:on-error</span>=<span class="string">&quot;fileUploadError&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:disabled</span>=<span class="string">&quot;importBtnDisabled&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:limit</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:action</span>=<span class="string">&quot;BASE_API+&#x27;/eduservice/subject/addSubject&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">name</span>=<span class="string">&quot;file&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">accept</span>=<span class="string">&quot;.xls,.xlsx&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">slot</span>=<span class="string">&quot;trigger&quot;</span> <span class="attr">size</span>=<span class="string">&quot;small&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>选取文件<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-button</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">            <span class="attr">:loading</span>=<span class="string">&quot;loading&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">style</span>=<span class="string">&quot;margin-left: 10px;&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">size</span>=<span class="string">&quot;small&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">&quot;success&quot;</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">click</span>=<span class="string">&quot;submitUpload&quot;</span>&gt;</span>&#123;&#123; fileUploadBtnText &#125;&#125;<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">BASE_API</span>: process.<span class="property">env</span>.<span class="property">BASE_API</span>, <span class="comment">// 接口API地址</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">fileUploadBtnText</span>: <span class="string">&#x27;上传到服务器&#x27;</span>, <span class="comment">// 按钮文字</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">importBtnDisabled</span>: <span class="literal">false</span>, <span class="comment">// 按钮是否禁用,</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">loading</span>: <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//点击按钮上传到服务器到接口里面</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">submitUpload</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">importBtnDisabled</span> = <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">loading</span> = <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// js:document.getElementById(&quot;upload&quot;).submit()</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">upload</span>.<span class="title function_">submit</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//上传成功</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">fileUploadSuccess</span>(<span class="params">response</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//提示信息</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">loading</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">message</span>: <span class="string">&#x27;添加课程分类成功&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//跳转课程分类列表</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//路由跳转</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$touter</span>.<span class="title function_">push</span>(&#123;<span class="attr">path</span>:<span class="string">&#x27;/subject/list&#x27;</span>&#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//上传失败</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">fileUploadError</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">loading</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">message</span>: <span class="string">&#x27;添加课程分类失败&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="课程分类显示-前后端"><a href="#课程分类显示-前后端" class="headerlink" title="课程分类显示(前后端)"></a>课程分类显示(前后端)</h2><p>前端直接贴上来了，树形结构的样式也是模板，重点在后端如何实现树形数据的传输</p><h3 id="前端"><a href="#前端" class="headerlink" title="前端"></a>前端</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;filterText&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Filter keyword&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-bottom:30px;&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-tree</span></span></span><br><span class="line"><span class="tag">      <span class="attr">ref</span>=<span class="string">&quot;tree2&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:data</span>=<span class="string">&quot;data2&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:props</span>=<span class="string">&quot;defaultProps&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:filter-node-method</span>=<span class="string">&quot;filterNode&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">&quot;filter-tree&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">default-expand-all</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> subject <span class="keyword">from</span> <span class="string">&#x27;@/api/edu/subject.js&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">filterText</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">data2</span>: [&#123;&#125;], <span class="comment">//返回所有分类的数据</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">defaultProps</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">children</span>: <span class="string">&#x27;children&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">label</span>: <span class="string">&#x27;title&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">this</span>.<span class="title function_">getAllSubjectList</span>()</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">watch</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">filterText</span>(<span class="params">val</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">tree2</span>.<span class="title function_">filter</span>(val)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">getAllSubjectList</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        subject.<span class="title function_">getSubjectList</span>()</span></span><br><span class="line"><span class="language-javascript">        .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">data2</span> = response.<span class="property">data</span>.<span class="property">list</span></span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">filterNode</span>(<span class="params">value, data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (!value) <span class="keyword">return</span> <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> data.<span class="property">title</span>.<span class="title function_">toLowerCase</span>().<span class="title function_">indexOf</span>(value.<span class="title function_">toLowerCase</span>()) !== -<span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="后端"><a href="#后端" class="headerlink" title="后端"></a>后端</h3><p>后端要想实现这个树形结构的数据返回给前端使用，需要以下步骤<br>1、针对返回数据创建对应的实体类，称为Vo(前端和后端的过渡实体类，专门用来对接数据)<br>2、在两个实体类中表示关系，因为二级分类课程是包在一级分类里面的。</p><p>如下面代码:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.eduservice.entity.subject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">//一级分类实体类</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OneSubject</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//一个一级分类有多个二级分类</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;TwoSubject&gt; children = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.eduservice.entity.subject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TwoSubject</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>接着就可以在Service层里面写方法了，注意这里用到了四个实体类和两张表，容易弄混，注意区别！！！</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;OneSubject&gt; <span class="title function_">getAllOneTwoSubject</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//查询所有一级分类 parent_id = 0</span></span><br><span class="line">        QueryWrapper&lt;EduSubject&gt; queryWrapper1 =<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">        queryWrapper1.eq(<span class="string">&quot;parent_id&quot;</span>,<span class="string">&quot;0&quot;</span>);</span><br><span class="line">        <span class="comment">//因为ServiceImpl中内部已经自己注入了baseMapper，所以可以直接使用</span></span><br><span class="line">        List&lt;EduSubject&gt; oneSubjectList = baseMapper.selectList(queryWrapper1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//查询所有二级分类 parent_id != 0</span></span><br><span class="line">        QueryWrapper&lt;EduSubject&gt; queryWrapper2 =<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">        queryWrapper1.ne(<span class="string">&quot;parent_id&quot;</span>,<span class="string">&quot;0&quot;</span>);<span class="comment">//ne表示不等于</span></span><br><span class="line">        <span class="comment">//因为ServiceImpl中内部已经自己注入了baseMapper，所以可以直接使用</span></span><br><span class="line">        List&lt;EduSubject&gt; twoSubjectList = baseMapper.selectList(queryWrapper2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//创建一个list集合，用于我们存储最终数据</span></span><br><span class="line">        List&lt;OneSubject&gt; finalSubjectList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//一级分类封装</span></span><br><span class="line">        <span class="comment">//查询出来所有的一级分类list集合遍历，得到每一个一级分类对象，获取每一个一级分类的对象值</span></span><br><span class="line">        <span class="comment">//封装到要求的list集合里面 List&lt;OneSubject&gt; finalSubjectList</span></span><br><span class="line">        <span class="keyword">for</span> (EduSubject eduSubject : oneSubjectList) &#123;</span><br><span class="line">            <span class="comment">//把eduSubject里面的值获取出来，放到OneSubject对象里面</span></span><br><span class="line">            <span class="type">OneSubject</span> <span class="variable">oneSubject</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">OneSubject</span>();</span><br><span class="line"><span class="comment">//            oneSubject.setId(eduSubject.getId());</span></span><br><span class="line"><span class="comment">//            oneSubject.setTitle(eduSubject.getTitle());</span></span><br><span class="line">            <span class="comment">//优化方法  eduSubject值复制到对应onSubject对象里面(属性名称一致才会做封装)</span></span><br><span class="line">            BeanUtils.copyProperties(eduSubject,oneSubject);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//二级分类封装,在一级分类下再做循环匹配到对应的一级分类</span></span><br><span class="line">            <span class="comment">//创建list集合封装对应</span></span><br><span class="line">            List&lt;TwoSubject&gt; twoFinalSubjectList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">            <span class="comment">//遍历twoSubjectList做封装</span></span><br><span class="line">            <span class="keyword">for</span> (EduSubject twosSubject : twoSubjectList) &#123;</span><br><span class="line">                <span class="keyword">if</span>(twosSubject.getParentId().equals(oneSubject.getId()))&#123;</span><br><span class="line">                    <span class="comment">//把twosSubject值复制到Subject中</span></span><br><span class="line">                    <span class="type">TwoSubject</span> <span class="variable">subject</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">TwoSubject</span>();</span><br><span class="line">                    BeanUtils.copyProperties(twosSubject,subject);</span><br><span class="line">                    twoFinalSubjectList.add(subject);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//把一级下面的二级分类放到一级分类里面</span></span><br><span class="line">            oneSubject.setChildren(twoFinalSubjectList);</span><br><span class="line">            <span class="comment">//然后再把OneSubject对象存到finalSubjectList集合中</span></span><br><span class="line">            finalSubjectList.add(oneSubject);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="keyword">return</span> finalSubjectList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="课程发布流程"><a href="#课程发布流程" class="headerlink" title="课程发布流程"></a>课程发布流程</h1><p>整体的一个课程发布是使用了步骤条来实现一步步完成课程发布流程。内容比较多。</p><h2 id="创建新表"><a href="#创建新表" class="headerlink" title="创建新表"></a>创建新表</h2><p>下面具体讲一下这些表的作用，方便后面对于业务和代码的理解。<br>edu_course 课程表：存储课程基本信息</p><p>edu_course_description 课程简介表，用富文本框存储课程简介信息</p><p>edu_chapter 存储课程章节信息</p><p>edu_video 存储章节里面的小节信息</p><p>edu_teacher 存储讲师信息</p><p>edu_subject 存储课程分类信息</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `edu_course` (</span><br><span class="line">  `id` <span class="type">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;课程ID&#x27;</span>,</span><br><span class="line">  `teacher_id` <span class="type">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;课程讲师ID&#x27;</span>,</span><br><span class="line">  `subject_id` <span class="type">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;课程专业ID&#x27;</span>,</span><br><span class="line">  `subject_parent_id` <span class="type">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;课程专业父级ID&#x27;</span>,</span><br><span class="line">  `title` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;课程标题&#x27;</span>,</span><br><span class="line">  `price` <span class="type">decimal</span>(<span class="number">10</span>,<span class="number">2</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0.00&#x27;</span> COMMENT <span class="string">&#x27;课程销售价格，设置为0则可免费观看&#x27;</span>,</span><br><span class="line">  `lesson_num` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;总课时&#x27;</span>,</span><br><span class="line">  `cover` <span class="type">varchar</span>(<span class="number">255</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;课程封面图片路径&#x27;</span>,</span><br><span class="line">  `buy_count` <span class="type">bigint</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;销售数量&#x27;</span>,</span><br><span class="line">  `view_count` <span class="type">bigint</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;浏览数量&#x27;</span>,</span><br><span class="line">  `version` <span class="type">bigint</span>(<span class="number">20</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;1&#x27;</span> COMMENT <span class="string">&#x27;乐观锁&#x27;</span>,</span><br><span class="line">  `status` <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;Draft&#x27;</span> COMMENT <span class="string">&#x27;课程状态 Draft未发布  Normal已发布&#x27;</span>,</span><br><span class="line">  `is_deleted` tinyint(<span class="number">3</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;逻辑删除 1（true）已删除， 0（false）未删除&#x27;</span>,</span><br><span class="line">  `gmt_create` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;更新时间&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  KEY `idx_title` (`title`),</span><br><span class="line">  KEY `idx_subject_id` (`subject_id`),</span><br><span class="line">  KEY `idx_teacher_id` (`teacher_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 ROW_FORMAT<span class="operator">=</span>COMPACT COMMENT<span class="operator">=</span><span class="string">&#x27;课程&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `edu_course_description` (</span><br><span class="line">  `id` <span class="type">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;课程ID&#x27;</span>,</span><br><span class="line">  `description` text COMMENT <span class="string">&#x27;课程简介&#x27;</span>,</span><br><span class="line">  `gmt_create` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;更新时间&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 COMMENT<span class="operator">=</span><span class="string">&#x27;课程简介&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `edu_chapter` (</span><br><span class="line">  `id` <span class="type">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;章节ID&#x27;</span>,</span><br><span class="line">  `course_id` <span class="type">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;课程ID&#x27;</span>,</span><br><span class="line">  `title` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;章节名称&#x27;</span>,</span><br><span class="line">  `sort` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;显示排序&#x27;</span>,</span><br><span class="line">  `gmt_create` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;更新时间&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  KEY `idx_course_id` (`course_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 ROW_FORMAT<span class="operator">=</span>COMPACT COMMENT<span class="operator">=</span><span class="string">&#x27;课程&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `edu_video` (</span><br><span class="line">  `id` <span class="type">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;视频ID&#x27;</span>,</span><br><span class="line">  `course_id` <span class="type">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;课程ID&#x27;</span>,</span><br><span class="line">  `chapter_id` <span class="type">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;章节ID&#x27;</span>,</span><br><span class="line">  `title` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;节点名称&#x27;</span>,</span><br><span class="line">  `video_source_id` <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;云端视频资源&#x27;</span>,</span><br><span class="line">  `video_original_name` <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;原始文件名称&#x27;</span>,</span><br><span class="line">  `sort` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;排序字段&#x27;</span>,</span><br><span class="line">  `play_count` <span class="type">bigint</span>(<span class="number">20</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;播放次数&#x27;</span>,</span><br><span class="line">  `is_free` tinyint(<span class="number">1</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;是否可以试听：0收费 1免费&#x27;</span>,</span><br><span class="line">  `duration` <span class="type">float</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;视频时长（秒）&#x27;</span>,</span><br><span class="line">  `status` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;Empty&#x27;</span> COMMENT <span class="string">&#x27;Empty未上传 Transcoding转码中  Normal正常&#x27;</span>,</span><br><span class="line">  `size` <span class="type">bigint</span>(<span class="number">20</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;视频源文件大小（字节）&#x27;</span>,</span><br><span class="line">  `version` <span class="type">bigint</span>(<span class="number">20</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;1&#x27;</span> COMMENT <span class="string">&#x27;乐观锁&#x27;</span>,</span><br><span class="line">  `gmt_create` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;更新时间&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  KEY `idx_course_id` (`course_id`),</span><br><span class="line">  KEY `idx_chapter_id` (`chapter_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 ROW_FORMAT<span class="operator">=</span>COMPACT COMMENT<span class="operator">=</span><span class="string">&#x27;课程视频&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="添加课程信息-后端"><a href="#添加课程信息-后端" class="headerlink" title="添加课程信息(后端)"></a>添加课程信息(后端)</h2><p>后端就还是熟悉的使用代码生成器生成对应的实体类以及三层架构</p><p>还是像上面一样，要创建一个vo实体类来接受前端的json数据<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CourseInfoVo</span> &#123;</span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;课程ID&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;课程讲师ID&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String teacherId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;一级分类ID&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String subjectParentId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;二级分类ID&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String subjectId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;课程标题&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;课程销售价格，设置为0则可免费观看&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> BigDecimal price;<span class="comment">//提高精度，常用于价格的类</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;总课时&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer lessonNum;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;课程封面图片路径&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String cover;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;课程简介&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p>之后就可以在EduCourseController里面写接口<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/eduservice/course&quot;)</span></span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EduCourseController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EduCourseService courseService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//添加课程基本信息的方法</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;addCourseInfo&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">addCourseInfo</span><span class="params">(<span class="meta">@RequestBody</span> CourseInfoVo courseInfoVo)</span>&#123;</span><br><span class="line">        <span class="comment">//返回添加之后课程id，为后面添加大纲使用</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> courseService.saveCourseInfo(courseInfoVo);</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">&quot;courseId&quot;</span>,id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>直接把核心Service贴上来了(操作了两张表,edu_course edu_course_description)<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EduCourseServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;EduCourseMapper, EduCourse&gt; <span class="keyword">implements</span> <span class="title class_">EduCourseService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//课程描述的注入</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EduCourseDescriptionService courseDescriptionService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//添加课程基本信息的方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">saveCourseInfo</span><span class="params">(CourseInfoVo courseInfoVo)</span> &#123;</span><br><span class="line">        <span class="comment">//1、向课程表添加课程基本信息</span></span><br><span class="line">        <span class="comment">//CourseInfoVo对象转换成eduCourse对象</span></span><br><span class="line">        <span class="type">EduCourse</span> <span class="variable">eduCourse</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">EduCourse</span>();</span><br><span class="line">        BeanUtils.copyProperties(courseInfoVo,eduCourse);</span><br><span class="line">        <span class="type">int</span> <span class="variable">insert</span> <span class="operator">=</span> baseMapper.insert(eduCourse);</span><br><span class="line">        <span class="keyword">if</span>(insert &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">//添加失败</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">GuliException</span>(<span class="number">20001</span>,<span class="string">&quot;添加课程信息失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取添加之后的课程id</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> eduCourse.getId();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2、向课程简介表添加课程数据</span></span><br><span class="line">        <span class="type">EduCourseDescription</span> <span class="variable">courseDescription</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">EduCourseDescription</span>();</span><br><span class="line">        BeanUtils.copyProperties(courseInfoVo,courseDescription);</span><br><span class="line">        <span class="comment">//设置描述id就是课程id，从而实现一对一的表关系</span></span><br><span class="line">        courseDescription.setId(id);</span><br><span class="line">        courseDescriptionService.save(courseDescription);</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h2 id="添加课程信息-前端"><a href="#添加课程信息-前端" class="headerlink" title="添加课程信息(前端)"></a>添加课程信息(前端)</h2><p>直接贴，不解释了哈哈哈<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1 添加课程</span></span><br><span class="line">    <span class="title function_">addCourseInfo</span>(<span class="params">courseInfo</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">`/eduservice/course/addCourseInfo`</span>,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">            <span class="attr">data</span>:courseInfo</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//2 查询所有讲师</span></span><br><span class="line">    <span class="title function_">getListTeacher</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">`/eduservice/teacher/findAll`</span>,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>这个info.vue只是步骤条中的步骤一，后面还有两个后面在完善<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">style</span>=<span class="string">&quot;text-align: center;&quot;</span>&gt;</span>发布新课程<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-steps</span> <span class="attr">:active</span>=<span class="string">&quot;1&quot;</span> <span class="attr">process-status</span>=<span class="string">&quot;wait&quot;</span> <span class="attr">align-center</span> <span class="attr">style</span>=<span class="string">&quot;margin-bottom: 40px;&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-step</span> <span class="attr">title</span>=<span class="string">&quot;填写课程基本信息&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-step</span> <span class="attr">title</span>=<span class="string">&quot;创建课程大纲&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-step</span> <span class="attr">title</span>=<span class="string">&quot;提交审核&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-steps</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">label-width</span>=<span class="string">&quot;120px&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;课程标题&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;courseInfo.title&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot; 示例：机器学习项目课：从基础到搭建项目视频课程。专业名称注意大小写&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 所属分类 TODO @change表示一改变就会触发的方法--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;课程分类&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-select</span></span></span><br><span class="line"><span class="tag">            <span class="attr">v-model</span>=<span class="string">&quot;courseInfo.subjectParentId&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">placeholder</span>=<span class="string">&quot;一级分类&quot;</span> @<span class="attr">change</span>=<span class="string">&quot;subjectLevelOneChanged&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-option</span></span></span><br><span class="line"><span class="tag">                <span class="attr">v-for</span>=<span class="string">&quot;subject in subjectOneList&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:key</span>=<span class="string">&quot;subject.id&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:label</span>=<span class="string">&quot;subject.title&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:value</span>=<span class="string">&quot;subject.id&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!-- 二级分类 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-select</span> <span class="attr">v-model</span>=<span class="string">&quot;courseInfo.subjectId&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;二级分类&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-option</span></span></span><br><span class="line"><span class="tag">                <span class="attr">v-for</span>=<span class="string">&quot;subject in subjectTwoList&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:key</span>=<span class="string">&quot;subject.id&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:label</span>=<span class="string">&quot;subject.title&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:value</span>=<span class="string">&quot;subject.id&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">       </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 课程讲师 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;课程讲师&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-select</span></span></span><br><span class="line"><span class="tag">            <span class="attr">v-model</span>=<span class="string">&quot;courseInfo.teacherId&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">placeholder</span>=<span class="string">&quot;请选择&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-option</span></span></span><br><span class="line"><span class="tag">                <span class="attr">v-for</span>=<span class="string">&quot;teacher in teacherList&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:key</span>=<span class="string">&quot;teacher.id&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:label</span>=<span class="string">&quot;teacher.name&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:value</span>=<span class="string">&quot;teacher.id&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 课程讲师 TODO --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;总课时&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input-number</span> <span class="attr">:min</span>=<span class="string">&quot;0&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;courseInfo.lessonNum&quot;</span> <span class="attr">controls-position</span>=<span class="string">&quot;right&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请填写课程的总课时数&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 课程简介 TODO --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 课程简介--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;课程简介&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tinymce</span> <span class="attr">:height</span>=<span class="string">&quot;300&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;courseInfo.description&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 课程封面--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;课程封面&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:show-file-list</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:on-success</span>=<span class="string">&quot;handleAvatarSuccess&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:before-upload</span>=<span class="string">&quot;beforeAvatarUpload&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:action</span>=<span class="string">&quot;BASE_API+&#x27;/eduoss/fileoss/&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">class</span>=<span class="string">&quot;avatar-uploader&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;courseInfo.cover&quot;</span> <span class="attr">width</span>=<span class="string">&quot;200px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;200px&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;课程价格&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input-number</span> <span class="attr">:min</span>=<span class="string">&quot;0&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;courseInfo.price&quot;</span> <span class="attr">controls-position</span>=<span class="string">&quot;right&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;免费课程请设置为0元&quot;</span>/&gt;</span> 元</span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">:disabled</span>=<span class="string">&quot;saveBtnDisabled&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;saveOrUpdate&quot;</span>&gt;</span>保存并下一步<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> course <span class="keyword">from</span> <span class="string">&#x27;@/api/edu/course.js&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> subject <span class="keyword">from</span> <span class="string">&#x27;@/api/edu/subject.js&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Tinymce</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/Tinymce&#x27;</span><span class="comment">//引入组件</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//声明组件</span></span></span><br><span class="line"><span class="language-javascript">    <span class="attr">components</span>: &#123; <span class="title class_">Tinymce</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">saveBtnDisabled</span>:<span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">courseInfo</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">title</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">subjectId</span>: <span class="string">&#x27;&#x27;</span>,<span class="comment">//二级分类课程id</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">subjectParentId</span>: <span class="string">&#x27;&#x27;</span>,<span class="comment">//一级分类课程id</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">teacherId</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">lessonNum</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">description</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">cover</span>: <span class="string">&#x27;/static/01.jpg&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">price</span>: <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">BASE_API</span>: process.<span class="property">env</span>.<span class="property">BASE_API</span>,<span class="comment">//接口API地址</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">teacherList</span>: [],<span class="comment">//封装所有讲师数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">subjectOneList</span>: [],<span class="comment">//一级分类</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">subjectTwoList</span>: []<span class="comment">//二级分类</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//初始化所有讲师</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">getListTeacher</span>()</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//初始化一级分类</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">getOneSubject</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//上传封面成功调用的方法</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handleAvatarSuccess</span>(<span class="params">res,file</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">courseInfo</span>.<span class="property">cover</span> = res.<span class="property">data</span>.<span class="property">url</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//上传之前调用的方法</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">beforeAvatarUpload</span>(<span class="params">file</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> isJPG = file.<span class="property">type</span> === <span class="string">&#x27;image/jpeg&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> isLt2M = file.<span class="property">size</span> / <span class="number">1024</span> / <span class="number">1024</span> &lt; <span class="number">2</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (!isJPG) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&#x27;上传头像图片只能是 JPG 格式!&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (!isLt2M) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&#x27;上传头像图片大小不能超过 2MB!&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> isJPG &amp;&amp; isLt2M</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//点击某个一级分类，触发change，显示对应二级分类</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">subjectLevelOneChanged</span>(<span class="params">value</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//value就是一级分类id值</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//遍历所有分类，包含一级和二级</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">for</span>(<span class="keyword">var</span> i =<span class="number">0</span> ;i&lt;<span class="variable language_">this</span>.<span class="property">subjectOneList</span>.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//每个一级分类</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> onesubject=<span class="variable language_">this</span>.<span class="property">subjectOneList</span>[i]</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//判断，所有一级分类id和点击的一级分类id是否一样</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(value === onesubject.<span class="property">id</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//从一级分类获取里面所有的二级分类</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">subjectTwoList</span> = onesubject.<span class="property">children</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//把二级分类id清空</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">courseInfo</span>.<span class="property">subjectId</span> = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//查询所有一级分类</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">getOneSubject</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            subject.<span class="title function_">getSubjectList</span>()</span></span><br><span class="line"><span class="language-javascript">            .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">subjectOneList</span> = response.<span class="property">data</span>.<span class="property">list</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//查询所有讲师</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">getListTeacher</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            course.<span class="title function_">getListTeacher</span>()</span></span><br><span class="line"><span class="language-javascript">            .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">teacherList</span>=response.<span class="property">data</span>.<span class="property">items</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">saveOrUpdate</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            course.<span class="title function_">addCourseInfo</span>(<span class="variable language_">this</span>.<span class="property">courseInfo</span>)</span></span><br><span class="line"><span class="language-javascript">            .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//提示信息</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">message</span>: <span class="string">&#x27;添加课程信息成功!&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;);              </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//跳转到第二步</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123;<span class="attr">path</span>:<span class="string">&quot;/course/chapter/&quot;</span> +response.<span class="property">data</span>.<span class="property">courseId</span>&#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.tinymce-container</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">line-height</span>: <span class="number">29px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="章节后端-步骤条第二步"><a href="#章节后端-步骤条第二步" class="headerlink" title="章节后端(步骤条第二步)"></a>章节后端(步骤条第二步)</h2><p>这个后端代码基本一致，就是删除有点特色，只有章节下面没有小节的时候才可以删除章节(跟瑞吉里面的套餐下菜品在售不能删除套餐一样)<br>小节的后端和章节的一模一样就不贴了，就是删除那里可以直接用courseId在removeById方法直接删除，不需要判断。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/eduservice/chapter&quot;)</span></span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EduChapterController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EduChapterService chapterService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//课程大纲列表,根据课程id进行查询</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;getChapterVideo/&#123;courseId&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">getChapterVideo</span><span class="params">(<span class="meta">@PathVariable</span> String courseId)</span> &#123;</span><br><span class="line">        List&lt;ChapterVo&gt; list = chapterService.getChapterVideoByCourseId(courseId);</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">&quot;allChapterVideo&quot;</span>,list);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//添加章节</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;addChapter&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">addChapter</span><span class="params">(<span class="meta">@RequestBody</span> EduChapter eduChapter)</span> &#123;</span><br><span class="line">        chapterService.save(eduChapter);</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//根据章节id查询</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;getChapterInfoById/&#123;chapterId&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">getChapterInfo</span><span class="params">(<span class="meta">@PathVariable</span> String chapterId)</span> &#123;</span><br><span class="line">        <span class="type">EduChapter</span> <span class="variable">eduChapter</span> <span class="operator">=</span> chapterService.getById(chapterId);</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">&quot;chapter&quot;</span>,eduChapter);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//修改章节</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;updateChapter&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">updateChapter</span><span class="params">(<span class="meta">@RequestBody</span> EduChapter eduChapter)</span> &#123;</span><br><span class="line">        chapterService.updateById(eduChapter);</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//删除的方法</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;&#123;chapterId&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">deleteChapter</span><span class="params">(<span class="meta">@PathVariable</span> String chapterId)</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> chapterService.deleteChapter(chapterId);</span><br><span class="line">        <span class="keyword">if</span>(flag) &#123;</span><br><span class="line">            <span class="keyword">return</span> R.ok();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> R.error();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>下面就只挂删除的核心代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">////删除章节的方法</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">deleteChapter</span><span class="params">(String chapterId)</span> &#123;</span><br><span class="line">    <span class="comment">//根据chapterid章节id 查询小节表，如果查询数据，不进行删除</span></span><br><span class="line">    QueryWrapper&lt;EduVideo&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    wrapper.eq(<span class="string">&quot;chapter_id&quot;</span>,chapterId);</span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> videoService.count(wrapper);</span><br><span class="line">    <span class="comment">//判断</span></span><br><span class="line">    <span class="keyword">if</span>(count &gt;<span class="number">0</span>) &#123;<span class="comment">//查询出小节，不进行删除</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">GuliException</span>(<span class="number">20001</span>,<span class="string">&quot;不能删除&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; <span class="comment">//不能查询数据，进行删除</span></span><br><span class="line">        <span class="comment">//删除章节</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> baseMapper.deleteById(chapterId);</span><br><span class="line">        <span class="comment">//成功  1&gt;0   0&gt;0</span></span><br><span class="line">        <span class="keyword">return</span> result&gt;<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="章节前端-步骤条第二步"><a href="#章节前端-步骤条第二步" class="headerlink" title="章节前端(步骤条第二步)"></a>章节前端(步骤条第二步)</h2><p>又到了可恶的前端(步骤条第二步的页面代码)<br>抽取出来的调用接口就懒得贴上来了，在页面上的代码都可以体现出来(懒~)</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">style</span>=<span class="string">&quot;text-align: center;&quot;</span>&gt;</span>发布新课程<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-steps</span> <span class="attr">:active</span>=<span class="string">&quot;2&quot;</span> <span class="attr">process-status</span>=<span class="string">&quot;wait&quot;</span> <span class="attr">align-center</span> <span class="attr">style</span>=<span class="string">&quot;margin-bottom: 40px;&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-step</span> <span class="attr">title</span>=<span class="string">&quot;填写课程基本信息&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-step</span> <span class="attr">title</span>=<span class="string">&quot;创建课程大纲&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-step</span> <span class="attr">title</span>=<span class="string">&quot;最终发布&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-steps</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;openChapterDialog()&quot;</span>&gt;</span>添加章节<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 章节 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;chanpterList&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span></span></span><br><span class="line"><span class="tag">            <span class="attr">v-for</span>=<span class="string">&quot;chapter in chapterVideoList&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:key</span>=<span class="string">&quot;chapter.id&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">                &#123;&#123; chapter.title &#125;&#125;</span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;acts&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;openVideo(chapter.id)&quot;</span>&gt;</span>添加小节<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">style</span>=<span class="string">&quot;&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;openEditChapter(chapter.id)&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;removeChapter(chapter.id)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">span</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 视频 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;chanpterList videoList&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">v-for</span>=<span class="string">&quot;video in chapter.children&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">:key</span>=<span class="string">&quot;video.id&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; video.title &#125;&#125;</span><br><span class="line">                          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;acts&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;openEditVideo(video.id)&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;removeVideo(video.id)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                          <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;previous&quot;</span>&gt;</span>上一步<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">:disabled</span>=<span class="string">&quot;saveBtnDisabled&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;next&quot;</span>&gt;</span>下一步<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 添加和修改章节表单 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;dialogChapterFormVisible&quot;</span> <span class="attr">title</span>=<span class="string">&quot;添加章节&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;chapter&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;120px&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;章节标题&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;chapter.title&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;章节排序&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input-number</span> <span class="attr">v-model</span>=<span class="string">&quot;chapter.sort&quot;</span> <span class="attr">:min</span>=<span class="string">&quot;0&quot;</span> <span class="attr">controls-position</span>=<span class="string">&quot;right&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;dialogChapterFormVisible = false&quot;</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;saveOrUpdate&quot;</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 添加和修改课时表单 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;dialogVideoFormVisible&quot;</span> <span class="attr">title</span>=<span class="string">&quot;添加课时&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;video&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;120px&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;课时标题&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;video.title&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;课时排序&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-input-number</span> <span class="attr">v-model</span>=<span class="string">&quot;video.sort&quot;</span> <span class="attr">:min</span>=<span class="string">&quot;0&quot;</span> <span class="attr">controls-position</span>=<span class="string">&quot;right&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;是否免费&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-radio-group</span> <span class="attr">v-model</span>=<span class="string">&quot;video.free&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-radio</span> <span class="attr">:label</span>=<span class="string">&quot;true&quot;</span>&gt;</span>免费<span class="tag">&lt;/<span class="name">el-radio</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-radio</span> <span class="attr">:label</span>=<span class="string">&quot;false&quot;</span>&gt;</span>默认<span class="tag">&lt;/<span class="name">el-radio</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-radio-group</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;上传视频&quot;</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- TODO --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;dialogVideoFormVisible = false&quot;</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">:disabled</span>=<span class="string">&quot;saveVideoBtnDisabled&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;saveOrUpdateVideo&quot;</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> chapter <span class="keyword">from</span> <span class="string">&#x27;@/api/edu/chapter&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> video <span class="keyword">from</span> <span class="string">&#x27;@/api/edu/video&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">saveBtnDisabled</span>:<span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">courseId</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">chapterVideoList</span>:[],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">dialogChapterFormVisible</span>: <span class="literal">false</span>,<span class="comment">//是否弹框的值</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">dialogVideoFormVisible</span>: <span class="literal">false</span>, <span class="comment">//小节弹框</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">video</span>: &#123;<span class="comment">//封装小节数据</span></span></span><br><span class="line"><span class="language-javascript">              <span class="attr">title</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">sort</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">free</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">videoSourseId</span>: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">chapter</span>: &#123;<span class="comment">//封装章节数据</span></span></span><br><span class="line"><span class="language-javascript">              <span class="attr">title</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">sort</span>: <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//获取上一步url的id值</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">params</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">params</span>.<span class="property">id</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">courseId</span> = <span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">params</span>.<span class="property">id</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//根据课程id查询章节和小节</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">getChapterVideo</span>()</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">//========================================小节操作方法===========================================</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//修改小节</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">updateVideo</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        video.<span class="title function_">updatedVideo</span>(<span class="variable language_">this</span>.<span class="property">video</span>)</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//关闭弹框</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">dialogVideoFormVisible</span> = <span class="literal">false</span><span class="comment">//是否弹框的值</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//提示</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">message</span>: <span class="string">&#x27;修改小节信息成功!&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;); </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//刷新界面</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">getChapterVideo</span>()</span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//回显小节信息</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">openEditVideo</span>(<span class="params">videoId</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">dialogVideoFormVisible</span> = <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">         <span class="comment">//调用接口</span></span></span><br><span class="line"><span class="language-javascript">         video.<span class="title function_">getVideo</span>(videoId)</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">video</span> = response.<span class="property">data</span>.<span class="property">video</span></span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//删除小节</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">removeVideo</span>(<span class="params">id</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;此操作将删除小节, 是否继续?&#x27;</span>, <span class="string">&#x27;提示&#x27;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">confirmButtonText</span>: <span class="string">&#x27;确定&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">cancelButtonText</span>: <span class="string">&#x27;取消&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">type</span>: <span class="string">&#x27;warning&#x27;</span></span></span><br><span class="line"><span class="language-javascript">          &#125;).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123; <span class="comment">//点击确定，执行then方法</span></span></span><br><span class="line"><span class="language-javascript">              <span class="comment">//调用删除的方法</span></span></span><br><span class="line"><span class="language-javascript">              video.<span class="title function_">deleteVideoById</span>(id)</span></span><br><span class="line"><span class="language-javascript">                  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123; <span class="comment">//删除成功</span></span></span><br><span class="line"><span class="language-javascript">                  <span class="comment">//  提示信息</span></span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">this</span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript">                      <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                      <span class="attr">message</span>: <span class="string">&#x27;删除成功!&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                  &#125;);</span></span><br><span class="line"><span class="language-javascript">                  <span class="comment">//回到列表页面</span></span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">this</span>.<span class="title function_">getChapterVideo</span>()</span></span><br><span class="line"><span class="language-javascript">              &#125;)</span></span><br><span class="line"><span class="language-javascript">          &#125;)<span class="comment">//点击取消方法省略</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//添加小节弹框</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">openVideo</span>(<span class="params">chapterId</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">dialogVideoFormVisible</span> = <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//清空表单</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">video</span> = &#123;&#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//设置章节id</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">video</span>.<span class="property">chapterId</span> = chapterId</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//添加小节</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">addVideo</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//设置课程id</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">video</span>.<span class="property">courseId</span> = <span class="variable language_">this</span>.<span class="property">courseId</span></span></span><br><span class="line"><span class="language-javascript">        video.<span class="title function_">addVideo</span>(<span class="variable language_">this</span>.<span class="property">video</span>)</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//关闭弹框</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">dialogVideoFormVisible</span> = <span class="literal">false</span><span class="comment">//是否弹框的值</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//提示</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">message</span>: <span class="string">&#x27;添加小节信息成功!&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;); </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//刷新界面</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">getChapterVideo</span>()</span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">saveOrUpdateVideo</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">video</span>.<span class="property">id</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//调用添加小节</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="title function_">addVideo</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="title function_">updateVideo</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//========================================章节操作方法===========================================</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//删除章节</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">removeChapter</span>(<span class="params">chapterId</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;此操作将删除章节, 是否继续?&#x27;</span>, <span class="string">&#x27;提示&#x27;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">confirmButtonText</span>: <span class="string">&#x27;确定&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">cancelButtonText</span>: <span class="string">&#x27;取消&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">type</span>: <span class="string">&#x27;warning&#x27;</span></span></span><br><span class="line"><span class="language-javascript">          &#125;).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123; <span class="comment">//点击确定，执行then方法</span></span></span><br><span class="line"><span class="language-javascript">              <span class="comment">//调用删除的方法</span></span></span><br><span class="line"><span class="language-javascript">              chapter.<span class="title function_">deleteChapterById</span>(chapterId)</span></span><br><span class="line"><span class="language-javascript">                  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123; <span class="comment">//删除成功</span></span></span><br><span class="line"><span class="language-javascript">                  <span class="comment">//  提示信息</span></span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">this</span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript">                      <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                      <span class="attr">message</span>: <span class="string">&#x27;删除成功!&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                  &#125;);</span></span><br><span class="line"><span class="language-javascript">                  <span class="comment">//回到列表页面</span></span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">this</span>.<span class="title function_">getChapterVideo</span>()</span></span><br><span class="line"><span class="language-javascript">              &#125;)</span></span><br><span class="line"><span class="language-javascript">          &#125;)<span class="comment">//点击取消方法省略</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//修改章节弹框数据回显</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">openEditChapter</span>(<span class="params">chapterId</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//弹框</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">dialogChapterFormVisible</span> = <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//调用接口</span></span></span><br><span class="line"><span class="language-javascript">        chapter.<span class="title function_">getChapter</span>(chapterId)</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">chapter</span> = response.<span class="property">data</span>.<span class="property">chapter</span></span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//弹出添加章节页面</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">openChapterDialog</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//弹框</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">dialogChapterFormVisible</span> = <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//清空表单</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">chapter</span> = &#123;&#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//添加章节</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">addChapter</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//设置课程id到chapter对象里面</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">chapter</span>.<span class="property">courseId</span> = <span class="variable language_">this</span>.<span class="property">courseId</span></span></span><br><span class="line"><span class="language-javascript">        chapter.<span class="title function_">addChapter</span>(<span class="variable language_">this</span>.<span class="property">chapter</span>)</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//关闭弹框</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">dialogChapterFormVisible</span> = <span class="literal">false</span><span class="comment">//是否弹框的值</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//提示</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">message</span>: <span class="string">&#x27;添加章节信息成功!&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;); </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//刷新界面</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">getChapterVideo</span>()</span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//修改章节方法</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">updateChapter</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        chapter.<span class="title function_">updatedChapter</span>(<span class="variable language_">this</span>.<span class="property">chapter</span>)</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//关闭弹框</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">dialogChapterFormVisible</span> = <span class="literal">false</span><span class="comment">//是否弹框的值</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//提示</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">message</span>: <span class="string">&#x27;修改章节信息成功!&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;); </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//刷新界面</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">getChapterVideo</span>()</span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">saveOrUpdate</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">chapter</span>.<span class="property">id</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="title function_">addChapter</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="title function_">updateChapter</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//根据课程id查询章节和小节</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">getChapterVideo</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        chapter.<span class="title function_">addAllChapterVideo</span>(<span class="variable language_">this</span>.<span class="property">courseId</span>)</span></span><br><span class="line"><span class="language-javascript">        .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">chapterVideoList</span>=response.<span class="property">data</span>.<span class="property">allChapterVideo</span></span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">previous</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123;<span class="attr">path</span>:<span class="string">&quot;/course/info/&quot;</span>+ <span class="variable language_">this</span>.<span class="property">courseId</span>&#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">next</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//跳转到第二步</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123;<span class="attr">path</span>:<span class="string">&quot;/course/publish/&quot;</span>+<span class="variable language_">this</span>.<span class="property">courseId</span>&#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- css渲染(不得不吐槽一下，这个美化还变丑了笑死我了) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.chanpterList</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">list-style</span>: none;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.chanpterList</span> <span class="selector-tag">li</span>&#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.chanpterList</span> <span class="selector-tag">p</span>&#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">float</span>: left; </span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">height</span>: <span class="number">70px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">line-height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#DDD</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.chanpterList</span> <span class="selector-class">.acts</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">float</span>: right;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span></span><br><span class="line"><span class="language-css">&#125;<span class="selector-class">.videoList</span>&#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding-left</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.videoList</span> <span class="selector-tag">p</span>&#123;</span></span><br><span class="line"><span class="language-css">  <span class="comment">/* float: left; */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">line-height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border</span>: <span class="number">1px</span> dotted <span class="number">#DDD</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">课程分类完善以及课程大纲(章节小节)</summary>
    
    
    
    <category term="前端" scheme="http://love.sunnyherry.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="项目" scheme="http://love.sunnyherry.cn/tags/%E9%A1%B9%E7%9B%AE/"/>
    
  </entry>
  
  <entry>
    <title>悦读一周精选</title>
    <link href="http://love.sunnyherry.cn/_posts/33898.html"/>
    <id>http://love.sunnyherry.cn/_posts/33898.html</id>
    <published>2023-06-16T15:38:20.000Z</published>
    <updated>2023-08-06T14:11:38.837Z</updated>
    
    <content type="html"><![CDATA[<h1 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h1><p>这世上最公平的东西就是时间了，<br>每个人都只有24个小时，<br>虽然每个地区可能有时差，<br>但整体时间数量却没有变。<br>而每个人都有属于自己的时区，<br>做着自己的事情，过着自己的人生。<br>有时可能别人的动作比你快，超过你，<br>大可不必慌张，<br>每个人都有属于自己的时区。<br>可能在下一秒你就会超过他，<br>并做得比他更好。<br>因此，我们只需要在自己的时区里，<br>做好当下应该做的事情就好了。<br>分享很喜欢的一段话：<br>“别焦虑，<br>人跟人的生活节奏是不一样的，<br>有人三分钟泡面，<br>有人三小时煲汤，<br>有的人外卖已送达，<br>有的人才刚切好蒜苔和肉，<br>重要的是，<br>当你选择了你要的方式，<br>就坚定下去别胡思乱想。<br>大家赶的时间不一样，<br>慢慢会有人理解你的小情绪，<br>慢慢了解你长大后的小心愿，<br>慢慢了解你说的海边小岛的圆月。<br>烧烤摊上最快的菜可能是拍黄瓜，<br>有些包子第一口咬不到肉。<br>慢慢来的都是诚意，<br>好戏啊都在烟火里。”<br>一个人最好的活法是什么样的？<br>沉浸式做自己，不要东张西望。<br>    ————《拾遗精选》</p>]]></content>
    
    
    <summary type="html">当你选定一条路，另一条路的风景便与你无关</summary>
    
    
    
    <category term="生活" scheme="http://love.sunnyherry.cn/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
    <category term="生活" scheme="http://love.sunnyherry.cn/tags/%E7%94%9F%E6%B4%BB/"/>
    
  </entry>
  
  <entry>
    <title>Nginx介绍与使用</title>
    <link href="http://love.sunnyherry.cn/_posts/34009.html"/>
    <id>http://love.sunnyherry.cn/_posts/34009.html</id>
    <published>2023-06-10T21:11:20.000Z</published>
    <updated>2023-08-06T14:11:38.837Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Nginx介绍"><a href="#Nginx介绍" class="headerlink" title="Nginx介绍"></a>Nginx介绍</h1><blockquote><p>之前瑞吉外卖的时候就使用过nginx ，当时blog还没搭出来所以没记笔记，我觉得这个可以单独拿出来讲讲，所以就多开了一篇。</p></blockquote><h1 id="Nginx的三大特性"><a href="#Nginx的三大特性" class="headerlink" title="Nginx的三大特性"></a>Nginx的三大特性</h1><h2 id="请求转发"><a href="#请求转发" class="headerlink" title="请求转发"></a>请求转发</h2><blockquote><p>一般来说客户端或者说浏览器发送请求，不在直接的发送给后台服务器，而是使用nginx接收，然后再通过nginx发送给后端服务器做响应。<br>假设后台服务器有很多台，那么nginx可以根据请求转发的url路径匹配原则转发到具体的某个服务器中，有点中间商的味道。<br>我自己觉得好处就是隐藏了后台服务器，无法知晓后台服务器的端口号，客户端无法直接访问后台，减少被攻击的可能性。</p></blockquote><h2 id="负载均衡"><a href="#负载均衡" class="headerlink" title="负载均衡"></a>负载均衡</h2><blockquote><p>假设有两台服务器都是同一个项目部署的(集群)。负载均衡指的就是客户端发送请求给nginx端口为9001，然后nginx会把客户端的请求平均分摊到两台服务器中,一般来说默认采用的是轮询的方式平均(你一次我一次),但是我们也可以实现按权位来分配，比如给第一台大概百分之六十的请求，第二台大概百分之四十。还有很多算法，比如根据谁的请求时间最短就直接发给谁等等。</p></blockquote><h2 id="动静分离"><a href="#动静分离" class="headerlink" title="动静分离"></a>动静分离</h2><blockquote><p>说白了就把静态资源放在了nginx服务器上，比如图片，然后把代码，动态资源放置在tomcat服务器中</p></blockquote><h1 id="Nginx的基本使用"><a href="#Nginx的基本使用" class="headerlink" title="Nginx的基本使用"></a>Nginx的基本使用</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><blockquote><p>去官网安装window版的nginx,最好是使用Linux的nginx，功能更加全面，后续如果我再遇到Linux版的nginx我会在这里补充。现在谷粒的项目用window就够了，很好操作也好改配置，部署项目的话必须要用Linux版，不过后面用网关来部署就不用nginx了，所以window足够了。</p></blockquote><h2 id="常用指令"><a href="#常用指令" class="headerlink" title="常用指令"></a>常用指令</h2><blockquote><p>window开始指令就是在.exe所在文件夹输入cmd直接输入文件名称nginx.exe就可以开启<br>提醒！直接关闭命令窗口无法关闭nginx服务，可以输入nginx -s stop命令停止<br>修改完配置文件后可以直接使用重启命令 nginx -s reload</p></blockquote><h2 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h2><blockquote><p>不管是window还是Linux中修改配置文件的地方永远是nginx.conf。</p><p>修改方式如下</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        #改成81端口防止80被占用出问题</span><br><span class="line">        listen       81;</span><br><span class="line">        server_name  localhost;</span><br><span class="line"></span><br><span class="line">        #charset koi8-r;</span><br><span class="line"></span><br><span class="line">        #access_log  logs/host.access.log  main;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            root   html;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        #error_page  404              /404.html;</span><br><span class="line"></span><br><span class="line">        # redirect server error pages to the static page /50x.html</span><br><span class="line">        #</span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        # proxy the PHP scripts to Apache listening on 127.0.0.1:80</span><br><span class="line">        #</span><br><span class="line">        #location ~ \.php$ &#123;</span><br><span class="line">        #    proxy_pass   http://127.0.0.1;</span><br><span class="line">        #&#125;</span><br><span class="line"></span><br><span class="line">        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span><br><span class="line">        #</span><br><span class="line">        #location ~ \.php$ &#123;</span><br><span class="line">        #    root           html;</span><br><span class="line">        #    fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">        #    fastcgi_index  index.php;</span><br><span class="line">        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span><br><span class="line">        #    include        fastcgi_params;</span><br><span class="line">        #&#125;</span><br><span class="line"></span><br><span class="line">        # deny access to .htaccess files, if Apache&#x27;s document root</span><br><span class="line">        # concurs with nginx&#x27;s one</span><br><span class="line">        #</span><br><span class="line">        #location ~ /\.ht &#123;</span><br><span class="line">        #    deny  all;</span><br><span class="line">        #&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    # another virtual host using mix of IP-, name-, and port-based configuration</span><br><span class="line">    #</span><br><span class="line">    #server &#123;</span><br><span class="line">    #    listen       8000;</span><br><span class="line">    #    listen       somename:8080;</span><br><span class="line">    #    server_name  somename  alias  another.alias;</span><br><span class="line"></span><br><span class="line">    #    location / &#123;</span><br><span class="line">    #        root   html;</span><br><span class="line">    #        index  index.html index.htm;</span><br><span class="line">    #    &#125;</span><br><span class="line">    #&#125;</span><br><span class="line">#这个就是根据我们后台的服务器地址修改，有几个服务器就配置几个</span><br><span class="line">server &#123;</span><br><span class="line">listen       9001;</span><br><span class="line">        server_name  localhost;</span><br><span class="line"></span><br><span class="line">location ~ /eduservice/ &#123;</span><br><span class="line">proxy_pass http://localhost:8001;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location ~ /eduoss/ &#123;</span><br><span class="line">proxy_pass http://localhost:8002;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><blockquote><p>要记录一下吧，今天是我的生日啦，写完这篇我就要去许愿啦，真的希望能够实现叭<br>嘉楠，祝你生日快乐<br>一切的沉淀终将会有收获</p></blockquote>]]></content>
    
    
    <summary type="html">前端服务器</summary>
    
    
    
    <category term="前端" scheme="http://love.sunnyherry.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="前端" scheme="http://love.sunnyherry.cn/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>谷粒学苑(Day5-6)</title>
    <link href="http://love.sunnyherry.cn/_posts/35350.html"/>
    <id>http://love.sunnyherry.cn/_posts/35350.html</id>
    <published>2023-06-04T21:11:20.000Z</published>
    <updated>2023-08-06T14:11:38.837Z</updated>
    
    <content type="html"><![CDATA[<h1 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h1><blockquote><p>非常有必要说明一下，这个前端学的真的有点小乱小迷糊，因为它的代码太跳跃了，东一个西一个，虽然我知道都是封装好的但是还是得想好一会，也许是我没有系统的学习Vue吧，前端的知识基本上都是在写项目的过程中积累的，但没啥基础，能看懂但是不会写。还有前端的不规范性真的很不习惯，写错单词也不会报错，找错误就得好一会，也许多加字母了，也许漏写了，都不会给你提示报错，真的还挺痛苦的。<br>这两天有点像是大杂烩，实现了前端的讲师管理代码还有阿里云的云存储以及上传图片的后端代码，知识点还挺多。前端的我就直接挂源码了，看得懂就行。后端的知识得好好说一说。</p></blockquote><h1 id="前端讲师页面"><a href="#前端讲师页面" class="headerlink" title="前端讲师页面"></a>前端讲师页面</h1><h2 id="讲师路由"><a href="#讲师路由" class="headerlink" title="讲师路由"></a>讲师路由</h2><blockquote><p>在老师给的前端页面资料中，在src &gt; router &gt; index.js里面添加讲师路由，实现在操作中的页面跳转</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">//index.js</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/teacher&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Layout</span>,</span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/teacher/table&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;讲师管理&#x27;</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123; <span class="attr">title</span>: <span class="string">&#x27;讲师管理&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;example&#x27;</span> &#125;,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;table&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;讲师列表&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/edu/teacher/list&#x27;</span>),</span><br><span class="line">        <span class="attr">meta</span>: &#123; <span class="attr">title</span>: <span class="string">&#x27;讲师列表&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;table&#x27;</span> &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;save&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;添加讲师&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/edu/teacher/save&#x27;</span>),<span class="comment">//@/指的是当前文件所在的根目录下</span></span><br><span class="line">        <span class="attr">meta</span>: &#123; <span class="attr">title</span>: <span class="string">&#x27;添加讲师&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;tree&#x27;</span> &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;edit/:id&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;EduTeacherEdit&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/edu/teacher/save&#x27;</span>),</span><br><span class="line">        <span class="attr">meta</span>: &#123; <span class="attr">title</span>: <span class="string">&#x27;编辑讲师&#x27;</span>, <span class="attr">noCache</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">        <span class="attr">hidden</span>: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><h2 id="axios的封装"><a href="#axios的封装" class="headerlink" title="axios的封装"></a>axios的封装</h2><blockquote><p>老师将axios的代码全都封装了，真的很不习惯，很难看懂它是怎么样封装的<br>在src &gt; utils &gt; request.js下实现axios封装，节省了很多代码量</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Message</span>, <span class="title class_">MessageBox</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;../store&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; getToken &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/auth&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建axios实例</span></span><br><span class="line"><span class="keyword">const</span> service = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: process.<span class="property">env</span>.<span class="property">BASE_API</span>, <span class="comment">// api 的 base_url</span></span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">5000</span> <span class="comment">// 请求超时时间</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// request拦截器</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (store.<span class="property">getters</span>.<span class="property">token</span>) &#123;</span><br><span class="line">      config.<span class="property">headers</span>[<span class="string">&#x27;X-Token&#x27;</span>] = <span class="title function_">getToken</span>() <span class="comment">// 让每个请求携带自定义token 请根据实际情况自行修改</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// Do something with request error</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(error) <span class="comment">// for debug</span></span><br><span class="line">    <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// response 拦截器</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * code为非20000是抛错 可结合自己业务进行修改</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">const</span> res = response.<span class="property">data</span></span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">code</span> !== <span class="number">20000</span>) &#123;</span><br><span class="line">      <span class="title class_">Message</span>(&#123;</span><br><span class="line">        <span class="attr">message</span>: res.<span class="property">message</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">        <span class="attr">duration</span>: <span class="number">5</span> * <span class="number">1000</span></span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 50008:非法的token; 50012:其他客户端登录了;  50014:Token 过期了;</span></span><br><span class="line">      <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="number">50008</span> || res.<span class="property">code</span> === <span class="number">50012</span> || res.<span class="property">code</span> === <span class="number">50014</span>) &#123;</span><br><span class="line">        <span class="title class_">MessageBox</span>.<span class="title function_">confirm</span>(</span><br><span class="line">          <span class="string">&#x27;你已被登出，可以取消继续留在该页面，或者重新登录&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;确定登出&#x27;</span>,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">confirmButtonText</span>: <span class="string">&#x27;重新登录&#x27;</span>,</span><br><span class="line">            <span class="attr">cancelButtonText</span>: <span class="string">&#x27;取消&#x27;</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;warning&#x27;</span></span><br><span class="line">          &#125;</span><br><span class="line">        ).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          store.<span class="title function_">dispatch</span>(<span class="string">&#x27;FedLogOut&#x27;</span>).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            location.<span class="title function_">reload</span>() <span class="comment">// 为了重新实例化vue-router对象 避免bug</span></span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="string">&#x27;error&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> response.<span class="property">data</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;err&#x27;</span> + error) <span class="comment">// for debug</span></span><br><span class="line">    <span class="title class_">Message</span>(&#123;</span><br><span class="line">      <span class="attr">message</span>: error.<span class="property">message</span>,</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">      <span class="attr">duration</span>: <span class="number">5</span> * <span class="number">1000</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="讲师的前端请求"><a href="#讲师的前端请求" class="headerlink" title="讲师的前端请求"></a>讲师的前端请求</h2><blockquote><p>老师单独写在了 src &gt; api &gt; edu &gt; teacher.js下，前端请求接口一目了然</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1 讲师列表(条件查询分页)</span></span><br><span class="line">    <span class="comment">//current当前页 limit每页显示数 teacherQuery条件对象</span></span><br><span class="line">    <span class="title function_">getTeacherListPage</span>(<span class="params">current,limit,teacherQuery</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">            <span class="comment">//url: &#x27;eduservice/&#x27;+current+&quot;/&quot;+limit,</span></span><br><span class="line">            <span class="attr">url</span>: <span class="string">`/eduservice/teacher/pageTeacherCondition/<span class="subst">$&#123;current&#125;</span>/<span class="subst">$&#123;limit&#125;</span>`</span>,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">            <span class="comment">//teacherQuery条件对象 ，后端使用RequestBody获取数据</span></span><br><span class="line">            <span class="comment">//data表示把对象转换json进行传递到接口里面</span></span><br><span class="line">            <span class="attr">data</span>: teacherQuery</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">//删除讲师</span></span><br><span class="line">    <span class="title function_">deleteTeacherId</span>(<span class="params">id</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">`/eduservice/teacher/<span class="subst">$&#123;id&#125;</span>`</span>,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;delete&#x27;</span>,</span><br><span class="line">        &#125;)        </span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">//添加讲师</span></span><br><span class="line">    <span class="title function_">addTeacher</span>(<span class="params">teacher</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">`/eduservice/teacher/addTeacher`</span>,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">            <span class="attr">data</span>: teacher</span><br><span class="line">        &#125;)        </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//回显讲师</span></span><br><span class="line">    <span class="title function_">getTeacherInfo</span>(<span class="params">id</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">`/eduservice/teacher/getTeacher/<span class="subst">$&#123;id&#125;</span>`</span>,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span></span><br><span class="line">        &#125;) </span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">//修改讲师</span></span><br><span class="line">    <span class="title function_">updateTeacher</span>(<span class="params">teacher</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">`/eduservice/teacher/updateTeacher`</span>,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;put&#x27;</span>,</span><br><span class="line">            <span class="attr">data</span>: teacher</span><br><span class="line">        &#125;) </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="前端页面的展示部分"><a href="#前端页面的展示部分" class="headerlink" title="前端页面的展示部分"></a>前端页面的展示部分</h2><blockquote><p>没事就多看看这两个vue代码，基本上这两个看会了vue前端也就差不多了，记录一下。</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--回显讲师数据的页面--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--查询表单--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:inline</span>=<span class="string">&quot;true&quot;</span> <span class="attr">class</span>=<span class="string">&quot;demo-form-inline&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;teacherQuery.name&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;讲师名&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-select</span> <span class="attr">v-model</span>=<span class="string">&quot;teacherQuery.level&quot;</span> <span class="attr">clearable</span> <span class="attr">placeholder</span>=<span class="string">&quot;讲师头衔&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">:value</span>=<span class="string">&quot;1&quot;</span> <span class="attr">label</span>=<span class="string">&quot;高级讲师&quot;</span>/&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">:value</span>=<span class="string">&quot;2&quot;</span> <span class="attr">label</span>=<span class="string">&quot;首席讲师&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;添加时间&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-date-picker</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-model</span>=<span class="string">&quot;teacherQuery.begin&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">type</span>=<span class="string">&quot;datetime&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">placeholder</span>=<span class="string">&quot;选择开始时间&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">value-format</span>=<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">default-time</span>=<span class="string">&quot;00:00:00&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-date-picker</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-model</span>=<span class="string">&quot;teacherQuery.end&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">type</span>=<span class="string">&quot;datetime&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">placeholder</span>=<span class="string">&quot;选择截止时间&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">value-format</span>=<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">default-time</span>=<span class="string">&quot;00:00:00&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">icon</span>=<span class="string">&quot;el-icon-search&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;getList()&quot;</span>&gt;</span>查询<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;default&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;resetData()&quot;</span>&gt;</span>清空<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 表格 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-loading</span>=<span class="string">&quot;listLoading&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:data</span>=<span class="string">&quot;list&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">element-loading-text</span>=<span class="string">&quot;数据加载中&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">border</span></span></span><br><span class="line"><span class="tag">      <span class="attr">fit</span></span></span><br><span class="line"><span class="tag">      <span class="attr">highlight-current-row</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">        <span class="attr">label</span>=<span class="string">&quot;序号&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">width</span>=<span class="string">&quot;70&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">          &#123;&#123; (page - 1) * limit + scope.$index + 1 &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span> <span class="attr">label</span>=<span class="string">&quot;名称&quot;</span> <span class="attr">width</span>=<span class="string">&quot;80&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;头衔&quot;</span> <span class="attr">width</span>=<span class="string">&quot;80&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">          &#123;&#123; scope.row.level===1?&#x27;高级讲师&#x27;:&#x27;首席讲师&#x27; &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;intro&quot;</span> <span class="attr">label</span>=<span class="string">&quot;资历&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;gmtCreate&quot;</span> <span class="attr">label</span>=<span class="string">&quot;添加时间&quot;</span> <span class="attr">width</span>=<span class="string">&quot;160&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;sort&quot;</span> <span class="attr">label</span>=<span class="string">&quot;排序&quot;</span> <span class="attr">width</span>=<span class="string">&quot;60&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#x27;/teacher/edit/&#x27;+scope.row.id&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">icon</span>=<span class="string">&quot;el-icon-edit&quot;</span>&gt;</span>修改<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">icon</span>=<span class="string">&quot;el-icon-delete&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;removeDataById(scope.row.id)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">   <span class="comment">&lt;!-- 分页 --&gt;</span><span class="comment">&lt;!-- : 相当于v-bind实现单向绑定 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:current-page</span>=<span class="string">&quot;page&quot;</span>  </span></span><br><span class="line"><span class="tag">      <span class="attr">:page-size</span>=<span class="string">&quot;limit&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:total</span>=<span class="string">&quot;total&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">style</span>=<span class="string">&quot;padding: 30px 0; text-align: center;&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">layout</span>=<span class="string">&quot;total, prev, pager, next, jumper&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">current-change</span>=<span class="string">&quot;getList&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//引入调用teacher.js文件</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> teacher <span class="keyword">from</span> <span class="string">&#x27;@/api/edu/teacher.js&#x27;</span> </span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//写核心代码位置</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123; <span class="comment">//定义变量和初始值</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">list</span>: <span class="literal">null</span>, <span class="comment">//查询之后接口返回集合</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">page</span>: <span class="number">1</span>, <span class="comment">//当前页</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">limit</span>: <span class="number">10</span>, <span class="comment">//每页记录数</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">total</span>: <span class="number">0</span>, <span class="comment">//总记录数</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">teacherQuery</span>: &#123;&#125; <span class="comment">//条件封装对象</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>) &#123; <span class="comment">//页面渲染之前执行，一般调用methods定义的方法</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//调用methods里面的方法</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">getList</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123; <span class="comment">//创建具体的方法，调用teacher.js定义的方法</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//讲师列表的方法</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">getList</span>(<span class="params">page = <span class="number">1</span></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">page</span> = page</span></span><br><span class="line"><span class="language-javascript">            teacher.<span class="title function_">getTeacherListPage</span>(<span class="variable language_">this</span>.<span class="property">page</span>,<span class="variable language_">this</span>.<span class="property">limit</span>,<span class="variable language_">this</span>.<span class="property">teacherQuery</span>)</span></span><br><span class="line"><span class="language-javascript">                .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//response接口返回的数据</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">list</span> = response.<span class="property">data</span>.<span class="property">records</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">total</span> = response.<span class="property">data</span>.<span class="property">total</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">list</span>)</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">total</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125;)<span class="comment">//请求成功</span></span></span><br><span class="line"><span class="language-javascript">                .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123; </span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(error)</span></span><br><span class="line"><span class="language-javascript">                &#125;)<span class="comment">//请求失败</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">resetData</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//表单输入项数据清空</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">teacherQuery</span> = &#123;&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//查询所有讲师数据</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="title function_">getList</span>()</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//删除讲师的方法</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">removeDataById</span>(<span class="params">id</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// debugger</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// console.log(memberId)</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;此操作将永久删除讲师记录, 是否继续?&#x27;</span>, <span class="string">&#x27;提示&#x27;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">confirmButtonText</span>: <span class="string">&#x27;确定&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">cancelButtonText</span>: <span class="string">&#x27;取消&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">type</span>: <span class="string">&#x27;warning&#x27;</span></span></span><br><span class="line"><span class="language-javascript">          &#125;).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123; <span class="comment">//点击确定，执行then方法</span></span></span><br><span class="line"><span class="language-javascript">              <span class="comment">//调用删除的方法</span></span></span><br><span class="line"><span class="language-javascript">              teacher.<span class="title function_">deleteTeacherId</span>(id)</span></span><br><span class="line"><span class="language-javascript">                  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123; <span class="comment">//删除成功</span></span></span><br><span class="line"><span class="language-javascript">                  <span class="comment">//  提示信息</span></span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">this</span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript">                      <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                      <span class="attr">message</span>: <span class="string">&#x27;删除成功!&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                  &#125;);</span></span><br><span class="line"><span class="language-javascript">                  <span class="comment">//回到列表页面</span></span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">this</span>.<span class="title function_">getList</span>()</span></span><br><span class="line"><span class="language-javascript">              &#125;)</span></span><br><span class="line"><span class="language-javascript">          &#125;)<span class="comment">//点击取消方法省略</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--添加讲师和修改讲师页面，包括了第六天的图片上传前端代码--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">label-width</span>=<span class="string">&quot;120px&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;讲师名称&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;teacher.name&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;讲师排序&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input-number</span> <span class="attr">v-model</span>=<span class="string">&quot;teacher.sort&quot;</span> <span class="attr">controls-position</span>=<span class="string">&quot;right&quot;</span> <span class="attr">min</span>=<span class="string">&quot;0&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;讲师头衔&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-select</span> <span class="attr">v-model</span>=<span class="string">&quot;teacher.level&quot;</span> <span class="attr">clearable</span> <span class="attr">placeholder</span>=<span class="string">&quot;请选择&quot;</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">            数据类型一定要和取出的json中的一致，否则没法回填</span></span><br><span class="line"><span class="comment">            因此，这里value使用动态绑定的值，保证其数据类型是number</span></span><br><span class="line"><span class="comment">          --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">:value</span>=<span class="string">&quot;1&quot;</span> <span class="attr">label</span>=<span class="string">&quot;高级讲师&quot;</span>/&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">:value</span>=<span class="string">&quot;2&quot;</span> <span class="attr">label</span>=<span class="string">&quot;首席讲师&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;讲师资历&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;teacher.career&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;讲师简介&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;teacher.intro&quot;</span> <span class="attr">:rows</span>=<span class="string">&quot;10&quot;</span> <span class="attr">type</span>=<span class="string">&quot;textarea&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- 讲师头像：TODO --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 讲师头像 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;讲师头像&quot;</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 头衔缩略图 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">pan-thumb</span> <span class="attr">:image</span>=<span class="string">&quot;teacher.avatar&quot;</span>/&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 文件上传按钮 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">icon</span>=<span class="string">&quot;el-icon-upload&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;imagecropperShow=true&quot;</span>&gt;</span>更换头像</span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">          v-show：是否显示上传组件</span></span><br><span class="line"><span class="comment">          :key：类似于id，如果一个页面多个图片上传控件，可以做区分</span></span><br><span class="line"><span class="comment">          :url：后台上传的url地址</span></span><br><span class="line"><span class="comment">          @close：关闭上传组件</span></span><br><span class="line"><span class="comment">          @crop-upload-success：上传成功后的回调 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">image-cropper</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">v-show</span>=<span class="string">&quot;imagecropperShow&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">:width</span>=<span class="string">&quot;300&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">:height</span>=<span class="string">&quot;300&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">:key</span>=<span class="string">&quot;imagecropperKey&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">:url</span>=<span class="string">&quot;BASE_API+&#x27;/eduoss/fileoss&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">field</span>=<span class="string">&quot;file&quot;</span></span></span><br><span class="line"><span class="tag">                        @<span class="attr">close</span>=<span class="string">&quot;close&quot;</span></span></span><br><span class="line"><span class="tag">                        @<span class="attr">crop-upload-success</span>=<span class="string">&quot;cropSuccess&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">:disabled</span>=<span class="string">&quot;saveBtnDisabled&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;saveOrUpdate&quot;</span>&gt;</span>保存<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//引入调用teacher.js文件</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> teacherApi <span class="keyword">from</span> <span class="string">&#x27;@/api/edu/teacher.js&#x27;</span> </span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">ImageCropper</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/ImageCropper&#x27;</span><span class="comment">//引入组件</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">PanThumb</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/PanThumb&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123; <span class="title class_">ImageCropper</span>, <span class="title class_">PanThumb</span> &#125;,<span class="comment">//声明组件</span></span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">teacher</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">sort</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">level</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">career</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">intro</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">avatar</span>: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//上传弹框组件是否显示</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">imagecropperShow</span>:<span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">imagecropperKey</span>:<span class="number">0</span>,<span class="comment">//上传组件唯一标识</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">BASE_API</span>:process.<span class="property">env</span>.<span class="property">BASE_API</span>,<span class="comment">//获取dev.env.js里面地址</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">saveBtnDisabled</span>:<span class="literal">false</span>   <span class="comment">//保存按钮是否禁用</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">created</span>(<span class="params"></span>) &#123; <span class="comment">//页面渲染之前执行</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="title function_">init</span>()</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="attr">watch</span>: &#123; <span class="comment">//监听</span></span></span><br><span class="line"><span class="language-javascript">      $route(to,<span class="keyword">from</span>) &#123;   <span class="comment">//路由变化的方式，路由发生变化，方法就会被执行</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="title function_">init</span>()</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">close</span>(<span class="params"></span>) &#123; <span class="comment">//关闭上传弹框的方法</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">imagecropperShow</span>=<span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//上传组件初始化</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">imagecropperKey</span> = <span class="variable language_">this</span>.<span class="property">imagecropperKey</span>+<span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//图片上传成功的方法</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">cropSuccess</span>(<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">imagecropperShow</span>=<span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//上传之后接口返回图片地址</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">teacher</span>.<span class="property">avatar</span>=data.<span class="property">url</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">imagecropperKey</span> = <span class="variable language_">this</span>.<span class="property">imagecropperKey</span>+<span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">init</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//判断路径有id值，做修改</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;created&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">params</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">params</span>.<span class="property">id</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="comment">//从路径获取id值</span></span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">const</span> id = <span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">params</span>.<span class="property">id</span></span></span><br><span class="line"><span class="language-javascript">              <span class="comment">//调用根据id查询方法</span></span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="title function_">getInfo</span>(id)</span></span><br><span class="line"><span class="language-javascript">          &#125;<span class="keyword">else</span> &#123; <span class="comment">//路径没有id值，做添加</span></span></span><br><span class="line"><span class="language-javascript">              <span class="comment">//清空表单</span></span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">teacher</span> = &#123;&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//根据讲师id查询方法</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">getInfo</span>(<span class="params">id</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          teacherApi.<span class="title function_">getTeacherInfo</span>(id)</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">teacher</span> = response.<span class="property">data</span>.<span class="property">teacher</span></span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//修改讲师</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">updateTeacher</span>(<span class="params">teacher</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          teacherApi.<span class="title function_">updateTeacher</span>(<span class="variable language_">this</span>.<span class="property">teacher</span>)</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="comment">//提示信息</span></span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">this</span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">message</span>: <span class="string">&#x27;修改成功!&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                  &#125;);</span></span><br><span class="line"><span class="language-javascript">                  <span class="comment">//回到列表页面  路由跳转</span></span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123;<span class="attr">path</span>:<span class="string">&#x27;/teacher/table&#x27;</span>&#125;)</span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">saveOrUpdate</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//判断修改还是添加</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//根据teacher是否有id</span></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">teacher</span>.<span class="property">id</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="comment">//添加</span></span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="title function_">saveTeacher</span>()</span></span><br><span class="line"><span class="language-javascript">          &#125;<span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="comment">//修改</span></span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="title function_">updateTeacher</span>()</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//添加讲师方法</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">saveTeacher</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          teacherApi.<span class="title function_">addTeacher</span>(<span class="variable language_">this</span>.<span class="property">teacher</span>)</span></span><br><span class="line"><span class="language-javascript">              .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123; <span class="comment">//添加成功</span></span></span><br><span class="line"><span class="language-javascript">                  <span class="comment">//提示信息</span></span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">this</span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">message</span>: <span class="string">&#x27;添加成功!&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                  &#125;);</span></span><br><span class="line"><span class="language-javascript">                  <span class="comment">//回到列表页面  路由跳转</span></span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123;<span class="attr">path</span>:<span class="string">&#x27;/teacher/table&#x27;</span>&#125;)</span></span><br><span class="line"><span class="language-javascript">                  </span></span><br><span class="line"><span class="language-javascript">              &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="搭建阿里云oss操作项目环境"><a href="#搭建阿里云oss操作项目环境" class="headerlink" title="搭建阿里云oss操作项目环境"></a>搭建阿里云oss操作项目环境</h1><h2 id="基础配置"><a href="#基础配置" class="headerlink" title="基础配置"></a>基础配置</h2><blockquote><p>基本上就和第一天的一致,就改成8002端口然后不需要使用数据库所以就controller和service以及utils包就足够。<br>重点讲一下这个报错问题:<br>当这个oss模块不会使用到数据库操作时而且配置文件也没有配置数据库，那么就会报错<br><span class='p red'>Description: Failed to configure a DataSource: url' attribute is not specif Reason: Failed to determine a suitable driver class</span><br>原因就是启动的时候，找数据库配置，但是现在模块因为不需要数据库，只是做上传到oss功能。没有配置数据库，spring找不到数据库配置就会报错</p><p>解决方式:<br>1、添加上数据库配置<br>2、在启动类添加属性，默认不去加载数据库配置</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication(exclude = DataSourceAutoConfiguration.class)</span></span><br></pre></td></tr></table></figure><h2 id="将图片上传到阿里oss"><a href="#将图片上传到阿里oss" class="headerlink" title="将图片上传到阿里oss"></a>将图片上传到阿里oss</h2><blockquote><p>首先写了一个工具类，将阿里密钥和一些服务器ip用静态方式得到<br>很有意思的是看起来是私有的变量实际上用静态公有来得到，原因就是要想用springboot配置文件的参数，就必须用@value来得到，但是私有成员变量用静态就取不到value里面的值，所以只能多加公有静态变量直接后面可以直接.出来</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.oss.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.InitializingBean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">//当项目一启动, spring接口, spring加载之后,执行接口的一个方法</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConstAndPropertiesUtils</span> <span class="keyword">implements</span> <span class="title class_">InitializingBean</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//读取配置文件内容</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;aliyun.oss.file.endpoint&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String endpoint;<span class="comment">//不能直接用static静态，不然Value不能赋值给成员变量</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;aliyun.oss.file.keyid&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String keyId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;aliyun.oss.file.keysecret&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String keySecret;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;aliyun.oss.file.bucketname&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String bucketName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//定义公开静态常量</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String END_POINT;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String KEY_ID;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String KEY_SECRET;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String BUCKET_NAME;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterPropertiesSet</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        END_POINT = endpoint;</span><br><span class="line">        KEY_ID = keyId;</span><br><span class="line">        KEY_SECRET = keySecret;</span><br><span class="line">        BUCKET_NAME = bucketName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>核心代码就在OssServiceImpl，我就直接贴上来了</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.oss.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSS;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSSClientBuilder;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.oss.service.OssService;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.oss.utils.ConstAndPropertiesUtils;</span><br><span class="line"><span class="keyword">import</span> org.joda.time.DateTime;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OssServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">OssService</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">uploadFileAvatar</span><span class="params">(MultipartFile file)</span> &#123;</span><br><span class="line">        <span class="comment">// Endpoint以华东1（杭州）为例，其它Region请按实际情况填写。</span></span><br><span class="line">        <span class="comment">//调用我们自己写的ConstAndPropertiesUtils工具类，底层实际上是在.properties文件用value取值</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">endpoint</span> <span class="operator">=</span> ConstAndPropertiesUtils.END_POINT;</span><br><span class="line">        <span class="comment">// 阿里云账号AccessKey拥有所有API的访问权限，风险很高。强烈建议您创建并使用RAM用户进行API访问或日常运维，请登录RAM控制台创建RAM用户。</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">accessKeyId</span> <span class="operator">=</span> ConstAndPropertiesUtils.KEY_ID;</span><br><span class="line">        <span class="type">String</span> <span class="variable">accessKeySecret</span> <span class="operator">=</span> ConstAndPropertiesUtils.KEY_SECRET;</span><br><span class="line">        <span class="comment">// 填写Bucket名称。</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">bucketName</span> <span class="operator">=</span> ConstAndPropertiesUtils.BUCKET_NAME;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建OSSClient实例。</span></span><br><span class="line">        <span class="type">OSS</span> <span class="variable">ossClient</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OSSClientBuilder</span>().build(endpoint, accessKeyId, accessKeySecret);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//获取上传文件输入流</span></span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> file.getInputStream();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//获取文件名称</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//1 在文件名称里面添加随机唯一的值</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">uuid</span> <span class="operator">=</span> UUID.randomUUID().toString().replace(<span class="string">&quot;-&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line">            fileName = uuid+fileName;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//2 把文件按照日期进行分类</span></span><br><span class="line">            <span class="comment">//2019//11/12/01.jpg</span></span><br><span class="line">            <span class="comment">//获取当前的日期</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">nowTime</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DateTime</span>().toString(<span class="string">&quot;yyyy/MM/dd&quot;</span>);</span><br><span class="line">            <span class="comment">//继续拼接</span></span><br><span class="line">            fileName = nowTime+<span class="string">&quot;/&quot;</span>+fileName;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//调用oss方法实现上传</span></span><br><span class="line">            <span class="comment">//第一个参数 Bucket名称</span></span><br><span class="line">            <span class="comment">//第二个参数 上传到oss文件路径的名称和文件名称</span></span><br><span class="line">            <span class="comment">//第三个参数 输入流对象</span></span><br><span class="line">            ossClient.putObject(bucketName, fileName, inputStream);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//关闭ossClient</span></span><br><span class="line">            ossClient.shutdown();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//把上传之后文件路径返回</span></span><br><span class="line">            <span class="comment">//需要把上传到阿里云oss路径手动拼接出来</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;https://&quot;</span> + bucketName + <span class="string">&quot;.&quot;</span> + endpoint + <span class="string">&quot;/&quot;</span> + fileName;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> url;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception oe) &#123;</span><br><span class="line">            oe.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="课程分类模块"><a href="#课程分类模块" class="headerlink" title="课程分类模块"></a>课程分类模块</h1><h2 id="创建edu-subject数据库"><a href="#创建edu-subject数据库" class="headerlink" title="创建edu_subject数据库"></a>创建edu_subject数据库</h2><blockquote><p>终于到了新的功能区，知识点还是很多的，干货满满</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `edu_subject` (</span><br><span class="line">  `id` <span class="type">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;课程类别ID&#x27;</span>,</span><br><span class="line">  `title` <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;类别名称&#x27;</span>,</span><br><span class="line">  `parent_id` <span class="type">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;父ID&#x27;</span>,</span><br><span class="line">  `sort` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;排序字段&#x27;</span>,</span><br><span class="line">  `gmt_create` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;更新时间&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  KEY `idx_parent_id` (`parent_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 ROW_FORMAT<span class="operator">=</span>COMPACT COMMENT<span class="operator">=</span><span class="string">&#x27;课程科目&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="基础框架搭建"><a href="#基础框架搭建" class="headerlink" title="基础框架搭建"></a>基础框架搭建</h2><blockquote><p>和第一天的创建方法一致，代码生成器一键生成，还是在service_edu模块下，非常香！！所以不多说了嘻嘻</p></blockquote><h2 id="EasyExcel的使用-技术点"><a href="#EasyExcel的使用-技术点" class="headerlink" title="EasyExcel的使用(技术点)"></a>EasyExcel的使用(技术点)</h2><blockquote><p>之前我就有了解过，现在正式学，收获很多很多</p><h3 id="创建表头类"><a href="#创建表头类" class="headerlink" title="创建表头类"></a>创建表头类</h3></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.alibaba.excel.annotation.ExcelProperty;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoData</span> &#123;</span><br><span class="line">    <span class="comment">//设置excel表头的名称,index表示excel对应的列关系</span></span><br><span class="line">    <span class="meta">@ExcelProperty(value = &quot;学生编号&quot;,index = 0)</span></span><br><span class="line">    <span class="keyword">private</span>  Integer sno;</span><br><span class="line">    <span class="meta">@ExcelProperty(value = &quot;学生姓名&quot;,index = 1)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="读操作必备监听器"><a href="#读操作必备监听器" class="headerlink" title="读操作必备监听器"></a>读操作必备监听器</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.alibaba.excel.context.AnalysisContext;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.event.AnalysisEventListener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExcelListener</span> <span class="keyword">extends</span> <span class="title class_">AnalysisEventListener</span>&lt;DemoData&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//一行一行读取excel内容</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">invoke</span><span class="params">(DemoData demoData, AnalysisContext analysisContext)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;***&quot;</span> + demoData);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">invokeHeadMap</span><span class="params">(Map&lt;Integer,String &gt; headMap,AnalysisContext context)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;表头：&quot;</span> +headMap);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//读取完之后的操作</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doAfterAllAnalysed</span><span class="params">(AnalysisContext analysisContext)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="EasyExcel方法实现"><a href="#EasyExcel方法实现" class="headerlink" title="EasyExcel方法实现"></a>EasyExcel方法实现</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.demo.excel;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.EasyExcel;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestEasyExcel</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//实现excel写操作</span></span><br><span class="line">        <span class="comment">//1 设置写入文件夹的地址和excel文件名称</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">filename</span> <span class="operator">=</span> <span class="string">&quot;D:\\student.xlsx&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//调用easyExcel方法实现写操作</span></span><br><span class="line">        <span class="comment">//write方法两个参数：第一个参数文件地址和名称，第二个参数实体类.class</span></span><br><span class="line">        <span class="comment">//sheet方法指的是excel下面那个表栏</span></span><br><span class="line">        <span class="comment">//doWrite()表示你要写的东西，传的是集合</span></span><br><span class="line">        EasyExcel.write(filename, DemoData.class).sheet(<span class="string">&quot;学生列表&quot;</span>).doWrite(getData());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//实现excel读操作</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">filename1</span> <span class="operator">=</span> <span class="string">&quot;D:\\student.xlsx&quot;</span>;</span><br><span class="line">        EasyExcel.read(filename1, DemoData.class,<span class="keyword">new</span> <span class="title class_">ExcelListener</span>()).sheet().doRead();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建方法返回List集合</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> List&lt;DemoData&gt; <span class="title function_">getData</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;DemoData&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            <span class="type">DemoData</span> <span class="variable">data</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">DemoData</span>();</span><br><span class="line">            data.setSno(i);</span><br><span class="line">            data.setName(<span class="string">&quot;herry&quot;</span> + i);</span><br><span class="line">            list.add(data);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="EasyExcel实战"><a href="#EasyExcel实战" class="headerlink" title="EasyExcel实战"></a>EasyExcel实战</h2><blockquote><p>需求：实现使用excel表格的形式添加一级课程和二级课程到数据库中<br>基本思路：<br>实际上是一个读的操作，那么就需要表头类和监听器，主要的功能在监听器中实现，在这过程中有一个细节就是监听器类不能够交给spring管理，只能够手动的调用service类，然后用有参构造方法赋值来得到。详细见代码</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EduSubjectService subjectService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//添加课程分类</span></span><br><span class="line">    <span class="comment">//获取上传过来的文件，把文件内容读取出来</span></span><br><span class="line">    <span class="comment">//这个参数file指的就是客户上传的文件,可以读到</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;addSubject&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">addSubject</span><span class="params">(MultipartFile file)</span>&#123;</span><br><span class="line">        <span class="comment">//上传过来的excel文件</span></span><br><span class="line"></span><br><span class="line">        subjectService.saveSubject(file,subjectService);<span class="comment">//传入subjectService以便后面在监听器中使用</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><blockquote><p>下面是服务层接口</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EduSubjectService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;EduSubject&gt; &#123;</span><br><span class="line">    <span class="comment">//添加课程分类</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">saveSubject</span><span class="params">(MultipartFile file,EduSubjectService subjectService)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>实现类</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EduSubjectServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;EduSubjectMapper, EduSubject&gt; <span class="keyword">implements</span> <span class="title class_">EduSubjectService</span> &#123;</span><br><span class="line">    <span class="comment">//添加课程分类</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveSubject</span><span class="params">(MultipartFile file, EduSubjectService subjectService)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//文件输入流</span></span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> file.getInputStream();</span><br><span class="line">            <span class="comment">//调用方法进行读取</span></span><br><span class="line">            EasyExcel.read(inputStream, SubjectDemo.class,<span class="keyword">new</span> <span class="title class_">SubjectExcelListener</span>(subjectService)).sheet().doRead();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>监听器中实现核心代码</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SubjectExcelListener</span> <span class="keyword">extends</span> <span class="title class_">AnalysisEventListener</span>&lt;SubjectDemo&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//因为SubjectExcelListener不能交给spring进行管理，需要自己new，也不能注入其他对象</span></span><br><span class="line">    <span class="comment">//不能实现数据库操作</span></span><br><span class="line">    <span class="comment">//所以用有参构造自己拿</span></span><br><span class="line">    <span class="keyword">public</span> EduSubjectService subjectService;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SubjectExcelListener</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SubjectExcelListener</span><span class="params">(EduSubjectService subjectService)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.subjectService = subjectService;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//读取excel内容，一行一行的读取数据</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">invoke</span><span class="params">(SubjectDemo subjectDemo, AnalysisContext analysisContext)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(subjectDemo == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">GuliException</span>(<span class="number">20001</span>,<span class="string">&quot;文件数据为空&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//一行一行读取，每行读取有两个值，第一个值是一级分类，第二个值是二级分类</span></span><br><span class="line">        <span class="comment">//判断一级分类是否重复</span></span><br><span class="line">        <span class="type">EduSubject</span> <span class="variable">existOneSubject</span> <span class="operator">=</span> <span class="built_in">this</span>.existOneSubject(subjectService, subjectDemo.getOneSubjectName());</span><br><span class="line">        <span class="keyword">if</span>(existOneSubject == <span class="literal">null</span>)&#123; <span class="comment">//没有相同一级分类，进行添加</span></span><br><span class="line">            existOneSubject = <span class="keyword">new</span> <span class="title class_">EduSubject</span>();</span><br><span class="line">            existOneSubject.setParentId(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">            existOneSubject.setTitle(subjectDemo.getOneSubjectName());<span class="comment">//一级分类名称</span></span><br><span class="line">            subjectService.save(existOneSubject);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//判断二级分类是否重复</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">pid</span> <span class="operator">=</span> existOneSubject.getId();<span class="comment">//取一级分类的id值</span></span><br><span class="line"></span><br><span class="line">        <span class="type">EduSubject</span> <span class="variable">existTowSubject</span> <span class="operator">=</span> <span class="built_in">this</span>.existTowSubject(subjectService, subjectDemo.getTwoSubjectName(), pid);</span><br><span class="line">        <span class="keyword">if</span>(existTowSubject == <span class="literal">null</span>)&#123;</span><br><span class="line">            existTowSubject = <span class="keyword">new</span> <span class="title class_">EduSubject</span>();</span><br><span class="line">            existTowSubject.setParentId(pid);</span><br><span class="line">            existTowSubject.setTitle(subjectDemo.getTwoSubjectName());<span class="comment">//一级分类名称</span></span><br><span class="line">            subjectService.save(existTowSubject);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//判断一级分类不能重复添加，比如前端开发的一级分类不可能出现多次</span></span><br><span class="line">    <span class="keyword">private</span> EduSubject <span class="title function_">existOneSubject</span><span class="params">(EduSubjectService subjectService,String name)</span>&#123;</span><br><span class="line">        QueryWrapper&lt;EduSubject&gt; wrapper =<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">        wrapper.eq(<span class="string">&quot;title&quot;</span>,name);</span><br><span class="line">        wrapper.eq(<span class="string">&quot;parent_id&quot;</span>,<span class="string">&quot;0&quot;</span>);</span><br><span class="line">        <span class="type">EduSubject</span> <span class="variable">oneSubject</span> <span class="operator">=</span> subjectService.getOne(wrapper);</span><br><span class="line">        <span class="keyword">return</span> oneSubject;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//判断二级分类不能重复添加</span></span><br><span class="line">    <span class="keyword">private</span> EduSubject <span class="title function_">existTowSubject</span><span class="params">(EduSubjectService subjectService,String name,String pid)</span>&#123;</span><br><span class="line">        QueryWrapper&lt;EduSubject&gt; wrapper =<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">        wrapper.eq(<span class="string">&quot;title&quot;</span>,name);</span><br><span class="line">        wrapper.eq(<span class="string">&quot;parent_id&quot;</span>,pid);</span><br><span class="line">        <span class="type">EduSubject</span> <span class="variable">twoSubject</span> <span class="operator">=</span> subjectService.getOne(wrapper);</span><br><span class="line">        <span class="keyword">return</span> twoSubject;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doAfterAllAnalysed</span><span class="params">(AnalysisContext analysisContext)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><blockquote><p>要记录一下吧，今天是我的生日啦，写完这篇我就要去许愿啦，真的希望能够实现叭<br>嘉楠，祝你生日快乐<br>一切的沉淀终将会有收获</p></blockquote>]]></content>
    
    
    <summary type="html">讲师前端页面搭建</summary>
    
    
    
    <category term="前端" scheme="http://love.sunnyherry.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="项目" scheme="http://love.sunnyherry.cn/tags/%E9%A1%B9%E7%9B%AE/"/>
    
  </entry>
  
  <entry>
    <title>MBTI人格——INFJ</title>
    <link href="http://love.sunnyherry.cn/_posts/48715.html"/>
    <id>http://love.sunnyherry.cn/_posts/48715.html</id>
    <published>2023-06-01T21:11:20.000Z</published>
    <updated>2023-08-06T14:11:38.837Z</updated>
    
    <content type="html"><![CDATA[<h1 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h1><p>早在三月份的时候我就开始了解到MBTI的人格测试，当初抱着尝试的态度测了一下，我做的挺认真的，对于自我检测我还是比较细心的。结果是<span class='p red'>INFJ-Ti</span>，刚开始甚至不知道这些字母是什么意思，一个小老头的形象让我印象深刻，接着我就开始阅读INFJ的人格解析，发现和我的一些价值观和个性高度重合(当然也有一些出入),于是我开始注意到了MBTI相关的检测以及一些测试的依据。最早的时候在大一上的思想道德课上老师让我们测过艾森克人格测试，我把结果也告诉了老师，老师表述我的人格基本上也是高度重合。我发现用心理测试的方法能够大致的把所有人都划分多个区块，可能很多人觉得很扯淡，这些条条框框怎么可能把我这一个人都描述的清清楚楚呢？事实的确于此，人格测试不能够完美的描述任何一个人的，但它基本上可以确定一个大方向，也能够看见自己的一些不足。我一向对每个人的人格分析是感兴趣的，最近也很想通过了解自己的人格来看见自己不足的地方进而更好的改变自己。于是我在图书馆借了几本MBTI的书，看的不多但是也花了很多时间，看完的时候其实兴趣还是很大的，甚至想修软件工程和心理学双学位哈哈哈。看完肯定要有一些自己的见解，于是就有了这一篇文章，希望自己能够看清自己的灵魂，也能够长期的保持一个健康的人格心理。<br>首先会写一下MBTI相关的概念，以及内置的字母含义，当然侧重点都是INFJ的字母含义，有兴趣的可以自己去了解一下自己对应的人格。相关概念参考的是荣格的《心理类型》以及我最近在看的《天生不同——人格类型识别和潜能开发》。两本书都很好的阐述了MBTI中每个人格维度的作用以及组合起来奇妙的反应，期望我能够整理的好哈哈，有很多概念我可能没有写进来，<span class='p red'>我只是把最重要的和我在阐述INFJ里面会用到的部分写进来</span>，更多的内容大家就自己去看看书吧，真的蛮有趣的哈哈。</p><h1 id="前置内容-MBTI基本概念"><a href="#前置内容-MBTI基本概念" class="headerlink" title="前置内容(MBTI基本概念)"></a>前置内容(MBTI基本概念)</h1><h2 id="两种感知方式：感觉和直觉"><a href="#两种感知方式：感觉和直觉" class="headerlink" title="两种感知方式：感觉和直觉"></a>两种感知方式：感觉和直觉</h2><p>人类有两种截然不同的感知方式。一种方式是我们所熟知的“感觉”，<span class='p red'>感觉型的个体会利用身体的五种感官直接从环境中获取信息</span>。另一种方式是“直觉”，<span class='p red'>直觉型的个体会在无意识中对各种外部信息进行综合和联系，进而间接地对环境进行感知</span>。从日常生活中男人的预感和女人的直觉，到伟大的艺术成就和科学发展，“直觉”都功不可没。<br>在日常生活中，这两种不同的感知方式的存在是显而易见的。人们会通过感官获取信息，但也会捕捉到感官之外的很多线索。与此同时，荣格也在他的心理类型理论中指出，在注意过程中，感觉和直觉会相互争夺个体的注意资源，而对于大多数人来说，他们从小就会偏好其中一种感知方式。如果一个人更喜欢通过感觉来获取信息，那么他就会格外关注环境中的客观事实，并自动忽略那些凭空出现的想法。相反，那些更加相信自己直觉的人则会执着于探究可能出现的各种情况，对于眼前的各种事实却显得无动于衷。举例来说，在看书的时候，感觉型的人会把注意力集中在书本上的字句本身，而直觉型的人则会试图推敲作者的言外之意。<br>从童年开始，个体就会偏好某一种感知方式，个体发展的基本差异即由此开始。此时，个体已经有足够的能力来掌控自己的心理活动，他会额繁地使用自己偏好的感知方式来获取信息，并尽可能地回避自己不喜欢的感知方式。无论个体是偏好感觉还是直觉，他都会频繁地使用他更加喜欢的感知方式，密切关注这种方式所带来的信息，并基于这些信息来构建和更新自己对世界的认知。与此同时，另外一种不被偏好的感知方式则会退居幕后，不太受关注。<br>随着实践经验的不断积累，个体对于自己所偏好的感知方式的运用会愈发得心应手，对这一方式的信赖也愈发显著。与不被偏好的那种感知方式相比，个体对其偏好的感知方式的使用要成熟得多。不仅如此，个体对于某种感知方式的偏好和兴趣还会扩展到与之相关的各种行为和活动中去。不同的感知方式会导致个体对生活产生不同的理解，而个体也会因此而表现出各种不同的外在特征。<br>因此，随着年龄的增长，偏好不同感知方式的个体会逐渐展现出明显不同的发展路径。个体总会在熟悉的领域中表现得更加成熟，而在陌生的领域中则显得相对幼稚。而这两者都会影响到个体兴趣和精力的取向，个体会尽可能地选择那些与自己偏好的感知方式相关的活动，以便更多地展现自己的成熟而避免露出幼稚的马脚。在这个过程中，个体会逐渐发展出特定的表面特质，而这些特质出现的根源就在于个体内心深处对于某种感知方式的偏好。<br><span class='p red'>这就是感知(SN)偏好:S代表感觉(Sensing)，N代表直觉(iNtuition)。</span></p><h2 id="两种判断方式：思维与情感"><a href="#两种判断方式：思维与情感" class="headerlink" title="两种判断方式：思维与情感"></a>两种判断方式：思维与情感</h2><span class='p red'>通过对感知获得的信息的加工，个体会得出相应的结论。</span>不同个体在做结论时会采用不同的方式，这就是他们在判断方式上存在的差异。一种判断方式是“思维”，<span class='p red'>即通过理性的逻辑加工来获得客观的结论。</span>另一种方武是“情感”，<span class='p red'>是基于个人的主观价值取向对事物进行评估，这种评估同样是一个理性的过程。</span><p>与感知方式类似，人们对信息进行判断时存在两种不同的方式也是显而易见的。众所周知，在做判断和决定时，人们有时会依据思维，有时则会依据情感。即便对于同一件事情，这两种方式所得出的结论往往也并不致。荣格的理论指出，任何人都会天然地更加偏好并信赖其中一种判断方式。比如，对于眼前呈现的这一观点，思维型的读者会优先关注其连佛性和逻辑性;情感型的读者则会先评估自己是否喜欢这个观点，他们会判断眼前的新观点是否支持或者威胁自己的固有认知。<br>无论属于思维型还是情感型，孩子都会更频繁地使用自己所偏好的那种判断方式，他们会无条件地信任这种判断方式，也更愿意接受由这种方式所得出的结论。而由另外一种判断方式所得出的结论则仅供参考，他们会半信半疑，甚至充耳不闻。<br>因此，即便两个孩子利用相同的感官来获取信息，并采用相同的认知过程来加工信息，他们也会因为判断方式的不同而走上完全不同的发展路径。在使用自己偏好和熟悉的方式时，他们都会感到更加愉悦和高效。随着年龄的增长，情感型的孩子在处理人际关系时会显得左右逢源，思维型的孩子在各种事实和观点的组织上则更加游刃有余。这种个人或非个人的判断偏好最终使不同的个体展现出不同的表面特质。<br><span class='p red'>这就是判断(TF)偏好:T代表思维(Thinking)，F代表情感(Feeling)。</span></p><h2 id="外倾-内倾偏好"><a href="#外倾-内倾偏好" class="headerlink" title="外倾-内倾偏好"></a>外倾-内倾偏好</h2><p>当人们依据各自的偏好对事物进行感知和判断时，由于对内部世界外部世界的关注度不同，自然会表现出明显的差异。根据荣格给出的定和解释，内倾(Introversion)与外倾(Extraversion)是两种互为补充的活态度。<span class='p red'>内倾型个体更关注内部世界的抽象概念和想法，而外倾型个体更关注外部世界的各种人和事。</span>因此，如果条件允许，内倾型个体就会专注于对各种观点的感知和判断，<span class='p red'>而外倾型个体则会基于对外部环境的感知和判断来指导自己的行动。</span><br>但这并不意味着我们每个人都只能被局限在内部世界或者外部世界中发展良好的内倾型个体在必要的时候也能够对外部世界的各种人事应对自如，只不过相对而言，他们更擅长在脑子里思考各种抽象问题。同样，如果发展良好，外倾型个体也能够处理好抽象思维问题，只不过在通过实际行动应对具体的人事问题时，他们会更加得心应手。正如个体的左右利手取向一样，内外倾的偏好也是稳定不变的。右利手的人永远习惯使用自己的右手，而内倾型的人也永远更关注内部世界。<br>举例来说，在阅读本书时，有些读者会思考如何将书中介绍的理论付诸实践，这就是外倾型视角。而有些读者则更关注该理论背后所蕴含的新观念，他们会尝试借助这一理论来剖析自我、理解人性，这就是内倾型视角。<br>作为一个与感知和判断完全独立的维度，内外倾偏好中的内倾和外倾也能分别与上面提到的四种感知判断组合进一步组合。比如，在 ST 型的群体中、内倾感觉思维型个体(IST)善于组织与当下环境相关的各种事实和规则，因此他们很适合从事与经济或法律相关的职业。外倾感觉思维型个体(EST)则更关注环境本身，包括环境中那些无关的要素，这样的人无论做生意还是搞生产，总是无往不利、如鱼得水。外倾型的人行动迅速能够快速推进一件事情，内倾型的人则思虑周全，更能保证事情在预定的轨道上稳步推进。<br><span class='p red'>在NF 型的人群中，内倾直觉情感型个体(INF)会耐心、谨慎地构建自己的观念体系，并热衷于寻求永恒的真理。外倾直觉情感型个体(ENF)则渴望与人交流并将自己的想法付诸实践。外倾型个体取得的成就往往比较宽广，而内倾型个体获得的成就则堪称深厚。</span></p><h2 id="判断-感知偏好"><a href="#判断-感知偏好" class="headerlink" title="判断-感知偏好"></a>判断-感知偏好</h2><p>构成个体人格类型的最后一个维度是<span class='p red'>生活方式</span>，即在日常生活中，个体更偏好感知(Perception)还是更偏好判断(Judgment)。虽然在生活中我们既需要感知也需要判断，但这两种心理过程是不能同时进行的。因此我们总会在感知和判断之间来回切换。而有时候，这种切换会显得非常突然，比如，向来对孩子无比包容的父母可能会突然难以忍受孩子的哭闹。<br>在生活中，我们有时需要用心感知，有时则需要冷静判断，而更多的时候两种方式都是可行的。<span class='p red'>但大部分人都会更加偏好其中一种生活方式</span>比如，阅读至此，有些读者还在专心吸收、理解书中所阐述的内容，那么起码在这个当下，他们在使用感知功能。而另外一些读者则已经明确自己是否赞同书中的观点，这时他们就在进行判断。<br><span class='p red'>感知和判断是两种截然相反的态度。在做决策时，个体必须关闭自的感知，才能全身心地进行判断。</span>此时，个体需要提取所有与决策相关信息和证据，并忽略其他不相关的干扰因素，直到得出确切的结论。相反在感知过程中，个体必须停止判断，因为用于决策的信息尚未收集完毕事态随时可能发生变化，在这期间，得出任何定论都为时尚早。<br>不同的生活方式偏好会造就不同的人格特征，<span class='p red'>判断型个体总是把自己的生活安排的井井有条，而感知型个体则喜欢随遇而安。</span>生活方式并无好坏之分。如果个体懂得在必要的时候及时切换自己惯常的生活方式，那么无论是感知型还是判断型，都能生活得顺心如意。</p><h2 id="主导心理功能"><a href="#主导心理功能" class="headerlink" title="主导心理功能"></a>主导心理功能</h2><p>我们很容易识别个体偏好的感知和判断方式，却很难确定哪种心理功能才是他的主导功能。毫无疑问，一艘舰船需要一位绝对权威的船长来发号施令，才能顺利到达预定的港口。如果船上的每个人都轮流掌舵，肆意的更改目标并转变航向，那么这艘船永远都不可能顺利靠岸。<br><span class='p red'>同样，个体在决策的时候也需要一种权威力量作为主导。</span>为此，个体需要不断锻炼自己擅长的心理功能，使其强大到足以主导并统筹自己的生活。事实上，在事物发展变化的自然进程中，我们每个人都是这么做的。<br>下面有例子能够更好的推理自己的人格类型。比如对于某些外倾直觉思维型(ENT)个体来说，直觉要比思维有趣的多，由此，他们会将自己的直觉置于主导地位，而把思维作为辅助功能。他们的直觉享有不容置疑的绝对主导权，这是其他任何心理功能都不可企及的。在生活中(第四维度),他们会最大限度地享受、使用并信赖自己的直觉。又因为直觉属于一种感知方式，所以ENT型个体的生活方式也是感知的。由此，我们就可以进一步把以直觉为主导功能的ENT型个体称为外倾直觉思维感知型(ENTP)。<br>对于ENTP型个体来说，只有在思维判断的结果与自己的直觉不冲突时，他们才会注意那些非主导的心理功能。即便如此，依据这些功能的发展状况，个体也只是有限程度上去使用它们。在直觉的驱动下，他们会去追求某些目标，如果此时思维判断有助于实现自己的目标，他们就能顺利地使用自己的思维，但如果情况相反，他们是不会因为思维判断的阻止而放弃自己直觉到的目标的。<br>当然，也有人并不接受这种观点，他们认为自己对所有心理功能的使用是均等的，并不存在所谓的主导功能。荣格指出，这种现象确实存在，但对于各种心理功能的均等使用同时也阻碍了这些功能的发展和变化，进而导致个体处于一种“原始心理”的状态。在处理信息或者事务时，如果没有任何心理功能作为主导，那么两种相反的心理功能就会同时运作，并彼此干扰。如果其中一种感知功能想要得到更好的发展，那么个体就需要在这一功能上投入更多的精力，这就意味着另外一种感知功能必须经常关闭，如此一来，其发展自然会逐渐落后。而如果其中一种判断功能想要发展的更好，与之对立的另外一种判断功能也需要做出同样的牺牲。一种感知维度的心理功能(SN)和一种判断维度的心理功能(TF)可以同时发展，两者可以相互补充。<span class='p red'>但要想保证个体的生活效率，感觉(S)、直觉(N)、思维(T)、情感(F)这四种心理功能就必须分出主次，进而确保处于主导地位的心理功能得到最为充分的发展。</span></p><h2 id="辅助心理功能"><a href="#辅助心理功能" class="headerlink" title="辅助心理功能"></a>辅助心理功能</h2><p>对于个体来说，仅靠一种心理功能是远远不够的。<span class='p red'>为了维持生活的稳定运作，个体需要另外一种亦充分发展但相对较弱的心理功能作为辅助其作用主要是积极配合主导心理功能的发挥。</span>如果处于主导地位的心理功能属于判断维度，那么起辅助作用的心理功能就应该属于感知维度:无论感觉还是直觉，都可以为个体的判断提供强有力的信息支持。而如果是感知维度的某种心理功能主导着个体的生活，那么判断维度的心理功能就会处于辅助位置:无论思维还是情感，都可以为个体目标的实现提供源源不断的动力补充。<br>如果个体没有及时确定并充分发展自己的辅助心理功能，其不良影响是显而易见的。一个没有判断功能辅助的极端感知型个体，就好像一艘满帆却无舵的船，速度虽快却毫无方向。而一个没有感知功能辅助的极端判断型个体，则空有形式却毫无内容，往往显得苍白空洞。<br>除了在重要的生活事件上作为个体主导心理功能的补充，<span class='p red'>辅助心理功能还有另外一个职责: 维持外倾与内倾、外部世界与内部世界之间的平衡无论个体属于哪种人格类型，他们都会把自己的主导心理功能更多地投入到自己更感兴趣的事物上，而这些事物对于主导功能的吸引也是天经地义理所应当的。</span>对于个体来说，自己所选择的人生道路不仅趣味非凡，而目意义重大。只有在自己主动选择的领域中，个体才有可能最大程度地发挥自己的潜力并获得最大的成功，因此，个体必然要毫无保留地将自己最为擅长的心理功能投人其中。而如果个体在生活的次要方面投入过多，其主要人生目标的实现就会受到影响。因此，一般来说，生活中的次要事物都可以交由辅助心理功能来处理。<br>对于外倾型个体来说，他们的主导心理功能大都投注在外部世界的人和事上、而辅助心理功能则负责打理内部世界。如果没有辅助功能的配合。那么，相对于发展更为平衡的同伴而言，个体就会变得极端外倾和非常肤浅。<br>内倾型个体则不得不同时面对内外两个世界。无论他们是否情愿，外部世界都会展现在他们面前。内倾型个体把自己的主导心理功能用在了内部世界的各种想法上，辅助心理功能则负责应对外部世界的各种事务。事实上，主导功能会对辅助功能说:“你去处理外面那些烦人的事情，不到万不得已，不要来打扰我。”<br>由于外部世界中很多事情的结果都是显而易见的，所以不到万不得已.内倾型个体往往不太情愿动用自己的主导心理功能来处理外部事务。一旦开始这么做，他们就会在自己并无把握的外部世界中越陷越深，而这同时也会侵犯他们内心的隐私和平静<br><span class='p red'>因此，要想处理好外部世界的人和事，内倾型个体必须依靠辅助心理功能的帮助。如果处于辅助地位的心理功能发展不良，那么，内倾型个体在面对外部世界时就会局促不安、状况百出，并会深感不适。所以说</span></p><h2 id="外正内反定理-判定主导心理功能"><a href="#外正内反定理-判定主导心理功能" class="headerlink" title="外正内反定理(判定主导心理功能)"></a>外正内反定理(判定主导心理功能)</h2><p>对于外倾型个体来说，起主导心理功能时展露在外的，可以说显而易见。他们最信任、最擅长也最成熟的心理功能几乎都被投注在外部世界。由此，他们的主导心理功能时外显的，即便通过随意的接触，对方也能轻易发现。<br>内倾型的个体情况则截然相反。他们的主导心理功能向来是对内的，即便在必须面对外部世界的时候，他们也往往先动用自己的辅助心理功能。如果与他们的关系不是非常亲密，或者对他们的工作不是及其好奇时(这可能是接近内倾型个体的最好办法),一般人很难走进他们的内心。<span class='p red'>大多数人只能看见内倾型个体展现给外部世界的一面，但此时他们使用的往往是辅助心理功能，是他们第二擅长的功能。</span><br>有三种方法可以帮助我们从人格类型的四个字母组合中辨别出个体的主导心理功能。首先，处于主导地位的心理功能必然属于感知维度(第二个字母)或者判断维度(第三个字母).<br>我们可以从个体的判断和感知偏好(JP)中发现其主导心理功能，但是需要区别对待外倾型和内倾型个体。判断和感知偏好(JP)仅反映了个体应对外部世界的方式。正如前文所讲，外倾型个体会使用自己的主导功能来处理外部世界的事务，因此，我们可以直接通过他们的判断和感知偏好(JP)进行直接判别。如果一个外倾型个体的人格类型是以“J”结尾，那么他的生活方式就属于判断型，进而就可以推断他的主导心理功能应该是思维(T)或者情感(F)中的一种。反之亦然。<br>内倾型个体则恰恰相反，<span class='p red'>他们的主导心理功能并不会体现在判断和感知偏好(JP)中，因为他们一般不会动用自己的主导心理功能来处理外部事物，相反，在外部世界抛头露面的是他们的辅助心理功能。因此，如果一个内倾型个体的人格类型以“J”结尾，那么，他的主导功能反而应该是来自感知维度的感觉(S)或直觉(N)。反之亦然。</span></p><h2 id="人格阴影区"><a href="#人格阴影区" class="headerlink" title="人格阴影区"></a>人格阴影区</h2><p>在对具体的人格类型进行分析时，我们描述的都是该人格类型的最佳状态特征，也就是那些健康正常、身心和谐、适应良好、幸福快乐且高效能干的个体所表现出的特征，我们假设这此个体的主导心理功能和辅助心理功能都是充分发展的。但在现实生活中，每个个体的人格发展状态其实是千差万别的。<span class='p red'>如果个体的辅助心理功能存在缺陷，那么在对事物的感知和判断上，在平衡外部世界和内部世界上，个体就很容易失控。而如果个体的主导心理功能发展不良，他就会非常明显地呈现出所属人格类型的各种缺陷和问题，其他的典型能力和特征则几乎不见踪影。</span><br>无论个体的人格发展状态是好是坏，每个人都有一定的人格阴影区正如良好的人格特征是各种心理功能健康发展的结果，阴影区则是个体拒绝排斥那些心理功能造成的后果。在阴影区，个体会使用相对幼稚和原好的方式进行感知和判断，这些功能并不会服从于某个具体的意识目标，它们无视标准，肆意妄为，只想逃避健康人格的束缚。<br><span class='p red'>如果阴影区的人格失控，个体往往会万分懊悔。有人在经历了这种控后说:“我也不知道自己当时怎么会那样，我真的不是故意的!”无论体是否能够明确地意识到，很多令人遗憾的异常行为基本上都是阴影区人格的杰作。</span>在电影《窈窕淑女》(My Fair Lady)中，那位性情暴戾的享利。希金斯(Henry Higgins)教授就坚称自己是个“平静温柔的人”<br>了解阴影区是很有必要的，它可以解释人们表现出的一些看似奇怪的不盾的态度和行为。如果一个人的日常特征明显地属于某种人格类型，但他的某些行为又完全与这种人格类型相左，那么就可以考虑一下这些行为是好是坏。如果这些行为比他的日常行为差，那么很可能是他的人格阴影区在作祟<br>个体的人格类型是生活中各种意识倾向的产物，是个体的思维方式和习惯。之所以能够称其为习惯，就说明它们是好的、有趣的和可靠的。而阴影区的失控往往就发生在个体粗心大意的时候<br>有些内倾型个体极少关注外部世界，因此，负责他们外部世界的辅助心理功能也基本没有发展。他们对外的表现几乎都是无意识的，外界看到的大多都是他们的阴影区人格，而他们本人对此却毫无知觉。一位妻子用MBTI评价自己的丈夫是ISTJ(内倾感觉思维判断型 )，但她的丈夫其实是典型的ISFJ(内倾感觉情感判断型) ，只不过他很少对外表达自己的情感偏好，取而代之的是他的人格阴影区中无意识的且功能较差的思维偏好。</p><h1 id="INFJ——精神院的歌者"><a href="#INFJ——精神院的歌者" class="headerlink" title="INFJ——精神院的歌者"></a>INFJ——精神院的歌者</h1><h2 id="官方的评述"><a href="#官方的评述" class="headerlink" title="官方的评述"></a>官方的评述</h2><p>INFJ型的人天生懂得关心他人，这种特质有时会令他们显得非常“外倾”。事实上，<span class='p red'>外倾的并不是他们本身、而是他们的“情感”(F)心理功能。</span>因此，表面看来，INFJ型的核心人格特质似乎是友好与和善。<br>INFJ型的个人主义往往表现得不太明显，但这并不意味着他们内心的观点或信念不够明确或强烈，而是因为他们想借助和谐的人际关系赢得(而非要求)他人对自己观点的支持。一旦成功地获得了他人的理解和支持，与他人达成了合作，他们就会不露痕迹地带着自己的目标迅速地融人到集体当中。<br>INFJ型的人的创造力似乎比INTJ型弱一些。<span class='p red'>INTJ型的人往往运用“直觉”(N) 去探索科学问题，并且总能提出各种不可思议的想法;而INFJ型的人则把自己的“直觉”(N)倾注在人以及与人相关的各种问题上一一在人际关系这一问题上，无论多么深刻的见解都会显得缺乏新意无论多么精准的看法都会显得平淡无奇。</span><br>INFJ型的人关注人类的发展和幸福，他们可能会展现出“世人皆醉我独醒”的智慧，为了社会的进步提出旗帜鲜明的观点，并引发大型的群众游行、宗教运动或群体冲突。<br>“提倡者”们常常集各种特质于一身： 轻言细语却很有看法，为自己的信念不懈奋斗。 他们坚决果断，但不会把精力用在一己私利上 – 提倡者们行事风格有创造力，富有想象力，充满信念和感性，他们并非为了创造优势，而是建立平衡。 平等主义和因果报应是对他们很有吸引力的思想，他们相信用爱和同情来感化暴君的心是帮助这个世界最好的方式。<br>对提倡者人格类型的人来说，<span class='p red'>很容易与他人建立联系，他们的话语温暖感性有人情味，而非纯粹的逻辑与事实。 他们的同事和朋友把他们当作安静的外向类型是不无道理的，但他们要知道“提倡者”们需要独处的时间来养精蓄锐，所以对他们的突然离开不要太过惊讶。 “提倡者”们很在乎别人的感受，也希望被以同样的方式对待 — 这有时需要给他们留几天独处的时间。</span><br>最重要的是，倡导者人格类型的人要记得照顾好自己。 他们对信念的激情很可能超出自己所能承受的范围，一旦热情失控，他们很可能发现自己处于劳累，不健康和紧张的状态。 这在“提倡者”们对抗冲突和批评的时候尤其明显，他们的感性迫使他们尽一切可能逃避那些人身攻击，但是当情况不可避免时，他们会用很不理性且无益的方式反抗。<br>在“提倡者”们看来，世界充满了不必要的不平等。 没有任何其他类型比他们更适合发起一场或大或小的纠错运动。 他们只需要记得，在他们关心这个世界的同时，别忘了关照一下自己。</p><h2 id="内倾直觉Ni-主导功能"><a href="#内倾直觉Ni-主导功能" class="headerlink" title="内倾直觉Ni(主导功能)"></a>内倾直觉Ni(主导功能)</h2><p>心理学家Christopher Ross在对荣格八维的总结中，对内倾直觉Ni有一段非常白话的描述，类型理论的创始人John beebe对Ni的三个阶段的形容也就是从构想到确定，从确定到预测，于是总结出一句简短的话来形容Ni类型的人：<span class='p red'>Ni作为感知功能所提供的是一种内在的主观视野，而在Ni的视野中，现实当下的一切，都是为了更广阔的未来而服务的，而Ni通过构想不同的视角，来取得对于未来的视野，一直到能够至少确定一个明确的方向为止，在构想和确定之后，Ni也就形成了对未来的预测。换句话说就是通过自身的视野，看到了确定的未来。</span><br>一般来说，Ni人在视野中会直接看向未来，而且是长期的未来，但是一开始他们获得的信息会非常少，只能通过当下的现实(外倾感觉Se)做一些非常模糊的预测。但是虽然是认知不够的预测，但是这是Ni人控制不住的想要去预测，他们一定会把自己的目光放在长期的未来。也就是说对于Ni人来说，宁可看不清，也不愿意去看向可靠的清晰的短期的现实。然后Ni人会沉浸式地去模拟不同的轨迹(外倾感觉Se，也就是多个视角)，也就是说如果这个发生了，然后会怎么样，最终会达到什么样的结果。<span class='p red'>通过这样的一个过程，一步步地把这个模糊的未来给勾勒出来，更加的清晰，更加的明确。在这个过程中他们才能够得到确定感和安心感。但这也导致了Ni人很难把自己的想法彻底地表达出来，因为他们看到的本身，就不是一个单一视角下的一个静态的未来，而是很多视角汇聚起来的，一种动态的、流动的未来。</span>他们会习惯性的把当下看到的一切当做是未来的铺垫。因此当他们对未来没有足够确定的预期的话，Ni人会极度缺乏行动力，反而会滑向放纵享乐的深渊(外倾感觉Se)。同时他们也会被吸引着不断去审视他们视野中所看到的一切，也就是他们看到的未来。通过一遍一遍的审视，通过不同视角可能发生的所有变化，并且试图把这些变化也一起纳入对未来的预期中。<br>我们可看出Ni人非常擅长去切换视角，也就是我们说的换位思考。但这种转换视角不是指和别人共情，而是真的只是一种存粹的感知方式。就是在别人的角度下思考，Ni人能够得到什么不一样的信息，这对于他们是非常有助于获取信息的。也正是因为经常性的切换视角，Ni人总能够发现一些约定俗成规矩的一些bug，他们很喜欢用枚举的方式去得到新的认知，他们相信总有一些角度会看到它的局限性的。这种认知习惯其实是会让Ni人的视野变得庞大和复杂。毕竟他们又要去看到变化，把它纳入未来，然后又要去看的清晰，把变化穷尽，其实真的是一件非常难的事情。(内耗基石)<br><span class='p red'>对于Ni人来说呢，最让人焦虑的地方其实就是视野的清晰程度和庞大程度的矛盾。他们一方面会想看的更远，考虑的更加周全，纳入更多的变化；另一方面又会想看的更加清晰，排除掉额外的可能性，而最终的周全程度和清晰程度其实是永无止境的。这就是为什么Ni人很容易陷入完美主义的痛苦中。他们想要的完美是彻彻底底，毫无瑕疵，在未来都i能够实现的完美。虽然他们深知这种完美是不存在的，但是他们就是会忍不住的去追求，忍不住的一遍又一遍的去尝试。</span>不过当事情真的开始进展了，当他们的布局和预备已经没有办法回头更改的时候，其实Ni这个时候会进入到另外一种状态，开始去侧重应对变化(外倾感觉Se)，<span class='p red'>不会去沉淀于过去的错误。他们更加会关注说，ok我以前的计划失败了，那我现在应该去做什么，让他这个计划尽可能地重新靠近我想要的方向。</span><br>有人会把内倾直觉Ni说的很玄乎，把它比作预知未来，超强的感知力。<span class='p red'>其实Ni和Si都只是对信息进行主观整合的过程。Ni像是过滤装置，把外倾感觉Se收集的感官信息收束和聚焦，过滤成单一的某一个视野、蓝图或预想。</span>Ni主导的人的感知模式就像是打高尔夫球一样，一杆还没有挥出去，脑海里可能时球最后从哪个角度进洞的场景了。因为他们习惯把客观的感官信息迅速整合成了一个主观的视野，并通常认为事情会朝这个方向发展，也因为这种信息聚焦能力，确实能成功预测一些事情的走势，不过误判也很正常，即使看一眼场地就知道怎么打是最优解，可能真要挥杆了才发现，连球都打不到哈哈哈。简而言之Ni就是一种“看懂”和“看透”的功能。所以Ni主导的INFJ从小对人的动机非常敏感。(比如莫名其妙的搭讪，或者有一天突然有个人对我特别好，我的第一反应都是他们想要从我这得到什么？并且脑海中已经在疯狂思考到底他们要什么了。而且在简单的几句交谈之后，我就能马上洞察出对方背后的动机，然后做出非常舒适的回应)因此Ni作为第一个发展功能其实是相当辛苦的一件事情。在儿童阶段就了解太深，习惯去看人与事物背后的本质，也就明白了人的表里不一，人们会伪装，会使用谎言实现目的。这种深度通常也让INFJ在同龄人中会感到孤独(精神孤独)<br><span class='p red'>为什么INFJ往往让人感觉相处很舒服？</span>因为他们能瞬间用Ni捕捉到你喜欢怎样的回应，并且用Fe做出适当的表达。也恰好是因为知道别人不喜欢怎样的回应，所以在乎和谐在乎他人感受的天性，让INFJ很早就懂得“社交面具”的重要性。<br>举个例子吧，非常常见的例子对于每个人来说。当有人问我今天他的头发打理的好看吗？首先我的Ni直觉告诉我的结果是，你问出来这句话不是为了得到一个不好看才问的一定是为了得到一个合理性建议或者直接说好看来增加优越感而问出的问题，那么我的答案就已经确定了，不管在我的观念里面有多么不好看我都会尽我所能表现出，噢我觉得看起来挺好看的，比前几天好多了这类让别人听起来好听的话。这就是Fe的输出，是应对外界的方式。但实话实说，一般我这样的回答就是为了迎合别人罢了，这是最好保护自己心灵的方式也是最简单结束外界社交的方式。<span class='p red'>只有我真心的建议谁谁谁去怎么做，指出ta的缺点，那才是对于我来说真真正正重要的人，</span>但这样就说的别人很不开心，这又是对于Fe功能的否定，就会陷入自我矛盾中。</p><h2 id="外倾情感-辅助功能"><a href="#外倾情感-辅助功能" class="headerlink" title="外倾情感(辅助功能)"></a>外倾情感(辅助功能)</h2><p>作为INFJ的主要决策功能以及面对外部世界的主要功能，一般感觉来说INFJ把Fe当成和外界沟通的媒介，会去讨好他人、逃避冲突注重表面的和谐、能够共情的一种表达方式。其实这恰恰是Fe发展不成熟的表现。(看来我确实也没成熟，我觉得挺对的哈哈哈)成熟的Fe实际上一个非常非常理性的决策过程，<span class='p red'>它描述的是一个人下定决定做出判断的标准，而且是条理分明的标准，而这个标准的最终目的，用最简单的一句话概括就是确保自己与外界他人的和谐关系。</span>对于外倾情感Fe来说，社会是人与人彼此依靠的社会。有句话说的很好，人不为己，天诛地灭，世界上真的只有追求他人利益的人吗？也许没有，但世界上也没有一个集体完全追求个人的利益而最终延续下去。外倾情感的本质是它对于人与人之间的关系有更大的兴趣，也能够更自然的从人身上得到自己的见解。猴子挠背的故事应该人人都知道，猴子挠不到自己的后背于是找来几个伙伴互相挠背，最优解当然是围成一个圈圈，这样每只猴子都在挠背而且每只猴子也都在被挠背，但是只要有一只猴子不帮助别的猴子挠背时，那么很快的就会发现没有任何一只猴子愿意为别的猴子再挠下去了。Fe最想看见的就是每个人互帮互助，没有任何的私心，因此他们不介意先成为那个满足他人需要的人，因为他们觉得当一个人的需要被满足时，他就可以不再被自己的需要所困扰，就可以腾出时间精力，来满足他人的需要。这样一看Fe就是一个超级大圣母啊，他们爱着这个世界，希望通过自己的力量来让这个世界变得更加美好。大到世界，小到每个人。<br>虽然外倾情感是情感的一类，但是外倾情感能够满足的不只是情感，它可以满足不同层次的需求，生理需求、安全需求、社会需求、尊重需求、共情需求。他们的出发点是人的愿望或者立场，非常擅长站在别人的角度里看待问题，并且能够共情他人，从而满足对方最想要的需求，这是他们的动机，没有计算也没有测量，而是天生的、与生俱来的情感。<br>Fe最重要的理念应该是:集体大于个人，这是外倾情感Fe和内倾情感Fi最大的区别，虽然两者都很关注人的需要，但是内倾情感更加注重个人与自己内心的和谐，我能不能让自己舒服，而外倾情感更加注重集体的和谐，大家都满意了吗？外倾情感对于人的在意和关注丝毫不比内倾情感低，但是个人对于自身的关注在它的眼里，可以很重要，但是不应该成为集体的绊脚石。因为它更能意识到当一个人把自己的需求置于整个集体之上的时候，最后会像多米诺骨牌那样，导致每个人都很难受。但其实他们对于个人需求什么时候在集体需求之上是没有绝对标准的，他们会自己模拟投票。比如说上课有同学举手回答问题，如果Fe的人自己觉得他问的问题过于简单，那么Fe人就会认为这是在浪费时间，是不利于集体的；相反如果问了一个fe人觉得很有价值的问题，认为集体里面的每一个人都应该听一听，那么这个时候个人的利益其实是在集体之下的。所以Fe对于集体的立场是透明的，他们能够捕捉到集体里面目前最需要的是什么，他们也明白什么标准在集体里面是被允许的什么是越界的。<br>当他们独处的时候反而情绪的波动是没有那么大的，对于这Fe把集体看的那么重的人，他们就像是集体的一面镜子一样，Fe人的感受约等于环境的感受，当镜子感受不好的时候，往往意味着周围的人的感受不太好。但是非常有意思的是，当Fe不处在一个人的主导功能时时或者此功能发育不成熟时，就很容易出现反过来的状态，也就是把一个人的个人因素导致的状态，误以为是集体的状态，会从个别人的情感中感到不安，并且认为集体的情感基本上都会是这样，那么就会陷入自我危机中。因此他们往往倾向于逃避关系，比如直接不参加他们认为会感受很差的聚会，在看见个别人不喜欢在这个集体中时自己也会失落然后自己离开，但其实这都是他们自己的个人的视角，是不成熟外倾情感的一种体现。<br><span class='p red'>Fe人可以成为那个第一个挠背的猴子很久很久，但是他们的忍耐都是有限度的，他们想要的是自己对集体的帮助能够真正的帮助到每一个人，并且他们也非常希望自己的帮助能够被他人看见。如果这种善意被所有人忽视了，那么他们会非常受伤。这种努力想通过主动释放善意的方式想要被看见，想要来塑造和谐关系的一个愿望想要被实现，如果真的没有人能够明白的话，那么他们就会陷入一个极端的状态，称之为truth time。我们可以在他们吐槽的时候听到一些或者在他们真正忍受不了直接爆发的时候听到的更多。真相时刻就是当外倾情感的人被逼到墙角的时候终于开始站在内倾思维(Ti)发出声音。内倾思维(Ti)这个时候的一种体现就是：“噢我终于要为我自己，为了坚持自己的想法而生活了。”就比如Fe人爆发的时候，他们会说：“我都已经帮助你们那么多次了，这一次我就想为我自己做点事情不行吗？”这就是Fe的阴影区，其实对于他们来说来一次这样的爆发，真的可以让他们在真正焦虑委屈的时候好很多，很多...</span></p><h2 id="INFJ内耗本质-预期错位"><a href="#INFJ内耗本质-预期错位" class="headerlink" title="INFJ内耗本质(预期错位)"></a>INFJ内耗本质(预期错位)</h2><span class='p red'>INFJ的八维认知功能使用顺序依次为：Ni、Fe、Ti、Se、Ne、Fi、Te、Si。</span>Ni功能是INFJ的主导功能，而Fe和Ti次之。主导功能内倾直觉Ni是内倾的感知功能(第二维度)，是对信息的主观整理。辅助功能外倾情感Fe是做决策的首要功能(对外的第三维度)。Fe关注群体价值，在意人际关系的和谐，习惯考虑他人的感受。<span class='p red'>一二功能Ni和Fe通常是INFJ最惯用的功能组合。这种内倾感知+外倾判断的功能方式可以表述为:Ni+Fe=整合信息并输出。而对于INFJ和ISFJ这两个辅助功能是Fe的人格，往往特别看重情感层面，但是却把Fe功能使用的很克制，没有得到正常的输出。</span><p>Fe外倾情感和Fi内倾情感不同，Fe是需要和外界产生链接与互动的，外倾情感通过和他人/群体交换情感信息而完整。所以Fe为主导功能的ESFJ和ENFJ，通常能够自如的运用Fe，他们向他人、团体或社群释放情感能量的同时，懂得如何从外界获取自己需要的情感能量。<span class='p red'>而辅助功能位置的Fe容易顾此失彼，有时过分考虑他人而压抑自己的情感需求，到临界点时必然物极必反，开启自我保护措施，彻底放置考虑他人。集中在自己积压已久的情绪上。加上主导的时内倾的感知功能，“需求确定性”，对安全感有高标准，也容易对他人和环境产生不安全感，这进一步压抑INFJ整合信息后实实在在进行情感输出的需求。</span>因为害怕得不到正反馈。Fe在第二位置真的在INFJ看来是个非常麻烦的位置，使用虽然很自然，但不够自如。 </p><h3 id="Ni-Fe-内耗"><a href="#Ni-Fe-内耗" class="headerlink" title="Ni+Fe=内耗"></a>Ni+Fe=内耗</h3><span class='p red'>1、人际关系的边界不清晰</span><p>Ni天然想要整合和聚焦，所以有时仅根据有限的信息就形成对他人不真实的判断，交往后发现对方有些特点让自己不舒服，但是Fe考虑他人的感受，有时候无法直白的提出自己的需求(并不是有特点让自己不舒服就直接结束一段朋友关系，而是会最大限度的接受和理解，直到INFj自己内心再也承受不住。那种跟INFj发展过长期关系的人其实并不适用。)<br><span class='p red'>2、期待的情感回馈收不到</span><br>Ni聚焦视野意味着对未来发生的事情有着“确定性”的预期，第二功能Fe又长期压制自己想要的情感回馈，所以其实对他人有非常特定的预期，接收不到时又会失望，但又不想直接主动的索要，因此陷入内耗。(再次申明，这种内耗只是平时的正常社交会出现的，被INFJ接受的人其实展现的完全就是另外一个自己，当然也会对他们有预期，但健康的INFJ会理解和支持)<br><span class='p red'>3、对将要发生的事焦虑又缺乏掌控</span><br>Ni了解人的行为模式，比如知道某人会做某事，自己不希望这件事情发生，它也还没有发生，但Fe想要维持和谐又不想强硬阻止，所以不论这件事情最后发生与否都使INFJ陷入了焦虑内耗。</p><p>总结来说INFJ内耗的原因都是因为不如意的环境，自己有特定的预期，情绪又没能正确的对外疏导导致的。即1、被人与事所干扰 2、理想主义预期 3、压抑情绪情感</p><p>举个例子吧，感觉例子真的很好能够很好的解释一些INFJ内在的特质<span class='p red'>比如有个朋友跟我说，他明天要换一个交通方式上班，从地铁换成公交，那么我的Ni功能就会马上判断，不是只判断这一件事情，我可能会从他每天起床时间，做事情的习惯等等方面考虑，最终我会得出一个结论，完了，他明天换交通方式大概率会迟到，这是下意识的感知，就感觉你这样做了可能不如你原来做地铁。ok这样我的内心就有答案了，剩下的就是我应该怎么说出来或者表达。但是一般来说INFJ是不会说出来对别人不好的话的，因为第二功能的Fe对人的共情能力非常强，如果我说出来了你不应该坐公交，那么你可能就会觉得我在泼你冷水，还没试过呢你就知道我一定会迟到？是的我也想到了这种可能性，我不想让我的Fe受伤，ok那我只好说，你可以试一试。这个时候其实已经产生了一个矛盾了，就是我心里想的其实和我说出来的是不一样的，说出来会让他或者我受伤，不说出来感觉自己良心受到了谴责。甚至话题结束之后，我还会想自己刚才的推断是不是正确的，有没有说的得体一点。结果到了第二天的时候，他真的迟到了被扣工资了，他心里面内心就很糟糕，我看见了我一定会很善良的跟他说没事的没事的，下次不要换就行了。这是我一定会做的事情，可能他会发脾气在我身上昨天我说的时候你怎么不劝劝我。如果我说了其实你昨天说的时候我就感觉到你可能会迟到了，ok那完蛋了他一定会谴责你为什么不说出来啊？这个时候我就会陷入自我怀疑，对啊，我昨天为什么不告诉他啊？好像这一切的错都在我身上了，并且我自己也会承认这个错误我占了很大一部分。这样一分析不是不说会被骂，事后说了也会被骂吗？</span>。这就是因为INFJ自己Ni功能太强大了，他们会知道各种可能性，就像是织网一样，他们看见各种情况然后选择一个对自己，也对别人好的方式用Fe输出，但往往事情是不可能做到很理想的，势必有人会在这种矛盾中受伤，这种事情INFJ是很失望的，因为他们是很希望平衡的理想主义者。其实这样一看INFJ一点错误都没有，他们在任何一个时刻都考虑到了他人的感受，并且这件事情本来就和他们本无关系，你不告诉INFJ这件事情INFJ也不知道你会怎么做，但是只要一旦这件事情你知道了，就好像是别人委托给你一个非常非常重要的任务，那INFJ就会消耗自己用最好的方式去完成，往往把别人的事情看成自己的问题了。所以INFJ有时候的生活焦虑就来自于这，跟人相处的时候就是这样，一方面一看见了对方本身的言行不一，你又不好意思往更深处去问，害怕一问深了触碰到别人很不喜欢的领域了反过来谴责你你又会很受伤。然后呢INFJ只能将就着，有一种无力感，怎么做都不完美，怎么做都是有问题的。另外呢有些人说这个说那个，结果其实你感觉都不靠谱，因为INFJ的Ni功能早就已经有了自己的感知，并且INFJ会很相信自己的第一直觉，但Fe功能让他们选择性的跟别人说。而且其实很多时候INFJ表达不出来自己的直觉，只是Ni发挥作用的时候它不经判断，就比如做选择题INFJ很快的就能够感觉出来哪一个是正确答案(当然他们是已经对这方面有比较深的认知了),但他们其实不知道为什么或者说解释不了为什么，他们只是猜出了出题人的一个想法，或者做的多了Ni的模式识别能力已经看的够多了，掌握足够多的资料了，那么INFJ就会知道共性并直接得出判断。所以INFJ喜欢观察人，但也因人而焦虑，因为跟人相处真的太麻烦了，人不像科学的一般规律，他们是可以违反一些认知的，只要和INFJ中原本的认知不一致，那么他们就会陷入自我矛盾中。真的就像织网一样，本来织的好好的，然后突然中间给人来了一下(跟之前INFJ认识的人不一样了),那网就破了，那么INFJ的心里面就会很焦虑很焦虑，陷入自我封闭和怀疑中。所以我高中阶段批判的讨厌文学和一切关于人文的东西相反更加喜欢自然学科，这其实就是逃避、抵触人的一种心理。这样的INFJ心理其实已经是不健康的了。因为INFJ永远都是和人有强关联的，其实他们是很擅长社交的，只不过刚开始的时候使用不够成熟，需要成长。就像是现在我在学习心理学知识，就是一个提升自己认知的一个过程。</p><h3 id="INFJ处理内耗的方式"><a href="#INFJ处理内耗的方式" class="headerlink" title="INFJ处理内耗的方式"></a>INFJ处理内耗的方式</h3><p>非常的简单，既然Ni是主导功能，Fe是辅助功能，那么当INFJ有焦虑情绪的时候，其实这个时候他们的人格是不健康的，也就是我上面提到的已经进入了人格阴影区，INFJ会自己寻找自己认为最舒适的环境。那就是<span class='p red'>直接把外倾情感Fe关闭，让自己全部思想都投入到内倾直觉Ni中。</span>所以在外界看来INFJ是个多变的人，不成熟的INFJ常常会在焦虑的时候把自己关起来，既不对外输出也不对外输送任何东西。直接由内切断和外界的一切联系。这种doorslam的方式其实是INFJ自己的自我修复过程，就像是“充电”，在外使用的久了，能量被消耗殆尽了，那么就需要一段时间把自己封闭起来进行“充电”。这样时间久了会让INFJ变得外热内冷，平时对人的友善存粹变成了一种自保手段，这其实是很让人惋惜的。INFJ原本的温度过多的对外释放，外面又经常刮冷风，自己的内核也慢慢的凉了下来。<br>我自己作为INFJ人真的对这种处理方式深有体会，因为我在我初中的时候就开始有过这样的处理方式，而且当时真的非常极端，现在回想起来真的很不成熟。我初中的时候有时候甚至因为全班大部人都会一道题而我做错了大家都有优越感而我没有而产生焦虑。因为当时我心中的预期是简单的我都会，但真正发生的时候往往跟自己的心理预期不一致，于是我心里就会很焦虑，一遍遍的骂自己怎么这么废物啊，然后别人怎么安慰我都是没用的包括了我的母亲，只有自己和自己妥协了才是真正的解决了，走出了这个处理方式。所以我认为我的初中是灰暗的，我没有遇到我心中预期的那个人，甚至连朋友都没有，但是我很容易接受现实，我会告诉自己，也许自己真的很不容易被别人接受，自己的预期也没有人能够达到，那我就一个人吧。直到高中我遇到了我生命中最重要的人，真的能够肉眼的看出特别是高三的时候，我几乎再也没有用过这种自闭的方式处理自己的焦虑了，当然一开始我们也因为这件事情彼此受伤，但我觉得能够带我走出来的，并且一次次待在我旁边的，不希望自己再次陷入这种自闭状态而让别人担心的，你真的是第一个我也只能接受你。我开始看向现实生活而没有再全身心的看向未来，因为有你我觉得现在的现实真的很美好。与其说我变得成熟了，不如说是你进入了我的生活。</p><h3 id="摆脱内耗的建议"><a href="#摆脱内耗的建议" class="headerlink" title="摆脱内耗的建议"></a>摆脱内耗的建议</h3><p>1、温暖自己才能恒久的温暖他人<br><span class='p red'>温暖别人的前提是自己同样温暖，所以INFJ人们不如试试先温暖自己，建立边界感，对外只是选择性地温暖那些你乐意打开心门的人，同时也要意识到自己的能力其实是有限的，没有必要说周围的所有人包括自己讨厌的、价值观不一样的人都报以温柔的态度，试一试自私一些。</span>就像是在这个过程中学会向他人索要温度，因为Fe是相互的，只有得到的足够的热量，浴火重生后的INFJ才可能外热内也热。其实我们可以看到INFJ人其实是非常缺乏被人讨厌的勇气的，他们不想因为自己的一些错误而被别人讨厌，甚至因为自己的存在而被整个集体所讨厌，他们好像天生的就知道自己在哪些集体或者人身上能够做真实的自己，但他们也希望其它的关系自己也能够融入进去，不惜改变自己的人格，用多个面具来适应环境。试着做本来的自己，减少对自己的特殊感也许能够帮助INFJ减少内心的猜忌，让自己在真正社交中能够看见真实的自己，不肆意揣测别人的看法，让社交变得简单以及理所当然。<br>2、加强共情<br>有很大一部分内耗的原因就是因为共情过度，那么为什么还要加强共情呢？加强共情能力是INFJ成长的必由之路。即使这就是他们原本的天赋，但人生的早期这个天赋并没有充分发挥。也许INFJ也许是后劲最足的人格类型，但是这一切取决于它们的成长程度。INFJ青少年时代发展完Ni后开始逐渐发展Fe，就像前面我说过的这两个功能的组合给INFJ造成了许多困扰，我想这也是互联网中INFJ那么多的原因，毕竟网上的INFJ们年龄也不会太大。<span class='p red'>没有足够阅历和知识支撑的Ni，有时是盲目、固执、甚至是自卑的，而缺失了第三功能内倾思维Ti的Fe，所产生的共情力其实也是不够完整的。</span><br>共情Empathy，它又可以分成情绪共情和认知共情。情绪共情是和对方分享情绪感受的能力，也就是我们通常理解的共情。比如看见一个伤心的人在哭，自己立马也能感受到伤感，情绪共情是情感型人格的普遍天赋(F)。<span class='p red'>但外倾情感Fe通常是直接情绪共情他人，具有“广”的特性。</span>内倾情感Fi呢则是代入自己去共情换位后能够感同身受的人，具有“深”的特性。由于INFJ能够迅速洞察他人的情绪并建立共情，所以这其实也很影响他们自己的情绪。<br>再说认知共情，它更像是一种可以后天训练出来的共情能力，是根据对方的特点和情况进行思考，会去理解为什么他人“为什么”有某种行为，“为什么”会有这种感受，试着用对方的角度去想问题和理解问题。换句话说是一种思维上的共情<br>一般INFJ能够两者都很擅长，但是后者的认知共情在发展了健康的Ti之后会更加容易实现。Ni让INFJ了解他人是怎样的人，会有怎么样的感受，Fe再和外界建立情绪链接，所以情绪共情往往是非常自然的。但没有Ti支撑的Ni的了解，并不是真正的“理解”，相当于我知道你是谁，会怎么做，但其实我根本不知道或者不理解为什么你会这样做。有点知其然而不知其所以然的味道，主观上了解而不理解，同时还很在意，那么了解往往就变成了一种负担，在不如啥也不知道来的自在快活，这也是INFJ的人生前期感觉很累的一个原因<br><span class='p red'>加强共情其实就是加强认知共情，认知共情所带来的理解，不仅能够让自己更加容易接受人与人之间的差异，明白他人总是无法满足自己的预期的原因，能够更容易的做出调节，对外对内都达成和解。同时呢认知共情还能够更好地帮助自己建立情绪的边界，因为认知功能可以解锁抽离视角看待人和事，也包括自己，也能更加清楚自己的情绪源头，以及自己想要什么不想要什么，有了明确的心理疆界，就不至于被天使强大的情绪共情绑架和困扰，最后不得不关闭Fe的方式来自愈。</span><br>提升认知共情的最好方式就是提升阅历，虽然INFJ随着年龄的增长自己的阅历肯定会有所增加也会有所成长，但那是相对被动的。最好的就是多看书，尤其是心理学的书籍，只有自己的深度足够深，才可以在Ni功能上发挥的更好，也能在Fe输出时得到一个满意的解释。很遗憾我小时候基本上没读过义务教育之外的书籍，导致我的知识面很狭隘，所以会不自信，会觉得自己的Ni判断总是错的。现在在大学得多读书，不管是什么书，社会学还是心理学还是哲学只要是自己有感兴趣的，能够改变自己提升自己认知的，我觉得都是非常值得花时间的。也许短期时间内看不出成效，但坚持下去对于想要改变的INFJ人来说，应该是非常容易的。其实了解MBTI，写了这篇两万字的INFJ分析，其实就是提升Ti的过程。在这个过程中真的很享受，INFJ人想要了解自己真的是一件很酷的事情，就像是《三体》里面罗辑说的一样：“罗辑，我是你的破壁人。”当然距离完全认识自己还有很长很长的路要走，但只要心中有一颗想要改变自己的心，INFJ人一定会做到！</p><h2 id="INFJ的优势"><a href="#INFJ的优势" class="headerlink" title="INFJ的优势"></a>INFJ的优势</h2><ul><li>有远见的。INFJ 以他们的愿景为导向，并能迅速掌握潜在的含义、模式和含义。他们可以快速看到事件将如何发展，并且在追求理想或未来计划时非常具有战略意义。</li><li>善解人意。INFJ 非常关心他人，并且通常非常关注他人的感受。他们通常是很好的倾听者，并且非常关心改善世界和外界人们的生活。他们在追求上可以非常无私。</li><li>决定。INFJ 通常是由对未来的单一愿景驱动的。他们充满热情地相信自己的远见和洞察力，以至于他们可以不懈地追求目标或理想。一旦他们确定了自己的人生道路，就很难劝阻。</li><li>有见地。INFJ 很快就会发现隐藏的含义、联系和关系。他们经常可以看到其他人错过或忽略的线索和真相。他们总是问自己，“这里还有什么事情发生？” 所以他们经常看到别人神秘地不存在的东西。</li><li>有创造力的。INFJ 通常有动力为未来开辟新的创新道路。他们富有想象力和复杂性，喜欢用他们的想象力来写作、创造艺术，甚至追求革命性的商业理念。</li></ul><h2 id="INFJ的劣势"><a href="#INFJ的劣势" class="headerlink" title="INFJ的劣势"></a>INFJ的劣势</h2><ul><li>完美主义。INFJ 以其崇高的理想和远大的愿景而闻名。他们常常坚持高不可攀的标准，并在未能达到这些标准时感到非常沮丧。他们可能会非常努力地做到“完美”，以至于他们对目前拥有的东西长期不满意。</li><li>容易倦怠和过度刺激。由于 INFJ 的感知能力较差，他们很容易因过度的感官刺激而筋疲力尽。此外，因为他们有如此崇高的理想，对自己的内心如此私密，他们可能会在没有他人支持的情况下将自己推向精神崩溃的地步。</li><li>隔离。由于 INFJ 在早年生活中经常被误解，许多人变得谨慎并保护自己的内在自我。他们觉得没有人会真正“理解”他们的愿景或想法，他们永远都是局外人。他们可以与孤独作斗争，并与与他人分离的感觉作斗争。</li><li>对批评敏感。INFJ 倾向于非常关心和谐和他人对他们的看法。他们也非常注重完美，以至于他们可以非常努力地接受批评，并为此感到非常羞耻。他们往往很难不亲自接受批评，并且会尽量避开那些习惯于定期批评的人。</li><li>拖延。INFJ 可能需要很长时间才能确定目标或决定。因为他们以感知过程为先导，所以在决定采取行动之前，他们可能需要花费大量时间进行分析、提出问题并试图发现隐藏的真相和复杂性。这可能意味着他们需要很长时间才能做出决定，或者浪费时间寻找没有意义的更深层次的意义。</li></ul><h2 id="给INFJ的一些话"><a href="#给INFJ的一些话" class="headerlink" title="给INFJ的一些话"></a>给INFJ的一些话</h2><p>「已识乾坤大，犹怜草木青。」</p><p>“请你务必，一而再，再而三，三而不竭，千次万次，毫不犹豫地救自己于人间水火。” </p><p>相信人性本恶，却不断寻找人性的光辉。<br>目睹世界残酷，但依然坚持最初的理想。<br>难以获得理解，可从未停止柔软的善意。<br>如果世间有理想主义者的赞歌，<br>那一定是为他们而写。<br>或者他们就是谱写者。​</p><p>“在外表现出来的温和而深沉，理解任何事物似乎都是通透的，对生活充满了希望，像一个哲学家，理智且感性​。内在往往像暴风雨，在自己的世界不断地呐喊撕裂，永远矛盾的内心。似汹涌的火在翻滚，像热烈的浪在燃烧，怪诞且癫狂。​”</p><p>“通过积累有意义的知识，不断理解并建立人与人之间的关系，以求创造共荣的长久价值”</p><h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p>INFJ小老头在这个世界上时常感到很孤独不被理解，同时又会有较强的心理防线，现实中不愿意对人袒露想法，需要从网络上的相关视频里面去获得一些现实中遥不可及的被共情的感觉。其实先温暖自己一定是好的，不过在自我认知之后，记得对别的人格类型也保持好奇心呀！<br>全篇难免会有我自己的主观色彩在里面，但自己作为INFJ，描述的很多例子其实也很具有参考价值。写了那么多不是为了给谁看的，应该也没有人会来看那么多长篇大论，最重要的是对我自己的重要性，整个写作过程下来对我来说的帮助是极大的，不管是一开始我自己看书的感受还是我现在写下来的感受，都让我感觉到INFJ的人格魅力，其实他们真的对这个世界充满爱意，对所有人也充满爱意，但就是忘了好好的爱自己。这种大爱的精神我不知道什么时候才遇见过，也许是尧舜禹时代？也许是战国孔子的天下大同？在现在这个社会INFJ其实是很矛盾的一个人格存在体，在充满利益、黑暗的社会中INFJ人往往是非常不适应的，因为这和他们的内心完全违背，但又不得不适应环境。我觉得虽然在美国的数据中INFJ人格是最少的，但是在中国我觉得占比会翻一倍。中国的家庭教育真的会影响孩子一辈子的走向，那又会有多少孩子像我小时候一样，早已看透世界的丑陋，在自己的内心种下一颗向日葵呢？<br><span class='p red'>最后，INFJ在善待这个世界的同时，也不要忘记好好善待你身边真正爱你的人呀。</span></p>]]></content>
    
    
    <summary type="html">INFJ——鼓舞人心的理想主义者</summary>
    
    
    
    <category term="专业之外" scheme="http://love.sunnyherry.cn/categories/%E4%B8%93%E4%B8%9A%E4%B9%8B%E5%A4%96/"/>
    
    
    <category term="INFJ" scheme="http://love.sunnyherry.cn/tags/INFJ/"/>
    
  </entry>
  
  <entry>
    <title>谷粒学苑(Day3-4)</title>
    <link href="http://love.sunnyherry.cn/_posts/25111.html"/>
    <id>http://love.sunnyherry.cn/_posts/25111.html</id>
    <published>2023-05-31T21:11:20.000Z</published>
    <updated>2023-08-06T14:11:38.837Z</updated>
    
    <content type="html"><![CDATA[<h1 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h1><blockquote><p>真的是要全栈了，提前了解多个方向也挺好的，说不定到了后面就转了哈哈。没有想到谷粒学苑前端讲的都这么细，真得好好学了。虽然在学Javaweb的时候在黑马学了一点前端的基础，html的常用标签以及css和JavaScript常规语法，但是好像已经忘记了，当时只截了图没有像这样做过笔记，现在可得好好的再看一次了。加油！(ง •_•)ง<br>我必须说一下这第四天的学习，很乱，我都不知道怎么记笔记了。学的好多东西我感觉我现在写的时候都忘记了。只能大概梳理一下加深一下印象了。</p></blockquote><h1 id="前端ES6标准"><a href="#前端ES6标准" class="headerlink" title="前端ES6标准"></a>前端ES6标准</h1><h2 id="ECMAScript-6-简介"><a href="#ECMAScript-6-简介" class="headerlink" title="ECMAScript 6 简介"></a>ECMAScript 6 简介</h2><blockquote><p>1、ECMAScript 和 JavaScript 的关系<br>一个常见的问题是，ECMAScript 和 JavaScript 到底是什么关系？<br>要讲清楚这个问题，需要回顾历史。1996 年 11 月，JavaScript 的创造者 Netscape 公司，决定将 JavaScript 提交给标准化组织 ECMA，希望这种语言能够成为国际标准。次年，ECMA 发布 262 号标准文件（ECMA-262）的第一版，规定了浏览器脚本语言的标准，并将这种语言称为 ECMAScript，这个版本就是 1.0 版。<br>因此，ECMAScript 和 JavaScript 的关系是，前者是后者的规格，后者是前者的一种实现（另外的 ECMAScript 方言还有 Jscript 和 ActionScript）</p><p>2、ES6 与 ECMAScript 2015 的关系<br>ECMAScript 2015（简称 ES2015）这个词，也是经常可以看到的。它与 ES6 是什么关系呢？<br>2011 年，ECMAScript 5.1 版发布后，就开始制定 6.0 版了。因此，ES6 这个词的原意，就是指 JavaScript 语言的下一个版本。<br>ES6 的第一个版本，在 2015 年 6 月发布，正式名称是《ECMAScript 2015 标准》（简称 ES2015）。<br>2016 年 6 月，小幅修订的《ECMAScript 2016 标准》（简称 ES2016）如期发布，这个版本可以看作是 ES6.1 版，因为两者的差异非常小，基本上是同一个标准。根据计划，2017 年 6 月发布 ES2017 标准。<br>因此，ES6 既是一个历史名词，也是一个泛指，含义是 5.1 版以后的 JavaScript 的下一代标准，涵盖了 ES2015、ES2016、ES2017 等等，而 ES2015 则是正式名称，特指该年发布的正式版本的语言标准。本书中提到 ES6 的地方，一般是指 ES2015 标准，但有时也是泛指“下一代 JavaScript 语言”。</p></blockquote><h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><h3 id="let声明变量"><a href="#let声明变量" class="headerlink" title="let声明变量"></a>let声明变量</h3><blockquote><p>var声明的变量没有局部作用域<br>let声明的变量有局部作用域</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//es6如果定义一个变量，定义变量特点</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//js定义：var a = 1;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//es6写法定义变量，使用关键字 let   let a = 1;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//1、创建代码块，定义变量</span></span></span><br><span class="line"><span class="language-javascript">    &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> a = <span class="number">10</span>;<span class="comment">//在里外都可用(全局使用)</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> b = <span class="number">20</span>;<span class="comment">//在外不可用了(局部使用)</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//2、在代码块 外面输出</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(b);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//var可以声明多次</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//let只能声明一次</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> a = <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> a = <span class="number">2</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> m = <span class="number">10</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(m);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="const声明常量"><a href="#const声明常量" class="headerlink" title="const声明常量"></a>const声明常量</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//定义常量</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> <span class="variable constant_">PI</span> = <span class="string">&quot;3.1415926&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//常量值一旦定义，不能够改变</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//PI = 3;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//定义常量必须初始化</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable constant_">PI</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h3><blockquote><p>解构赋值是对赋值运算符的扩展。<br>他是一种针对数组或者对象进行模式匹配，然后对其中的变量进行赋值。<br>在代码书写上简洁且易读，语义更加清晰明了；也方便了复杂对象中数据字段获取。</p></blockquote><p>数组解构以及对象解构<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//数组解构</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//传统写法</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> a=<span class="number">1</span>,b=<span class="number">2</span>,c=<span class="number">3</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a,b,c);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//es6写法</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> [x,y,z] = [<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>];</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(x,y,z);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//定义对象</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> user = &#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;Herry&quot;</span>,<span class="string">&quot;age&quot;</span>:<span class="number">20</span>&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//传统从对象里面获取值</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> name1 = user.<span class="property">name</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> age1 = user.<span class="property">age</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(name1+<span class="string">&quot;==&quot;</span>+age1);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//es6写法从对象里面获取值</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> &#123;name,age&#125; = user<span class="comment">//注意大括号中的name和age要和定义的对象属性值一致</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(name+<span class="string">&quot;**&quot;</span>+age);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="模板字符串"><a href="#模板字符串" class="headerlink" title="模板字符串"></a>模板字符串</h3><blockquote><p>模板字符串相当于加强版的字符串，用反引号 `,除了作为普通字符串，还可以用来定义多行字符串，还可以在字符串中加入变量和表达式。</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//1 使用`符号实现换行</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> str1 = <span class="string">`hello,</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">    es6 demo up!`</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(str1)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//2 在`符号里面可将字符串插入变量和表达式，变量名写在$&#123;&#125;中，$&#123;&#125;中可以放入JavaScript表达式</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> name =<span class="string">&quot;Mike&quot;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> age = <span class="number">20</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> str2 = <span class="string">`hello,<span class="subst">$&#123;name&#125;</span>,age is <span class="subst">$&#123;age+<span class="number">1</span>&#125;</span>`</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(str2)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//3 在`符号里面，字符串中可调用函数</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> <span class="string">&quot;hello f1&quot;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> str3 = <span class="string">`demo,<span class="subst">$&#123;f1()&#125;</span>`</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(str3)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="声明对象和方法简写"><a href="#声明对象和方法简写" class="headerlink" title="声明对象和方法简写"></a>声明对象和方法简写</h3><blockquote><p>声明对象简写</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> age = <span class="number">12</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> name = <span class="string">&quot;lucy&quot;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//传统方式定义对象</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> p1 = &#123;<span class="attr">name</span>:name,age,age&#125;<span class="comment">//第一个name指的是key的名称，第二个name取的是key对应的值，有点键值对的意思。</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(p1)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//es6定义变量</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> p2 = &#123;name,age&#125;<span class="comment">//直接简写传值就行了</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(p2)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>定义方法简写</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//传统方式定义的方法</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> person1 = &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">sayHi</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hi&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//调用</span></span></span><br><span class="line"><span class="language-javascript">    person1.<span class="title function_">sayHi</span>()</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//es6</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> person2 = &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">sayHi</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hi&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//调用</span></span></span><br><span class="line"><span class="language-javascript">    person2.<span class="title function_">sayHi</span>()</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="对象拓展运算符"><a href="#对象拓展运算符" class="headerlink" title="对象拓展运算符"></a>对象拓展运算符</h3><blockquote><p>拓展运算符（…）用于取出参数对象所有可遍历属性然后拷贝到当前对象。</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//对象拓展运算符: ...</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//1 对象拷贝</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> person1 = &#123;<span class="attr">name</span>:<span class="string">&quot;崽崽&quot;</span>,<span class="attr">age</span>:<span class="number">20</span>&#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> someone = &#123;...person1&#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(someone)<span class="comment">// ...加上一个对象名就表示对象拷贝了(好草率哈哈)</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//2 合并对象</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> name = &#123;<span class="attr">name</span>:<span class="string">&quot;崽崽&quot;</span>&#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> age = &#123;<span class="attr">age</span>:<span class="number">20</span>&#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> p2 = &#123;...name,...age&#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(p2)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h3><blockquote><p>箭头函数提供了一种更加简洁的函数书写方式。基本语法是：<br>参数 =&gt; 函数体<br>当箭头函数没有参数或者有多个参数，要用 () 括起来。<br>当箭头函数函数体有多行语句，用 {} 包裹起来，表示代码块，<br>当只有一行语句，并且需要返回结果时，可以省略 {} , 结果会自动返回。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//传统写法</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> f1 = <span class="keyword">function</span>(<span class="params">a</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> a</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">f1</span>(<span class="number">1</span>))</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//es6中的箭头函数改造</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> <span class="title function_">f2</span> = a =&gt; a<span class="comment">//对应传统方法，第一个a是传入参数，第二个a是返回值</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">f2</span>(<span class="number">2</span>))</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//2 复杂一点的方法</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> f3 = <span class="keyword">function</span>(<span class="params">a,b</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> a+b</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">f3</span>(<span class="number">1</span>,<span class="number">2</span>))</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> <span class="title function_">f4</span> = (<span class="params">a,b</span>) =&gt; a+b;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">f4</span>(<span class="number">1</span>,<span class="number">3</span>))</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p></blockquote><h1 id="Vue-js"><a href="#Vue-js" class="headerlink" title="Vue.js"></a>Vue.js</h1><h2 id="基本介绍"><a href="#基本介绍" class="headerlink" title="基本介绍"></a>基本介绍</h2><p>Vue (读音 /vjuː/，类似于 view) 是一套用于构建用户界面的渐进式框架。<br>Vue 的核心库只关注视图层，不仅易于上手，还便于与第三方库或既有项目整合。另一方面，当与现代化的工具链以及各种支持类库结合使用时，Vue 也完全能够为复杂的单页应用提供驱动。</p><h2 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h2><blockquote><p>这就是声明式渲染：Vue.js 的核心是一个允许采用简洁的模板语法来声明式地将数据渲染进 DOM 的系统<br>这里的核心思想就是没有繁琐的DOM操作，例如jQuery中，我们需要先找到div节点，获取到DOM对象，然后进行一系列的节点操作</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &#123;&#123;&#125;&#125; 插值表达式，绑定vue中的data数据 --&gt;</span></span><br><span class="line">        &#123;&#123;message&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;vue.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="comment">&lt;!-- 引入vue的js文件--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//创建一个vue对象</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,<span class="comment">//绑定vue作用的范围</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>: &#123;<span class="comment">//定义页面中显示的模型数据</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">message</span>: <span class="string">&#x27;Hello Vue!&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="创建测试代码片段"><a href="#创建测试代码片段" class="headerlink" title="创建测试代码片段"></a>创建测试代码片段</h2><blockquote><p>文件 =&gt;  首选项 =&gt; 用户代码片段 =&gt; 新建全局代码片段/或文件夹代码片段：vue-html.code-snippets<br>注意：制作代码片段的时候，字符串中如果包含文件中复制过来的“Tab”键的空格，要换成“空格键”的空格</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        &quot;vue htm&quot;: &#123;</span><br><span class="line">        &quot;scope&quot;: &quot;html&quot;,</span><br><span class="line">        &quot;prefix&quot;: &quot;vuehtml&quot;,</span><br><span class="line">        &quot;body&quot;: [</span><br><span class="line">            &quot;&lt;!DOCTYPE html&gt;&quot;,</span><br><span class="line">            &quot;&lt;html lang=\&quot;en\&quot;&gt;&quot;,</span><br><span class="line">            &quot;&quot;,</span><br><span class="line">            &quot;&lt;head&gt;&quot;,</span><br><span class="line">            &quot;    &lt;meta charset=\&quot;UTF-8\&quot;&gt;&quot;,</span><br><span class="line">            &quot;    &lt;meta name=\&quot;viewport\&quot; content=\&quot;width=device-width, initial-scale=1.0\&quot;&gt;&quot;,</span><br><span class="line">            &quot;    &lt;meta http-equiv=\&quot;X-UA-Compatible\&quot; content=\&quot;ie=edge\&quot;&gt;&quot;,</span><br><span class="line">            &quot;    &lt;title&gt;Document&lt;/title&gt;&quot;,</span><br><span class="line">            &quot;&lt;/head&gt;&quot;,</span><br><span class="line">            &quot;&quot;,</span><br><span class="line">            &quot;&lt;body&gt;&quot;,</span><br><span class="line">            &quot;    &lt;div id=\&quot;app\&quot;&gt;&quot;,</span><br><span class="line">            &quot;&quot;,</span><br><span class="line">            &quot;    &lt;/div&gt;&quot;,</span><br><span class="line">            &quot;    &lt;script src=\&quot;vue.min.js\&quot;&gt;&lt;/script&gt;&quot;,</span><br><span class="line">            &quot;    &lt;script&gt;&quot;,</span><br><span class="line">            &quot;        new Vue(&#123;&quot;,</span><br><span class="line">            &quot;            el: &#x27;#app&#x27;,&quot;,</span><br><span class="line">            &quot;            data: &#123;&quot;,</span><br><span class="line">            &quot;                $1&quot;,</span><br><span class="line">            &quot;            &#125;&quot;,</span><br><span class="line">            &quot;        &#125;)&quot;,</span><br><span class="line">            &quot;    &lt;/script&gt;&quot;,</span><br><span class="line">            &quot;&lt;/body&gt;&quot;,</span><br><span class="line">            &quot;&quot;,</span><br><span class="line">            &quot;&lt;/html&gt;&quot;,</span><br><span class="line">        ],</span><br><span class="line">        &quot;description&quot;: &quot;my vue template in html&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="基本语法-1"><a href="#基本语法-1" class="headerlink" title="基本语法"></a>基本语法</h2><h3 id="指令-v-bind"><a href="#指令-v-bind" class="headerlink" title="指令 v-bind"></a>指令 v-bind</h3><blockquote><p>你看到的 v-bind 特性被称为指令。指令带有前缀 v-<br>也可以使用 v-bind指令，它的简写的形式就是一个冒号（:）</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- v-bind指令</span></span><br><span class="line"><span class="comment">            单向数据绑定</span></span><br><span class="line"><span class="comment">            这个指令一般用来在标签属性里面，获取值    </span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-bind:title</span>=<span class="string">&quot;message&quot;</span>&gt;</span><span class="comment">&lt;!-- v-bind使用方法：v-bind:+标签名 --&gt;</span></span><br><span class="line">            &#123;&#123;content&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 简写方式: 就加:+标签名 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">:title</span>=<span class="string">&quot;message&quot;</span>&gt;</span></span><br><span class="line">            &#123;&#123;content&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;vue.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">content</span>: <span class="string">&#x27;我是标题&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">message</span>: <span class="string">&#x27;页面加载于&#x27;</span> + <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toLocaleString</span>()</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="双向数据绑定"><a href="#双向数据绑定" class="headerlink" title="双向数据绑定"></a>双向数据绑定</h3><blockquote><p>双向数据绑定和单向数据绑定：使用 v-model 进行双向数据绑定<br>单向绑定使用v-value</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- v-bind:value只能进行单向的数据渲染 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-bind:value</span>=<span class="string">&quot;searchMap.keyWord&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- v-model 可以进行双向的数据绑定 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;searchMap.keyWord&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>您要查询的是:&#123;&#123;searchMap.keyWord&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;vue.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">searchMap</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">keyWord</span>: <span class="string">&#x27;尚硅谷&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- vue中绑定事件 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;search()&quot;</span>&gt;</span>查询<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 简略写法，@代替v-on 而且方法可以不加括号(建议写上) --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;f1&quot;</span>&gt;</span>查询函数<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;vue.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">searchMap</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">keyWord</span>: <span class="string">&#x27;尚硅谷&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//查询结果</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">result</span>: &#123;&#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">methods</span>:&#123;<span class="comment">//定义多个方法</span></span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">search</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;search...&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">f1</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;f1...&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="修饰符"><a href="#修饰符" class="headerlink" title="修饰符"></a>修饰符</h3><blockquote><p>修饰符 (Modifiers) 是以半角句号（.）指明的特殊后缀，用于指出一个指令应该以特殊方式绑定。<br>例如，.prevent 修饰符告诉 v-on 指令对于触发的事件调用 event.preventDefault()：<br>即阻止事件原本的默认行为</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">            修饰符用于指出一个指令应该以特殊方式绑定。</span></span><br><span class="line"><span class="comment">            这里的prevent 修饰符告诉 v-on 指令对于触发的时间调用js的 event.preventDefalut();</span></span><br><span class="line"><span class="comment">            即阻止表单提交的默认行为</span></span><br><span class="line"><span class="comment">         --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;save&quot;</span> <span class="attr">v-on:submit.prevent</span>=<span class="string">&quot;onSubmitForm&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;name&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;user.name&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>保存<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;vue.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">user</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">onSubmitForm</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">user</span>.<span class="property">name</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;提交表单&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;<span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">alert</span>(<span class="string">&#x27;请输入用户名&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="v-if指令"><a href="#v-if指令" class="headerlink" title="v-if指令"></a>v-if指令</h3><blockquote><p>v-if 是“真正”的条件渲染，因为它会确保在切换过程中条件块内的事件监听器和子组件适当地被销毁和重建。<br>v-if 也是惰性的：如果在初始渲染时条件为假，则什么也不做——直到条件第一次变为真时，才会开始渲染条件块。<br>相比之下，v-show 就简单得多——不管初始条件是什么，元素总是会被渲染，并且只是简单地基于 CSS 进行切换。<br>一般来说，v-if 有更高的切换开销，而 v-show 有更高的初始渲染开销。因此，如果需要非常频繁地切换，则使用 v-show 较好；如果在运行时条件很少改变，则使用 v-if 较好。</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;ok&quot;</span>&gt;</span>是否同意永远？<span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-if</span>=<span class="string">&quot;ok&quot;</span>&gt;</span>你真的好可爱呀<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-else</span>&gt;</span>为什么不同意捏？<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;vue.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">ok</span>:<span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="v-for指令"><a href="#v-for指令" class="headerlink" title="v-for指令"></a>v-for指令</h3><blockquote><p>v-for：列表循环指令</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- n是要遍历的值,随便取，10表示遍历十次，中间用in连接 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;n in 10&quot;</span>&gt;</span>&#123;&#123;n&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- index表示索引值 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(n,index) in 10&quot;</span>&gt;</span>&#123;&#123;n&#125;&#125; -- &#123;&#123;index&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">hr</span>&gt;</span><span class="tag">&lt;/<span class="name">hr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;5&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span> <span class="attr">v-for</span>=<span class="string">&quot;user in userList&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;user.id&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;user.username&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;user.age&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;vue.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">userList</span>:[</span></span><br><span class="line"><span class="language-javascript">                    &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">username</span>: <span class="string">&#x27;herry&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                    &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">username</span>: <span class="string">&#x27;崽崽&#x27;</span>, <span class="attr">age</span>: <span class="number">19</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                    &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">username</span>: <span class="string">&#x27;hg&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>&#125;</span></span><br><span class="line"><span class="language-javascript">                ]</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Vue的组件"><a href="#Vue的组件" class="headerlink" title="Vue的组件"></a>Vue的组件</h2><blockquote><p>组件（Component）是 Vue.js 最强大的功能之一。<br>组件可以扩展 HTML 元素，封装可重用的代码。<br>组件系统让我们可以用独立可复用的小组件来构建大型应用，几乎任意类型的应用的界面都可以抽象为一个组件树：</p></blockquote><h3 id="局部组件"><a href="#局部组件" class="headerlink" title="局部组件"></a>局部组件</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var app = new Vue(&#123;</span><br><span class="line">    el: &#x27;#app&#x27;,</span><br><span class="line">    // 定义局部组件，这里可以定义多个局部组件</span><br><span class="line">    components: &#123;</span><br><span class="line">        //组件的名字</span><br><span class="line">        &#x27;Navbar&#x27;: &#123;</span><br><span class="line">            //组件的内容</span><br><span class="line">            template: &#x27;<span class="tag">&lt;<span class="name">ul</span>&gt;</span><span class="tag">&lt;<span class="name">li</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">li</span>&gt;</span>学员管理<span class="tag">&lt;/<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span>&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>写完这个方法就可以调用</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Navbar</span>&gt;</span><span class="tag">&lt;/<span class="name">Navbar</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="全局组件"><a href="#全局组件" class="headerlink" title="全局组件"></a>全局组件</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 定义全局组件</span><br><span class="line">Vue.component(&#x27;Navbar&#x27;, &#123;</span><br><span class="line">    template: &#x27;<span class="tag">&lt;<span class="name">ul</span>&gt;</span><span class="tag">&lt;<span class="name">li</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">li</span>&gt;</span>学员管理<span class="tag">&lt;/<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">li</span>&gt;</span>讲师管理<span class="tag">&lt;/<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span>&#x27;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Navbar</span>&gt;</span><span class="tag">&lt;/<span class="name">Navbar</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;vue.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;components/Navbar.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Vue的生命周期"><a href="#Vue的生命周期" class="headerlink" title="Vue的生命周期"></a>Vue的生命周期</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        hello</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;vue.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">debugger</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//在页面渲染之前执行</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;created...&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">debugger</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//在页面渲染之后执行</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;mounted...&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><blockquote><p>Vue.js 路由允许我们通过不同的 URL 访问不同的内容。<br>通过 Vue.js 可以实现多视图的单页Web应用（single page web application，SPA）。<br>Vue.js 路由需要载入 vue-router 库</p></blockquote><h3 id="引入js文件"><a href="#引入js文件" class="headerlink" title="引入js文件"></a>引入js文件</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;vue.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;vue-router.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="编写html以及js部分"><a href="#编写html以及js部分" class="headerlink" title="编写html以及js部分"></a>编写html以及js部分</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello App!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 使用router-link 组件来导航 --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 通过传入 &#x27;to&#x27; 属性指定链接， --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- &lt;router-link&gt;默认会被渲染成一个&#x27;&lt;a&gt;&#x27;标签 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/student&quot;</span>&gt;</span>会员管理<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/teacher&quot;</span>&gt;</span>讲师管理<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- 路由出口 --&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 路由匹配到的组件将渲染在这里 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;vue.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;vue-router.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 1. 定义（路由）组件。</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 可以从其他文件 import 进来</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> <span class="title class_">Welcome</span> = &#123; <span class="attr">template</span>: <span class="string">&#x27;&lt;div&gt;欢迎&lt;/div&gt;&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> <span class="title class_">Student</span> = &#123; <span class="attr">template</span>: <span class="string">&#x27;&lt;div&gt;student list&lt;/div&gt;&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> <span class="title class_">Teacher</span> = &#123; <span class="attr">template</span>: <span class="string">&#x27;&lt;div&gt;teacher list&lt;/div&gt;&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 2. 定义路由</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 每个路由应该映射一个组件。</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> routes = [</span></span><br><span class="line"><span class="language-javascript">                &#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/welcome&#x27;</span> &#125;, <span class="comment">//设置默认指向的路径</span></span></span><br><span class="line"><span class="language-javascript">                &#123; <span class="attr">path</span>: <span class="string">&#x27;/welcome&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Welcome</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123; <span class="attr">path</span>: <span class="string">&#x27;/student&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Student</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123; <span class="attr">path</span>: <span class="string">&#x27;/teacher&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Teacher</span> &#125;</span></span><br><span class="line"><span class="language-javascript">            ]</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 3. 创建 router 实例，然后传 `routes` 配置</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                routes <span class="comment">// （缩写）相当于 routes: routes</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 4. 创建和挂载根实例。</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 从而让整个应用都有路由功能</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                router</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 现在，应用已经启动了！</span></span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h1><blockquote><p>axios是独立于vue的一个项目，基于promise用于浏览器和node.js的http客户端<br>在浏览器中可以帮助我们完成 ajax请求的发送<br>在node.js中可以向远程接口发送请求</p><p>设置假数据</p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span><span class="number">20000</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span><span class="string">&quot;成功&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;items&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span></span><br><span class="line">            <span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;herry&quot;</span><span class="punctuation">,</span><span class="attr">&quot;age&quot;</span><span class="punctuation">:</span><span class="number">20</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;崽崽&quot;</span><span class="punctuation">,</span><span class="attr">&quot;age&quot;</span><span class="punctuation">:</span><span class="number">19</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;jack&quot;</span><span class="punctuation">,</span><span class="attr">&quot;age&quot;</span><span class="punctuation">:</span><span class="number">40</span><span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 把numberList数组里面数据显示 使用v-for指令 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">&quot;user in numberList&quot;</span>&gt;</span></span><br><span class="line">            &#123;&#123;user.name&#125;&#125; -- &#123;&#123;user.age&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;vue.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;axios.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//固定结构</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>: &#123;<span class="comment">//在data定义变量和初始值</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//定义变量，值为空数组</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">numberList</span>: []</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">created</span>(<span class="params"></span>)&#123;<span class="comment">//页面渲染之前执行</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//调用定义的方法</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="title function_">getUserList</span>()</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">methods</span>:&#123;<span class="comment">//编写具体的方法</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//创建方法 查询所有用户的数据</span></span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">getUserList</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//使用axios发送ajax请求</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//axios.提交方式(括号内写的是请求路径，这里是测试).then(箭头函数).catch(箭头函数)</span></span></span><br><span class="line"><span class="language-javascript">                    axios.<span class="title function_">get</span>(<span class="string">&quot;data.json&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">                        .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">//response就是请求之后的返回数据</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">//console.log(response)</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">//通过response获取具体数据，赋值给定义空数组</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">numberList</span> = response.<span class="property">data</span>.<span class="property">data</span>.<span class="property">items</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">numberList</span>)</span></span><br><span class="line"><span class="language-javascript">                        &#125;)<span class="comment">//请求成功执行then方法</span></span></span><br><span class="line"><span class="language-javascript">                        .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                        &#125;)<span class="comment">//请求失败执行cath方法</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="Node-js"><a href="#Node-js" class="headerlink" title="Node.js"></a>Node.js</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><blockquote><p>1、什么是Node.js<br>简单的说 Node.js 就是运行在服务端的 JavaScript。<br>Node.js是一个事件驱动I/O服务端JavaScript环境，基于Google的V8引擎，V8引擎执行Javascript的速度非常快，性能非常好。</p><p>2、Node.js有什么用<br>如果你是一个前端程序员，你不懂得像PHP、Python或Ruby等动态编程语言，然后你想创建自己的服务，那么Node.js是一个非常好的选择。<br>Node.js 是运行在服务端的 JavaScript，如果你熟悉Javascript，那么你将会很容易的学会Node.js。</p><p>当然，如果你是后端程序员，想部署一些高性能的服务，那么学习Node.js也是一个非常好的选择。</p></blockquote><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><blockquote><p>1、下载<br>官网：<a href="https://nodejs.org/en/">https://nodejs.org/en/</a><br>中文网：<a href="http://nodejs.cn/">http://nodejs.cn/</a><br>LTS：长期支持版本<br>Current：最新版</p><p>2、安装</p><p>3、查看版本<br>node -v</p></blockquote><h2 id="快速入门"><a href="#快速入门" class="headerlink" title="快速入门"></a>快速入门</h2><blockquote><p>直接在控制台用就好了</p><p>浏览器的内核包括两部分核心：<br>DOM渲染引擎；<br>js解析器（js引擎）<br>js运行在浏览器中的内核中的js引擎内部<br>Node.js是脱离浏览器环境运行的JavaScript程序，基于V8 引擎（Chrome 的 JavaScript的引擎）</p></blockquote>]]></content>
    
    
    <summary type="html">前端es6标准学习以及vue.js框架</summary>
    
    
    
    <category term="前端" scheme="http://love.sunnyherry.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="项目" scheme="http://love.sunnyherry.cn/tags/%E9%A1%B9%E7%9B%AE/"/>
    
  </entry>
  
  <entry>
    <title>中国近代史论文</title>
    <link href="http://love.sunnyherry.cn/_posts/57683.html"/>
    <id>http://love.sunnyherry.cn/_posts/57683.html</id>
    <published>2023-05-29T21:11:20.000Z</published>
    <updated>2023-08-06T14:11:38.837Z</updated>
    
    <content type="html"><![CDATA[<h1 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h1><p>可能就是对平等观念比较感兴趣吧，感觉这是INFJ永恒的话题，想普渡众生也想众生平等，所以选择了历史上曾经”平等”过的洪秀全太平天国运动，想深入了解一下当时是如何”平等”。查着查着就发现早期的拜上帝教的信徒多是客家人，我就想分析其原因，为什么早期的拜上帝教的信徒多是客家人呢？于是就有了这篇《论客家人对洪秀全早期拜上帝教推崇的原因》</p><h1 id="论客家人对洪秀全早期拜上帝教推崇的原因"><a href="#论客家人对洪秀全早期拜上帝教推崇的原因" class="headerlink" title="论客家人对洪秀全早期拜上帝教推崇的原因"></a>论客家人对洪秀全早期拜上帝教推崇的原因</h1><p>摘要：1843年，洪秀全领导国内原始基督教义中反映下层民众要求的平等思想和某些宗教仪式，从农民斗争的需要出发，加以改造，创立了拜上帝教，并利用它发动和组织民众。在这其中客家人对拜上帝教的推动以及后来在全国开展的农民起义起到了带领作用。这跟客家人当时的历史背景、团体观念、宗教信仰有着密切关系。<br>关键词：客家人、洪秀全、拜上帝教</p><h2 id="一、当时客家人的基本历史背景"><a href="#一、当时客家人的基本历史背景" class="headerlink" title="一、当时客家人的基本历史背景"></a>一、当时客家人的基本历史背景</h2><p>  客家人顾名思义，从别的地方来到该地区的人。客家是中原地区的汉民在历史更迭中逐渐迁移到南方的特殊民系，在清朝之前早有自己的固定生活方式和生活习俗。但是迫于早期中原地区战乱、灾荒、人口数目激增以及人口迁移的原因，逐渐南下来到广西广东等地区。<br>  客家人移居广西之后，对广西的各方面的发展都起到了积极作用，尤其是经济贸易方面，基本上大部分的商人都是客家人。但原住民和客民的矛盾就会日益增长。广西地区的原住民早已经有了自己的领地，有领土意识，面对血缘、地缘不同的客家人，一般都是已排斥的态度来对待。而且在广西原住民的村落种，村子里实行严格的宗法制度，不得外来人进村居住，这也就导致了客家人只能自成一派散居而住，而且只能居住在贫瘠而不适合耕作的土地上。就这样双方因为土地的原因经常出现争执和摩擦，使得这种地区的隔阂和界限更加的明显，进入明朗化、白热化的阶段。<br>  在鸦片战争期间，广东失去了原来的地位，很多人失去生计，流落为寇，加上英国海军势力强大，欺压百姓。致使大批民众在四十年代在三合会领导下去了广西，使得广西整体人口种类复杂多样，而在这混乱的局势中，客家人受到的冲击是最大的。他们长期受到当地人的排斥，语言不通、习俗不合、资源不均、阶级斗争都成为了导火索。由此在长期的欺压下，客家人很早就学会了武装自己，形成自己的小武装集团,但是因为种种原因，客家人在广西分布始终分散，不利于集中团体，所以他们迫切希望有人能够领导自己，然后通过自己的方式改变现状。</p><h2 id="二、洪秀全的拜上帝教——救赎客家人的宗教思想"><a href="#二、洪秀全的拜上帝教——救赎客家人的宗教思想" class="headerlink" title="二、洪秀全的拜上帝教——救赎客家人的宗教思想"></a>二、洪秀全的拜上帝教——救赎客家人的宗教思想</h2><p>  1843年之前，洪秀全科举接连失败，对于儒家圣人产生了逆反心理。在其表兄李敬芳偶然发现下，洪秀全开始研读《劝世良言》发现其思想对于他当时的处境提供了巨大的精神帮助。这是他第一次接触到了西方基督教的内容，并在其影响下撤除了孔子牌位，不再把孔子当作神来崇拜。但此时洪秀全还是对儒家思想及其推崇。<br>  在此期间，洪秀全根据《劝世良言》中所了解的一些基督教知识以及中国传统的儒家思想进行整合，编写出《百正歌》、《原道救世歌》等著作，为后来在广西宣传自己的拜上帝教打下了基础。<br>  1847年洪秀全在广州与美国传教士罗孝全会面，第一次直接阅读原版《圣经》，在这之后他对基督教的认识以及有了一个比较大的飞跃，开始从国内社会的道德批判发展到提出如何改造社会的要求，认为“皇上帝天下凡间大共之父也。天下多男人，尽是兄弟之辈；天下多女子，尽是姐妹之群。”他希望在上帝的指引下建立一个“大同世界”。他还是使用了一些儒家思想来阐述自己的思想，比如使用因果报应来告诫自己的信徒不行恶。用孔子的大同思想即：“大道之行也，天下为公。选贤举能，讲信修睦。”可以看出拜上帝教是使用了上帝的概念拯救苦难的人们，但是用了中国人普遍能够接受的儒家思想来实现自己对美好希望的憧憬。希望用耶儒之道改造世界。两个思想各有相同之处但是洪秀全进行了整合最终形成了早期的拜上帝教。也为日后在好友冯云山的帮助下在广西开创立足之地打下了思想基础。</p><h2 id="三、客家人推崇拜上帝教的原因一——领导人的出现"><a href="#三、客家人推崇拜上帝教的原因一——领导人的出现" class="headerlink" title="三、客家人推崇拜上帝教的原因一——领导人的出现"></a>三、客家人推崇拜上帝教的原因一——领导人的出现</h2><p>  洪秀全本就是一个地道的客家人。其祖先也是唐末因为战乱不断迁徙最后到了广东嘉应。洪氏族人均用操嘉应州方言。在好友冯云山的邀请下来到了广西紫荆山，他们打算在这一带传教，在原住民地区传教非常的困难因为他们早就有自己的宗教信仰不愿听信洪秀全所说的拜上帝教。但是在一些客家人的村落中反映尤为热烈。原因之一认为他自己以及他早期的信徒如表兄李敏芳、族弟洪仁玕和密友冯云山均是客家人。在血缘相通、方言一致的种种便利下，洪秀全将自己的拜上帝教思想传给了自己的老乡。洪秀全说起自己梦见异象被接到天上，有一位黄发黑服的老人委他以重任：“快去荡灭恶魔，扶持真理，使人类都能返本贵元”，并赐予宝刀和金印，“算是委他去锄奸扶正的凭证。”这对于当时的客家人来说可以说是上帝委托洪秀全来拯救客家人的命运，人们开始相信真神上帝，结合当时的社会背景客家人很快就推崇了拜上帝教。最终洪秀全借助了自己的宗族关系以及地域关系，发展了自己的信徒，形成了一个拥有两千余人的宗教团体——拜上帝会。</p><h2 id="四、客家人推崇拜上帝教的原因二——维护了客家人的权益"><a href="#四、客家人推崇拜上帝教的原因二——维护了客家人的权益" class="headerlink" title="四、客家人推崇拜上帝教的原因二——维护了客家人的权益"></a>四、客家人推崇拜上帝教的原因二——维护了客家人的权益</h2><p>  有了领导者之后，在广西的客家人可以很好的聚集在一起，不管是在拜上帝会仪式上还是宗教交流上，都在一定程度上促进了原本松散的客家人的聚拢。原本的武装力量被有组织的、有纪律的集结起来，都为了客家人更好的发展而团结一致，一致对外。一开始客家人在斗争过程中经常处于势单力薄、受欺负的地位、而且当地官员也经常性的维护当地人的利益，偏袒当地人。现在有了组织纪律后，因为拜上帝会的组织可以更好的维护自己的正当权益，他们看见了拜上帝会的价值，能够在思想上得到宽慰，也能让他们在物质上得到他们想要的需求，这样的组织因为新思想和宗教的带领下维护了客家人的利益团体。而且其实在此之前一些基督教的传道士以及来到两广地区进行了传教，通过一些传教会的形式活动，已经有不少客家人了解并接受了基督教，因为在当时的处境下客家人一直处于被孤立被打压的对象，基督教的出现对他们的思想产生了极大的影响。也是正如此，洪秀全和冯云山在广西传教自己的拜上帝教才会有一批人接受，他们找到了客家人领导基督教的领袖。很多客家人把拜上帝会当成自己的庇护所请求得到庇护，也就是在客家人的苦难的呼声下洪秀全和冯云山的传教才会变得顺利。</p><h2 id="五、客家人推崇拜上帝教的原因三——宗教信仰背景符合"><a href="#五、客家人推崇拜上帝教的原因三——宗教信仰背景符合" class="headerlink" title="五、客家人推崇拜上帝教的原因三——宗教信仰背景符合"></a>五、客家人推崇拜上帝教的原因三——宗教信仰背景符合</h2><p>  客家人迁徙到两广地带后，虽然有着自己信仰的宗教，但是因为迁徙人员变得松散，集体的宗教活动难以保留，而且原始的宗教场所也不会在两广出现。客家人的宗教思想渐渐被遗忘。由此他们在两广地区渴望有新的宗教信仰来拯救他们的思想。在土客原地居住的本土人来说，对宗庙和地方神明的崇拜是土著人介意维系血亲和地域观念的重要手段，而客家人在当地不管是土地还是宗教，都是始终处于被排斥的地位，与当地人原有宗教习俗的联系较浅，同样客家人也不希望信仰于和自身有矛盾的当地人的宗教。基于此种状况，客家人非常容易接受一个全新的宗教信仰，原本的基督教最先被客家人接纳，但是洪秀全和冯云山的拜上帝教更加符合当时国家的基本国情和民众的需求，再加上洪秀全客家人的领袖地位，使得越来越多客家人开始加入拜上帝教。洪秀全对待民间俗神以及偶像崇拜的态度无疑是赢得客家人信从上帝的因素之一。</p><h2 id="六、客家人推崇拜上帝教的原因四——和当时客家人的目的一致"><a href="#六、客家人推崇拜上帝教的原因四——和当时客家人的目的一致" class="headerlink" title="六、客家人推崇拜上帝教的原因四——和当时客家人的目的一致"></a>六、客家人推崇拜上帝教的原因四——和当时客家人的目的一致</h2><p>  当成洪秀全创立拜上帝教的举动存粹是基于其独尊上帝禁拜偶像的教义，并非仅仅针对原住民所信奉的神灵或者是处于对原住民的敌意。而当时的客家人就是希望在广西地区有自己的一席之地，通过拜上帝会形成一个组织与之对抗，这样一看好像洪秀全和客家人的目的是不一致的。其实不然，原住民和客家人之间的矛盾在于政治和经济危机，是一种社会矛盾的集中体现。洪秀全吸取了基督教和儒家思想的核心部分，从民众的苦难出发，想要解决这一类人的社会危机。于是独尊上帝，从善入天堂，从恶入地狱。在与人相处或者在社会环境中，他想要的是各自相安，呼唤天下大同，大家都是上帝的子女，都要和平相处。洪秀全本人其实不希望原住民和客家人之间产生矛盾，但是矛盾如果要解决，必须先让客家人感到不被排斥，由此像是保护了客家人的感觉，让客家人变得强大起来才有可能做到共享太平。从这个角度来说客家人和洪秀全的目的是一致的。</p><h2 id="七、结论"><a href="#七、结论" class="headerlink" title="七、结论"></a>七、结论</h2><p>  洪秀全作为农民的领袖, 他在西方基督教的启发下建立了拜上帝会, 并试图把中国传统文化中的“大同”思想、中国农民反压迫的朴素平均观念和原始基督教中平等思想结合起来, 建立一种反映农民利益的思想。<br>  到了后面我们会发现，洪秀全的思想不局限于客家人，他超越了宗族和地域的界限，想要的是无灾无难、天下共享。这种大同思想在当时具有极大的现实意义，它使得拜上帝教最大程度上发展自己的信徒，而不再局限于客家人。因为大同精神在中国自始至终都有无可替代的地位，加之当时鸦片战争、清政府统治下民众民不聊生，拜上帝教的出现使得几乎所有深受苦难的人都得以得到精神救赎。也在为后来金田起义以及后来一路北上吸纳无数信徒埋下了伏笔。<br>  总的来说洪秀全的拜上帝教对于太平天国运动早期的客家人来说在思想觉悟方面影响巨大，客家人推崇洪秀全的拜上帝教也绝非偶然，拜上帝教顺应了客家人当时的社会需求和历史背景，客家人也为以后洪秀全对拜上帝教的质变以及太平天国运动的兴起起到了积极作用。可以说当时客家人不能没有拜上帝教，而太平天国运动也不能没有客家人作为主力军。两者自相适应，自相发展，成就了早期太平天国运动的初步胜利。</p><h2 id="参考文献："><a href="#参考文献：" class="headerlink" title="参考文献："></a>参考文献：</h2><p>[1]王琳.广西客家研究综述[J].科技信息(学术研究),2008,(15):673-674+676.<br>[2]涂涓,张霞.太平天国时期洪秀全的“拜上帝教”传播思想研究[J].新闻传播,2014,(02):140-141.<br>[3]段琦.最早的中国基督新教本色教会的尝试——太平天国的宗教[J].基督宗教研究,2001,(02):270-299.<br>[4]刘海鸥.太平天国早期的家庭伦理道德探析[J].湖湘论坛,2003,(04):72-74.<br>[5]肖楠楠.洪秀全对传统儒学的批判与继承[J].闽西职业技术学院学报,2018,20(01):45-48.<br>[6]夏春涛.客家人与太平天国农民运动[J].东南学术,1998(05):85-90.</p>]]></content>
    
    
    <summary type="html">记录大学第一篇相对正规论文哈哈哈</summary>
    
    
    
    <category term="专业之外" scheme="http://love.sunnyherry.cn/categories/%E4%B8%93%E4%B8%9A%E4%B9%8B%E5%A4%96/"/>
    
    
    <category term="历史" scheme="http://love.sunnyherry.cn/tags/%E5%8E%86%E5%8F%B2/"/>
    
  </entry>
  
</feed>
